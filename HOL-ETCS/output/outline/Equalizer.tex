%
\begin{isabellebody}%
\setisabellecontext{Equalizer}%
%
\isadelimtheory
%
\endisadelimtheory
%
\isatagtheory
\isacommand{theory}\isamarkupfalse%
\ Equalizer\isanewline
\ \ \isakeyword{imports}\ Terminal\isanewline
\isakeyword{begin}%
\endisatagtheory
{\isafoldtheory}%
%
\isadelimtheory
%
\endisadelimtheory
%
\isadelimdocument
%
\endisadelimdocument
%
\isatagdocument
%
\isamarkupsection{Equalizers and Subobjects%
}
\isamarkuptrue%
%
\isamarkupsubsection{Equalizers%
}
\isamarkuptrue%
%
\endisatagdocument
{\isafolddocument}%
%
\isadelimdocument
%
\endisadelimdocument
\isacommand{definition}\isamarkupfalse%
\ equalizer\ {\isacharcolon}{\kern0pt}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}cset\ {\isasymRightarrow}\ cfunc\ {\isasymRightarrow}\ cfunc\ {\isasymRightarrow}\ cfunc\ {\isasymRightarrow}\ bool{\isachardoublequoteclose}\ \isakeyword{where}\isanewline
\ \ {\isachardoublequoteopen}equalizer\ E\ m\ f\ g\ {\isasymlongleftrightarrow}\ {\isacharparenleft}{\kern0pt}{\isasymexists}\ X\ Y{\isachardot}{\kern0pt}\ {\isacharparenleft}{\kern0pt}f\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Y{\isacharparenright}{\kern0pt}\ {\isasymand}\ {\isacharparenleft}{\kern0pt}g\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Y{\isacharparenright}{\kern0pt}\ {\isasymand}\ {\isacharparenleft}{\kern0pt}m\ {\isacharcolon}{\kern0pt}\ E\ {\isasymrightarrow}\ X{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ {\isasymand}\ {\isacharparenleft}{\kern0pt}f\ {\isasymcirc}\isactrlsub c\ m\ {\isacharequal}{\kern0pt}\ g\ {\isasymcirc}\isactrlsub c\ m{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ {\isasymand}\ {\isacharparenleft}{\kern0pt}{\isasymforall}\ h\ F{\isachardot}{\kern0pt}\ {\isacharparenleft}{\kern0pt}{\isacharparenleft}{\kern0pt}h\ {\isacharcolon}{\kern0pt}\ F\ {\isasymrightarrow}\ X{\isacharparenright}{\kern0pt}\ {\isasymand}\ {\isacharparenleft}{\kern0pt}f\ {\isasymcirc}\isactrlsub c\ h\ {\isacharequal}{\kern0pt}\ g\ {\isasymcirc}\isactrlsub c\ h{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}\ {\isasymlongrightarrow}\ {\isacharparenleft}{\kern0pt}{\isasymexists}{\isacharbang}{\kern0pt}\ k{\isachardot}{\kern0pt}\ {\isacharparenleft}{\kern0pt}k\ {\isacharcolon}{\kern0pt}\ F\ {\isasymrightarrow}\ E{\isacharparenright}{\kern0pt}\ {\isasymand}\ m\ {\isasymcirc}\isactrlsub c\ k\ {\isacharequal}{\kern0pt}\ h{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ equalizer{\isacharunderscore}{\kern0pt}def{\isadigit{2}}{\isacharcolon}{\kern0pt}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}f\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Y{\isachardoublequoteclose}\ {\isachardoublequoteopen}g\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Y{\isachardoublequoteclose}\ {\isachardoublequoteopen}m\ {\isacharcolon}{\kern0pt}\ E\ {\isasymrightarrow}\ X{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}equalizer\ E\ m\ f\ g\ {\isasymlongleftrightarrow}\ {\isacharparenleft}{\kern0pt}{\isacharparenleft}{\kern0pt}f\ {\isasymcirc}\isactrlsub c\ m\ {\isacharequal}{\kern0pt}\ g\ {\isasymcirc}\isactrlsub c\ m{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ {\isasymand}\ {\isacharparenleft}{\kern0pt}{\isasymforall}\ h\ F{\isachardot}{\kern0pt}\ {\isacharparenleft}{\kern0pt}{\isacharparenleft}{\kern0pt}h\ {\isacharcolon}{\kern0pt}\ F\ {\isasymrightarrow}\ X{\isacharparenright}{\kern0pt}\ {\isasymand}\ {\isacharparenleft}{\kern0pt}f\ {\isasymcirc}\isactrlsub c\ h\ {\isacharequal}{\kern0pt}\ g\ {\isasymcirc}\isactrlsub c\ h{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}\ {\isasymlongrightarrow}\ {\isacharparenleft}{\kern0pt}{\isasymexists}{\isacharbang}{\kern0pt}\ k{\isachardot}{\kern0pt}\ {\isacharparenleft}{\kern0pt}k\ {\isacharcolon}{\kern0pt}\ F\ {\isasymrightarrow}\ E{\isacharparenright}{\kern0pt}\ {\isasymand}\ m\ {\isasymcirc}\isactrlsub c\ k\ {\isacharequal}{\kern0pt}\ h{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{unfolding}\isamarkupfalse%
\ equalizer{\isacharunderscore}{\kern0pt}def\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}auto\ simp\ add{\isacharcolon}{\kern0pt}\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def{\isacharparenright}{\kern0pt}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ equalizer{\isacharunderscore}{\kern0pt}eq{\isacharcolon}{\kern0pt}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}f\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Y{\isachardoublequoteclose}\ {\isachardoublequoteopen}g\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Y{\isachardoublequoteclose}\ {\isachardoublequoteopen}m\ {\isacharcolon}{\kern0pt}\ E\ {\isasymrightarrow}\ X{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}equalizer\ E\ m\ f\ g{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}f\ {\isasymcirc}\isactrlsub c\ m\ {\isacharequal}{\kern0pt}\ g\ {\isasymcirc}\isactrlsub c\ m{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ equalizer{\isacharunderscore}{\kern0pt}def{\isadigit{2}}\ \isacommand{by}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ similar{\isacharunderscore}{\kern0pt}equalizers{\isacharcolon}{\kern0pt}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}f\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Y{\isachardoublequoteclose}\ {\isachardoublequoteopen}g\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Y{\isachardoublequoteclose}\ {\isachardoublequoteopen}m\ {\isacharcolon}{\kern0pt}\ E\ {\isasymrightarrow}\ X{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}equalizer\ E\ m\ f\ g{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}h\ {\isacharcolon}{\kern0pt}\ F\ {\isasymrightarrow}\ X{\isachardoublequoteclose}\ {\isachardoublequoteopen}f\ {\isasymcirc}\isactrlsub c\ h\ {\isacharequal}{\kern0pt}\ g\ {\isasymcirc}\isactrlsub c\ h{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isasymexists}{\isacharbang}{\kern0pt}\ k{\isachardot}{\kern0pt}\ k\ {\isacharcolon}{\kern0pt}\ F\ {\isasymrightarrow}\ E\ {\isasymand}\ m\ {\isasymcirc}\isactrlsub c\ k\ {\isacharequal}{\kern0pt}\ h{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ equalizer{\isacharunderscore}{\kern0pt}def{\isadigit{2}}\ \isacommand{by}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\begin{isamarkuptext}%
The definition above and the axiomatization below correspond to Axiom 4 (Equalizers) in Halvorson.%
\end{isamarkuptext}\isamarkuptrue%
\isacommand{axiomatization}\isamarkupfalse%
\ \isakeyword{where}\isanewline
\ \ equalizer{\isacharunderscore}{\kern0pt}exists{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}f\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Y\ {\isasymLongrightarrow}\ g\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Y\ {\isasymLongrightarrow}\ {\isasymexists}\ E\ m{\isachardot}{\kern0pt}\ equalizer\ E\ m\ f\ g{\isachardoublequoteclose}\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ equalizer{\isacharunderscore}{\kern0pt}exists{\isadigit{2}}{\isacharcolon}{\kern0pt}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}f\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Y{\isachardoublequoteclose}\ {\isachardoublequoteopen}g\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Y{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isasymexists}\ E\ m{\isachardot}{\kern0pt}\ m\ {\isacharcolon}{\kern0pt}\ E\ {\isasymrightarrow}\ X\ {\isasymand}\ f\ {\isasymcirc}\isactrlsub c\ m\ {\isacharequal}{\kern0pt}\ g\ {\isasymcirc}\isactrlsub c\ m\ {\isasymand}\ {\isacharparenleft}{\kern0pt}{\isasymforall}\ h\ F{\isachardot}{\kern0pt}\ {\isacharparenleft}{\kern0pt}{\isacharparenleft}{\kern0pt}h\ {\isacharcolon}{\kern0pt}\ F\ {\isasymrightarrow}\ X{\isacharparenright}{\kern0pt}\ {\isasymand}\ {\isacharparenleft}{\kern0pt}f\ {\isasymcirc}\isactrlsub c\ h\ {\isacharequal}{\kern0pt}\ g\ {\isasymcirc}\isactrlsub c\ h{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}\ {\isasymlongrightarrow}\ {\isacharparenleft}{\kern0pt}{\isasymexists}{\isacharbang}{\kern0pt}\ k{\isachardot}{\kern0pt}\ {\isacharparenleft}{\kern0pt}k\ {\isacharcolon}{\kern0pt}\ F\ {\isasymrightarrow}\ E{\isacharparenright}{\kern0pt}\ {\isasymand}\ m\ {\isasymcirc}\isactrlsub c\ k\ {\isacharequal}{\kern0pt}\ h{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}{\kern0pt}\isanewline
\ \ \isacommand{obtain}\isamarkupfalse%
\ E\ m\ \isakeyword{where}\ {\isachardoublequoteopen}equalizer\ E\ m\ f\ g{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ equalizer{\isacharunderscore}{\kern0pt}exists\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}{\kern0pt}thesis\isanewline
\ \ \ \ \isacommand{unfolding}\isamarkupfalse%
\ equalizer{\isacharunderscore}{\kern0pt}def\isanewline
\ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}rule{\isacharunderscore}{\kern0pt}tac\ x{\isacharequal}{\kern0pt}{\isachardoublequoteopen}E{\isachardoublequoteclose}\ \isakeyword{in}\ exI{\isacharcomma}{\kern0pt}\ rule{\isacharunderscore}{\kern0pt}tac\ x{\isacharequal}{\kern0pt}{\isachardoublequoteopen}m{\isachardoublequoteclose}\ \isakeyword{in}\ exI{\isacharcomma}{\kern0pt}\ auto{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \isacommand{fix}\isamarkupfalse%
\ X{\isacharprime}{\kern0pt}\ Y{\isacharprime}{\kern0pt}\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ f{\isacharunderscore}{\kern0pt}type{\isadigit{2}}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}f\ {\isacharcolon}{\kern0pt}\ X{\isacharprime}{\kern0pt}\ {\isasymrightarrow}\ Y{\isacharprime}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ g{\isacharunderscore}{\kern0pt}type{\isadigit{2}}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}g\ {\isacharcolon}{\kern0pt}\ X{\isacharprime}{\kern0pt}\ {\isasymrightarrow}\ Y{\isacharprime}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ m{\isacharunderscore}{\kern0pt}type{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}m\ {\isacharcolon}{\kern0pt}\ E\ {\isasymrightarrow}\ X{\isacharprime}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ fm{\isacharunderscore}{\kern0pt}eq{\isacharunderscore}{\kern0pt}gm{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}f\ {\isasymcirc}\isactrlsub c\ m\ {\isacharequal}{\kern0pt}\ g\ {\isasymcirc}\isactrlsub c\ m{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ equalizer{\isacharunderscore}{\kern0pt}unique{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}{\isasymforall}h\ F{\isachardot}{\kern0pt}\ h\ {\isacharcolon}{\kern0pt}\ F\ {\isasymrightarrow}\ X{\isacharprime}{\kern0pt}\ {\isasymand}\ f\ {\isasymcirc}\isactrlsub c\ h\ {\isacharequal}{\kern0pt}\ g\ {\isasymcirc}\isactrlsub c\ h\ {\isasymlongrightarrow}\ {\isacharparenleft}{\kern0pt}{\isasymexists}{\isacharbang}{\kern0pt}k{\isachardot}{\kern0pt}\ k\ {\isacharcolon}{\kern0pt}\ F\ {\isasymrightarrow}\ E\ {\isasymand}\ m\ {\isasymcirc}\isactrlsub c\ k\ {\isacharequal}{\kern0pt}\ h{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ m{\isacharunderscore}{\kern0pt}type{\isadigit{2}}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}m\ {\isacharcolon}{\kern0pt}\ E\ {\isasymrightarrow}\ X{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\kern0pt}{\isadigit{2}}{\isacharparenright}{\kern0pt}\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ g{\isacharunderscore}{\kern0pt}type{\isadigit{2}}\ m{\isacharunderscore}{\kern0pt}type\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymAnd}\ h\ F{\isachardot}{\kern0pt}\ h\ {\isacharcolon}{\kern0pt}\ F\ {\isasymrightarrow}\ X\ {\isasymLongrightarrow}\ f\ {\isasymcirc}\isactrlsub c\ h\ {\isacharequal}{\kern0pt}\ g\ {\isasymcirc}\isactrlsub c\ h\ {\isasymLongrightarrow}\ {\isasymexists}k{\isachardot}{\kern0pt}\ k\ {\isacharcolon}{\kern0pt}\ F\ {\isasymrightarrow}\ E\ {\isasymand}\ m\ {\isasymcirc}\isactrlsub c\ k\ {\isacharequal}{\kern0pt}\ h{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}metis\ m{\isacharunderscore}{\kern0pt}type{\isadigit{2}}\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ equalizer{\isacharunderscore}{\kern0pt}unique\ m{\isacharunderscore}{\kern0pt}type{\isacharparenright}{\kern0pt}\isanewline
\isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymAnd}\ F\ k\ y{\isachardot}{\kern0pt}\ m\ {\isasymcirc}\isactrlsub c\ k\ {\isacharcolon}{\kern0pt}\ F\ {\isasymrightarrow}\ X\ {\isasymLongrightarrow}\ f\ {\isasymcirc}\isactrlsub c\ m\ {\isasymcirc}\isactrlsub c\ k\ {\isacharequal}{\kern0pt}\ g\ {\isasymcirc}\isactrlsub c\ m\ {\isasymcirc}\isactrlsub c\ k\ {\isasymLongrightarrow}\ k\ {\isacharcolon}{\kern0pt}\ F\ {\isasymrightarrow}\ E\ {\isasymLongrightarrow}\ y\ {\isacharcolon}{\kern0pt}\ F\ {\isasymrightarrow}\ E\isanewline
\ \ \ \ \ \ \ \ {\isasymLongrightarrow}\ m\ {\isasymcirc}\isactrlsub c\ y\ {\isacharequal}{\kern0pt}\ m\ {\isasymcirc}\isactrlsub c\ k\ {\isasymLongrightarrow}\ k\ {\isacharequal}{\kern0pt}\ y{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ comp{\isacharunderscore}{\kern0pt}type\ equalizer{\isacharunderscore}{\kern0pt}unique\ m{\isacharunderscore}{\kern0pt}type\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\begin{isamarkuptext}%
The lemma below corresponds to Exercise 2.1.31 in Halvorson.%
\end{isamarkuptext}\isamarkuptrue%
\isacommand{lemma}\isamarkupfalse%
\ equalizers{\isacharunderscore}{\kern0pt}isomorphic{\isacharcolon}{\kern0pt}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}equalizer\ E\ m\ f\ g{\isachardoublequoteclose}\ {\isachardoublequoteopen}equalizer\ E{\isacharprime}{\kern0pt}\ m{\isacharprime}{\kern0pt}\ f\ g{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isasymexists}\ k{\isachardot}{\kern0pt}\ k\ {\isacharcolon}{\kern0pt}\ E\ {\isasymrightarrow}\ E{\isacharprime}{\kern0pt}\ {\isasymand}\ isomorphism\ k\ {\isasymand}\ m\ {\isacharequal}{\kern0pt}\ m{\isacharprime}{\kern0pt}\ {\isasymcirc}\isactrlsub c\ k{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}{\kern0pt}\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ fm{\isacharunderscore}{\kern0pt}eq{\isacharunderscore}{\kern0pt}gm{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}f\ {\isasymcirc}\isactrlsub c\ m\ {\isacharequal}{\kern0pt}\ g\ {\isasymcirc}\isactrlsub c\ m{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\kern0pt}{\isadigit{1}}{\isacharparenright}{\kern0pt}\ equalizer{\isacharunderscore}{\kern0pt}def\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ fm{\isacharprime}{\kern0pt}{\isacharunderscore}{\kern0pt}eq{\isacharunderscore}{\kern0pt}gm{\isacharprime}{\kern0pt}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}f\ {\isasymcirc}\isactrlsub c\ m{\isacharprime}{\kern0pt}\ {\isacharequal}{\kern0pt}\ g\ {\isasymcirc}\isactrlsub c\ m{\isacharprime}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\kern0pt}{\isadigit{2}}{\isacharparenright}{\kern0pt}\ equalizer{\isacharunderscore}{\kern0pt}def\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\isanewline
\ \ \isacommand{obtain}\isamarkupfalse%
\ X\ Y\ \isakeyword{where}\ f{\isacharunderscore}{\kern0pt}type{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}f\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Y{\isachardoublequoteclose}\ \isakeyword{and}\ g{\isacharunderscore}{\kern0pt}type{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}g\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Y{\isachardoublequoteclose}\ \isakeyword{and}\ m{\isacharunderscore}{\kern0pt}type{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}m\ {\isacharcolon}{\kern0pt}\ E\ {\isasymrightarrow}\ X{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\kern0pt}{\isadigit{1}}{\isacharparenright}{\kern0pt}\ \isacommand{unfolding}\isamarkupfalse%
\ equalizer{\isacharunderscore}{\kern0pt}def\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\isanewline
\ \ \isacommand{obtain}\isamarkupfalse%
\ k\ \isakeyword{where}\ k{\isacharunderscore}{\kern0pt}type{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}k\ {\isacharcolon}{\kern0pt}\ E{\isacharprime}{\kern0pt}\ {\isasymrightarrow}\ E{\isachardoublequoteclose}\ \isakeyword{and}\ mk{\isacharunderscore}{\kern0pt}eq{\isacharunderscore}{\kern0pt}m{\isacharprime}{\kern0pt}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}m\ {\isasymcirc}\isactrlsub c\ k\ {\isacharequal}{\kern0pt}\ m{\isacharprime}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}metis\ assms\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ equalizer{\isacharunderscore}{\kern0pt}def{\isacharparenright}{\kern0pt}\isanewline
\ \ \isacommand{obtain}\isamarkupfalse%
\ k{\isacharprime}{\kern0pt}\ \isakeyword{where}\ k{\isacharprime}{\kern0pt}{\isacharunderscore}{\kern0pt}type{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}k{\isacharprime}{\kern0pt}\ {\isacharcolon}{\kern0pt}\ E\ {\isasymrightarrow}\ E{\isacharprime}{\kern0pt}{\isachardoublequoteclose}\ \isakeyword{and}\ m{\isacharprime}{\kern0pt}k{\isacharunderscore}{\kern0pt}eq{\isacharunderscore}{\kern0pt}m{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}m{\isacharprime}{\kern0pt}\ {\isasymcirc}\isactrlsub c\ k{\isacharprime}{\kern0pt}\ {\isacharequal}{\kern0pt}\ m{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}metis\ assms\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ equalizer{\isacharunderscore}{\kern0pt}def{\isacharparenright}{\kern0pt}\isanewline
\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}f\ {\isasymcirc}\isactrlsub c\ m\ {\isasymcirc}\isactrlsub c\ k\ {\isasymcirc}\isactrlsub c\ k{\isacharprime}{\kern0pt}\ {\isacharequal}{\kern0pt}\ g\ {\isasymcirc}\isactrlsub c\ m\ {\isasymcirc}\isactrlsub c\ k\ {\isasymcirc}\isactrlsub c\ k{\isacharprime}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ comp{\isacharunderscore}{\kern0pt}associative{\isadigit{2}}\ m{\isacharunderscore}{\kern0pt}type\ fm{\isacharunderscore}{\kern0pt}eq{\isacharunderscore}{\kern0pt}gm\ k{\isacharprime}{\kern0pt}{\isacharunderscore}{\kern0pt}type\ k{\isacharunderscore}{\kern0pt}type\ m{\isacharprime}{\kern0pt}k{\isacharunderscore}{\kern0pt}eq{\isacharunderscore}{\kern0pt}m\ mk{\isacharunderscore}{\kern0pt}eq{\isacharunderscore}{\kern0pt}m{\isacharprime}{\kern0pt}\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}k\ {\isasymcirc}\isactrlsub c\ k{\isacharprime}{\kern0pt}\ {\isacharcolon}{\kern0pt}\ E\ {\isasymrightarrow}\ E\ {\isasymand}\ m\ {\isasymcirc}\isactrlsub c\ k\ {\isasymcirc}\isactrlsub c\ k{\isacharprime}{\kern0pt}\ {\isacharequal}{\kern0pt}\ m{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ comp{\isacharunderscore}{\kern0pt}associative{\isadigit{2}}\ comp{\isacharunderscore}{\kern0pt}type\ k{\isacharprime}{\kern0pt}{\isacharunderscore}{\kern0pt}type\ k{\isacharunderscore}{\kern0pt}type\ m{\isacharunderscore}{\kern0pt}type\ m{\isacharprime}{\kern0pt}k{\isacharunderscore}{\kern0pt}eq{\isacharunderscore}{\kern0pt}m\ mk{\isacharunderscore}{\kern0pt}eq{\isacharunderscore}{\kern0pt}m{\isacharprime}{\kern0pt}\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ kk{\isacharprime}{\kern0pt}{\isacharunderscore}{\kern0pt}eq{\isacharunderscore}{\kern0pt}id{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}k\ {\isasymcirc}\isactrlsub c\ k{\isacharprime}{\kern0pt}\ {\isacharequal}{\kern0pt}\ id\ E{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\kern0pt}{\isadigit{1}}{\isacharparenright}{\kern0pt}\ equalizer{\isacharunderscore}{\kern0pt}def\ id{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}unit{\isadigit{2}}\ id{\isacharunderscore}{\kern0pt}type\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}k{\isacharprime}{\kern0pt}\ {\isasymcirc}\isactrlsub c\ k\ {\isacharcolon}{\kern0pt}\ E{\isacharprime}{\kern0pt}\ {\isasymrightarrow}\ E{\isacharprime}{\kern0pt}\ {\isasymand}\ m{\isacharprime}{\kern0pt}\ {\isasymcirc}\isactrlsub c\ k{\isacharprime}{\kern0pt}\ {\isasymcirc}\isactrlsub c\ k\ {\isacharequal}{\kern0pt}\ m{\isacharprime}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}smt\ comp{\isacharunderscore}{\kern0pt}associative{\isadigit{2}}\ comp{\isacharunderscore}{\kern0pt}type\ k{\isacharprime}{\kern0pt}{\isacharunderscore}{\kern0pt}type\ k{\isacharunderscore}{\kern0pt}type\ m{\isacharprime}{\kern0pt}k{\isacharunderscore}{\kern0pt}eq{\isacharunderscore}{\kern0pt}m\ m{\isacharunderscore}{\kern0pt}type\ mk{\isacharunderscore}{\kern0pt}eq{\isacharunderscore}{\kern0pt}m{\isacharprime}{\kern0pt}{\isacharparenright}{\kern0pt}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ k{\isacharprime}{\kern0pt}k{\isacharunderscore}{\kern0pt}eq{\isacharunderscore}{\kern0pt}id{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}k{\isacharprime}{\kern0pt}\ {\isasymcirc}\isactrlsub c\ k\ {\isacharequal}{\kern0pt}\ id\ E{\isacharprime}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\kern0pt}{\isadigit{2}}{\isacharparenright}{\kern0pt}\ equalizer{\isacharunderscore}{\kern0pt}def\ id{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}unit{\isadigit{2}}\ id{\isacharunderscore}{\kern0pt}type\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymexists}k{\isachardot}{\kern0pt}\ k\ {\isacharcolon}{\kern0pt}\ E\ {\isasymrightarrow}\ E{\isacharprime}{\kern0pt}\ {\isasymand}\ isomorphism\ k\ {\isasymand}\ m\ {\isacharequal}{\kern0pt}\ m{\isacharprime}{\kern0pt}\ {\isasymcirc}\isactrlsub c\ k{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ isomorphism{\isacharunderscore}{\kern0pt}def\ k{\isacharprime}{\kern0pt}{\isacharunderscore}{\kern0pt}type\ k{\isacharprime}{\kern0pt}k{\isacharunderscore}{\kern0pt}eq{\isacharunderscore}{\kern0pt}id\ k{\isacharunderscore}{\kern0pt}type\ kk{\isacharprime}{\kern0pt}{\isacharunderscore}{\kern0pt}eq{\isacharunderscore}{\kern0pt}id\ m{\isacharprime}{\kern0pt}k{\isacharunderscore}{\kern0pt}eq{\isacharunderscore}{\kern0pt}m\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}rule{\isacharunderscore}{\kern0pt}tac\ x{\isacharequal}{\kern0pt}{\isachardoublequoteopen}k{\isacharprime}{\kern0pt}{\isachardoublequoteclose}\ \isakeyword{in}\ exI{\isacharcomma}{\kern0pt}\ auto{\isacharparenright}{\kern0pt}\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ isomorphic{\isacharunderscore}{\kern0pt}to{\isacharunderscore}{\kern0pt}equalizer{\isacharunderscore}{\kern0pt}is{\isacharunderscore}{\kern0pt}equalizer{\isacharcolon}{\kern0pt}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}{\isasymphi}{\isacharcolon}{\kern0pt}\ E{\isacharprime}{\kern0pt}\ {\isasymrightarrow}\ E{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}isomorphism\ {\isasymphi}{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}equalizer\ E\ m\ f\ g{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}f\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Y{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}g\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Y{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}m\ {\isacharcolon}{\kern0pt}\ E\ {\isasymrightarrow}\ X{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ \ \ {\isachardoublequoteopen}equalizer\ E{\isacharprime}{\kern0pt}\ {\isacharparenleft}{\kern0pt}m\ {\isasymcirc}\isactrlsub c\ {\isasymphi}{\isacharparenright}{\kern0pt}\ f\ g{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}{\kern0pt}\ \isanewline
\ \ \isacommand{obtain}\isamarkupfalse%
\ {\isasymphi}{\isacharunderscore}{\kern0pt}inv\ \isakeyword{where}\ {\isasymphi}{\isacharunderscore}{\kern0pt}inv{\isacharunderscore}{\kern0pt}type{\isacharbrackleft}{\kern0pt}type{\isacharunderscore}{\kern0pt}rule{\isacharbrackright}{\kern0pt}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}{\isasymphi}{\isacharunderscore}{\kern0pt}inv\ {\isacharcolon}{\kern0pt}\ E\ {\isasymrightarrow}\ E{\isacharprime}{\kern0pt}{\isachardoublequoteclose}\ \isakeyword{and}\ {\isasymphi}{\isacharunderscore}{\kern0pt}inv{\isacharunderscore}{\kern0pt}{\isasymphi}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}{\isasymphi}{\isacharunderscore}{\kern0pt}inv\ {\isasymcirc}\isactrlsub c\ {\isasymphi}\ {\isacharequal}{\kern0pt}\ id{\isacharparenleft}{\kern0pt}E{\isacharprime}{\kern0pt}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isakeyword{and}\ {\isasymphi}{\isasymphi}{\isacharunderscore}{\kern0pt}inv{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}{\isasymphi}\ {\isasymcirc}\isactrlsub c\ {\isasymphi}{\isacharunderscore}{\kern0pt}inv\ {\isacharequal}{\kern0pt}\ id{\isacharparenleft}{\kern0pt}E{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\kern0pt}{\isadigit{1}}{\isacharcomma}{\kern0pt}{\isadigit{2}}{\isacharparenright}{\kern0pt}\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ isomorphism{\isacharunderscore}{\kern0pt}def\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ equalizes{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}f\ {\isasymcirc}\isactrlsub c\ m\ {\isasymcirc}\isactrlsub c\ {\isasymphi}\ {\isacharequal}{\kern0pt}\ g\ {\isasymcirc}\isactrlsub c\ m\ {\isasymcirc}\isactrlsub c\ {\isasymphi}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ comp{\isacharunderscore}{\kern0pt}associative{\isadigit{2}}\ equalizer{\isacharunderscore}{\kern0pt}def\ \isacommand{by}\isamarkupfalse%
\ force\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymforall}h\ F{\isachardot}{\kern0pt}\ h\ {\isacharcolon}{\kern0pt}\ F\ {\isasymrightarrow}\ X\ {\isasymand}\ f\ {\isasymcirc}\isactrlsub c\ h\ {\isacharequal}{\kern0pt}\ g\ {\isasymcirc}\isactrlsub c\ h\ {\isasymlongrightarrow}\ {\isacharparenleft}{\kern0pt}{\isasymexists}{\isacharbang}{\kern0pt}k{\isachardot}{\kern0pt}\ k\ {\isacharcolon}{\kern0pt}\ F\ {\isasymrightarrow}\ E{\isacharprime}{\kern0pt}\ {\isasymand}\ {\isacharparenleft}{\kern0pt}m\ {\isasymcirc}\isactrlsub c\ {\isasymphi}{\isacharparenright}{\kern0pt}\ {\isasymcirc}\isactrlsub c\ k\ {\isacharequal}{\kern0pt}\ h{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \isacommand{proof}\isamarkupfalse%
{\isacharparenleft}{\kern0pt}auto{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \isacommand{fix}\isamarkupfalse%
\ h\ F\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ h{\isacharunderscore}{\kern0pt}type{\isacharbrackleft}{\kern0pt}type{\isacharunderscore}{\kern0pt}rule{\isacharbrackright}{\kern0pt}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}h\ {\isacharcolon}{\kern0pt}\ F\ {\isasymrightarrow}\ X{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ h{\isacharunderscore}{\kern0pt}equalizes{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}f\ {\isasymcirc}\isactrlsub c\ h\ {\isacharequal}{\kern0pt}\ g\ {\isasymcirc}\isactrlsub c\ h{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{have}\isamarkupfalse%
\ k{\isacharunderscore}{\kern0pt}exists{\isacharunderscore}{\kern0pt}uniquely{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}{\isasymexists}{\isacharbang}{\kern0pt}\ k{\isachardot}{\kern0pt}\ k{\isacharcolon}{\kern0pt}\ F\ \ {\isasymrightarrow}\ E\ {\isasymand}\ m\ {\isasymcirc}\isactrlsub c\ k\ {\isacharequal}{\kern0pt}\ h{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ equalizer{\isacharunderscore}{\kern0pt}def{\isadigit{2}}\ h{\isacharunderscore}{\kern0pt}equalizes\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharcomma}{\kern0pt}\ auto{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{obtain}\isamarkupfalse%
\ k\ \isakeyword{where}\ k{\isacharunderscore}{\kern0pt}type{\isacharbrackleft}{\kern0pt}type{\isacharunderscore}{\kern0pt}rule{\isacharbrackright}{\kern0pt}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}k{\isacharcolon}{\kern0pt}\ F\ \ {\isasymrightarrow}\ E{\isachardoublequoteclose}\ \isakeyword{and}\ k{\isacharunderscore}{\kern0pt}def{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}m\ {\isasymcirc}\isactrlsub c\ k\ {\isacharequal}{\kern0pt}\ h{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymexists}k{\isachardot}{\kern0pt}\ k\ {\isacharcolon}{\kern0pt}\ F\ {\isasymrightarrow}\ E{\isacharprime}{\kern0pt}\ {\isasymand}\ {\isacharparenleft}{\kern0pt}m\ {\isasymcirc}\isactrlsub c\ {\isasymphi}{\isacharparenright}{\kern0pt}\ {\isasymcirc}\isactrlsub c\ k\ {\isacharequal}{\kern0pt}\ h{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharcomma}{\kern0pt}\ smt\ {\isacharparenleft}{\kern0pt}z{\isadigit{3}}{\isacharparenright}{\kern0pt}\ {\isasymphi}{\isasymphi}{\isacharunderscore}{\kern0pt}inv\ {\isasymphi}{\isacharunderscore}{\kern0pt}inv{\isacharunderscore}{\kern0pt}type\ comp{\isacharunderscore}{\kern0pt}associative{\isadigit{2}}\ comp{\isacharunderscore}{\kern0pt}type\ id{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}unit{\isadigit{2}}\ k{\isacharunderscore}{\kern0pt}exists{\isacharunderscore}{\kern0pt}uniquely{\isacharparenright}{\kern0pt}\isanewline
\ \ \isacommand{next}\isamarkupfalse%
\isanewline
\ \ \ \ \isacommand{fix}\isamarkupfalse%
\ F\ k\ y\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharparenleft}{\kern0pt}m\ {\isasymcirc}\isactrlsub c\ {\isasymphi}{\isacharparenright}{\kern0pt}\ {\isasymcirc}\isactrlsub c\ k\ {\isacharcolon}{\kern0pt}\ F\ {\isasymrightarrow}\ X{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}f\ {\isasymcirc}\isactrlsub c\ {\isacharparenleft}{\kern0pt}m\ {\isasymcirc}\isactrlsub c\ {\isasymphi}{\isacharparenright}{\kern0pt}\ {\isasymcirc}\isactrlsub c\ k\ {\isacharequal}{\kern0pt}\ g\ {\isasymcirc}\isactrlsub c\ {\isacharparenleft}{\kern0pt}m\ {\isasymcirc}\isactrlsub c\ {\isasymphi}{\isacharparenright}{\kern0pt}\ {\isasymcirc}\isactrlsub c\ k{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ k{\isacharunderscore}{\kern0pt}type{\isacharbrackleft}{\kern0pt}type{\isacharunderscore}{\kern0pt}rule{\isacharbrackright}{\kern0pt}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}k\ {\isacharcolon}{\kern0pt}\ F\ {\isasymrightarrow}\ E{\isacharprime}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ y{\isacharunderscore}{\kern0pt}type{\isacharbrackleft}{\kern0pt}type{\isacharunderscore}{\kern0pt}rule{\isacharbrackright}{\kern0pt}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}y\ {\isacharcolon}{\kern0pt}\ F\ {\isasymrightarrow}\ E{\isacharprime}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharparenleft}{\kern0pt}m\ {\isasymcirc}\isactrlsub c\ {\isasymphi}{\isacharparenright}{\kern0pt}\ {\isasymcirc}\isactrlsub c\ y\ {\isacharequal}{\kern0pt}\ {\isacharparenleft}{\kern0pt}m\ {\isasymcirc}\isactrlsub c\ {\isasymphi}{\isacharparenright}{\kern0pt}\ {\isasymcirc}\isactrlsub c\ k{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}k\ {\isacharequal}{\kern0pt}\ y{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharcomma}{\kern0pt}\ smt\ {\isacharparenleft}{\kern0pt}verit{\isacharcomma}{\kern0pt}\ ccfv{\isacharunderscore}{\kern0pt}threshold{\isacharparenright}{\kern0pt}\ assms{\isacharparenleft}{\kern0pt}{\isadigit{1}}{\isacharcomma}{\kern0pt}{\isadigit{2}}{\isacharcomma}{\kern0pt}{\isadigit{3}}{\isacharparenright}{\kern0pt}\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ comp{\isacharunderscore}{\kern0pt}associative\ comp{\isacharunderscore}{\kern0pt}type\ equalizer{\isacharunderscore}{\kern0pt}def\ id{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}unit{\isadigit{2}}\ isomorphism{\isacharunderscore}{\kern0pt}def{\isacharparenright}{\kern0pt}\isanewline
\ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}{\kern0pt}thesis\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}smt\ {\isacharparenleft}{\kern0pt}verit{\isacharcomma}{\kern0pt}\ best{\isacharparenright}{\kern0pt}\ assms{\isacharparenleft}{\kern0pt}{\isadigit{1}}{\isacharcomma}{\kern0pt}{\isadigit{4}}{\isacharcomma}{\kern0pt}{\isadigit{5}}{\isacharcomma}{\kern0pt}{\isadigit{6}}{\isacharparenright}{\kern0pt}\ comp{\isacharunderscore}{\kern0pt}type\ equalizer{\isacharunderscore}{\kern0pt}def\ equalizes{\isacharparenright}{\kern0pt}\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\begin{isamarkuptext}%
The lemma below corresponds to Exercise 2.1.34 in Halvorson.%
\end{isamarkuptext}\isamarkuptrue%
\isacommand{lemma}\isamarkupfalse%
\ equalizer{\isacharunderscore}{\kern0pt}is{\isacharunderscore}{\kern0pt}monomorphism{\isacharcolon}{\kern0pt}\isanewline
\ \ {\isachardoublequoteopen}equalizer\ E\ m\ f\ g\ {\isasymLongrightarrow}\ \ monomorphism{\isacharparenleft}{\kern0pt}m{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{unfolding}\isamarkupfalse%
\ equalizer{\isacharunderscore}{\kern0pt}def\ monomorphism{\isacharunderscore}{\kern0pt}def\isanewline
\isacommand{proof}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{fix}\isamarkupfalse%
\ h{\isadigit{1}}\ h{\isadigit{2}}\ X\ Y\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ f{\isacharunderscore}{\kern0pt}type{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}f\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Y{\isachardoublequoteclose}\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ g{\isacharunderscore}{\kern0pt}type{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}g\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Y{\isachardoublequoteclose}\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ m{\isacharunderscore}{\kern0pt}type{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}m\ {\isacharcolon}{\kern0pt}\ E\ {\isasymrightarrow}\ X{\isachardoublequoteclose}\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ fm{\isacharunderscore}{\kern0pt}gm{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}f\ {\isasymcirc}\isactrlsub c\ m\ {\isacharequal}{\kern0pt}\ g\ {\isasymcirc}\isactrlsub c\ m{\isachardoublequoteclose}\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ uniqueness{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}{\isasymforall}h\ F{\isachardot}{\kern0pt}\ h\ {\isacharcolon}{\kern0pt}\ F\ {\isasymrightarrow}\ X\ {\isasymand}\ f\ {\isasymcirc}\isactrlsub c\ h\ {\isacharequal}{\kern0pt}\ g\ {\isasymcirc}\isactrlsub c\ h\ {\isasymlongrightarrow}\ {\isacharparenleft}{\kern0pt}{\isasymexists}{\isacharbang}{\kern0pt}k{\isachardot}{\kern0pt}\ k\ {\isacharcolon}{\kern0pt}\ F\ {\isasymrightarrow}\ E\ {\isasymand}\ m\ {\isasymcirc}\isactrlsub c\ k\ {\isacharequal}{\kern0pt}\ h{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ relation{\isacharunderscore}{\kern0pt}ga{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}codomain\ h{\isadigit{1}}\ {\isacharequal}{\kern0pt}\ domain\ m{\isachardoublequoteclose}\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ relation{\isacharunderscore}{\kern0pt}h{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}codomain\ h{\isadigit{2}}\ {\isacharequal}{\kern0pt}\ domain\ m{\isachardoublequoteclose}\ \isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ m{\isacharunderscore}{\kern0pt}ga{\isacharunderscore}{\kern0pt}mh{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}m\ {\isasymcirc}\isactrlsub c\ h{\isadigit{1}}\ {\isacharequal}{\kern0pt}\ m\ {\isasymcirc}\isactrlsub c\ h{\isadigit{2}}{\isachardoublequoteclose}\ \ \ \isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ \ {\isachardoublequoteopen}f\ {\isasymcirc}\isactrlsub c\ m\ {\isasymcirc}\isactrlsub c\ h{\isadigit{1}}\ {\isacharequal}{\kern0pt}\ \ g\ {\isasymcirc}\isactrlsub c\ m\ {\isasymcirc}\isactrlsub c\ h{\isadigit{2}}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ comp{\isacharunderscore}{\kern0pt}associative\ f{\isacharunderscore}{\kern0pt}type\ fm{\isacharunderscore}{\kern0pt}gm\ g{\isacharunderscore}{\kern0pt}type\ m{\isacharunderscore}{\kern0pt}ga{\isacharunderscore}{\kern0pt}mh\ m{\isacharunderscore}{\kern0pt}type\ relation{\isacharunderscore}{\kern0pt}h\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{obtain}\isamarkupfalse%
\ z\ \isakeyword{where}\ {\isachardoublequoteopen}z{\isacharcolon}{\kern0pt}\ domain{\isacharparenleft}{\kern0pt}h{\isadigit{1}}{\isacharparenright}{\kern0pt}\ {\isasymrightarrow}\ E\ {\isasymand}\ m\ {\isasymcirc}\isactrlsub c\ z\ {\isacharequal}{\kern0pt}\ m\ {\isasymcirc}\isactrlsub c\ h{\isadigit{1}}\ {\isasymand}\ \isanewline
\ \ \ \ {\isacharparenleft}{\kern0pt}{\isasymforall}\ j{\isachardot}{\kern0pt}\ j{\isacharcolon}{\kern0pt}domain{\isacharparenleft}{\kern0pt}h{\isadigit{1}}{\isacharparenright}{\kern0pt}\ {\isasymrightarrow}\ E\ {\isasymand}\ \ m\ {\isasymcirc}\isactrlsub c\ j\ {\isacharequal}{\kern0pt}\ m\ {\isasymcirc}\isactrlsub c\ h{\isadigit{1}}\ {\isasymlongrightarrow}\ j\ {\isacharequal}{\kern0pt}\ z{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ uniqueness\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}erule{\isacharunderscore}{\kern0pt}tac\ x{\isacharequal}{\kern0pt}{\isachardoublequoteopen}m\ {\isasymcirc}\isactrlsub c\ h{\isadigit{1}}{\isachardoublequoteclose}\ \isakeyword{in}\ allE{\isacharcomma}{\kern0pt}\ erule{\isacharunderscore}{\kern0pt}tac\ x{\isacharequal}{\kern0pt}{\isachardoublequoteopen}domain{\isacharparenleft}{\kern0pt}h{\isadigit{1}}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isakeyword{in}\ allE{\isacharcomma}{\kern0pt}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ smt\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ codomain{\isacharunderscore}{\kern0pt}comp\ domain{\isacharunderscore}{\kern0pt}comp\ m{\isacharunderscore}{\kern0pt}ga{\isacharunderscore}{\kern0pt}mh\ m{\isacharunderscore}{\kern0pt}type\ relation{\isacharunderscore}{\kern0pt}ga{\isacharparenright}{\kern0pt}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}h{\isadigit{1}}\ {\isacharequal}{\kern0pt}\ h{\isadigit{2}}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}metis\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ domain{\isacharunderscore}{\kern0pt}comp\ m{\isacharunderscore}{\kern0pt}ga{\isacharunderscore}{\kern0pt}mh\ m{\isacharunderscore}{\kern0pt}type\ relation{\isacharunderscore}{\kern0pt}ga\ relation{\isacharunderscore}{\kern0pt}h{\isacharparenright}{\kern0pt}\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\begin{isamarkuptext}%
The definition below corresponds to Definition 2.1.35 in Halvorson.%
\end{isamarkuptext}\isamarkuptrue%
\isacommand{definition}\isamarkupfalse%
\ regular{\isacharunderscore}{\kern0pt}monomorphism\ {\isacharcolon}{\kern0pt}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}cfunc\ {\isasymRightarrow}\ bool{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{where}\ {\isachardoublequoteopen}regular{\isacharunderscore}{\kern0pt}monomorphism\ f\ \ {\isasymlongleftrightarrow}\ \ \isanewline
\ \ \ \ \ \ \ \ \ \ {\isacharparenleft}{\kern0pt}{\isasymexists}\ g\ h{\isachardot}{\kern0pt}\ domain{\isacharparenleft}{\kern0pt}g{\isacharparenright}{\kern0pt}\ {\isacharequal}{\kern0pt}\ codomain{\isacharparenleft}{\kern0pt}f{\isacharparenright}{\kern0pt}\ {\isasymand}\ domain{\isacharparenleft}{\kern0pt}h{\isacharparenright}{\kern0pt}\ {\isacharequal}{\kern0pt}\ codomain{\isacharparenleft}{\kern0pt}f{\isacharparenright}{\kern0pt}\ {\isasymand}\ equalizer\ {\isacharparenleft}{\kern0pt}domain\ f{\isacharparenright}{\kern0pt}\ f\ g\ h{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}%
\begin{isamarkuptext}%
The lemma below corresponds to Exercise 2.1.36 in Halvorson.%
\end{isamarkuptext}\isamarkuptrue%
\isacommand{lemma}\isamarkupfalse%
\ epi{\isacharunderscore}{\kern0pt}regmon{\isacharunderscore}{\kern0pt}is{\isacharunderscore}{\kern0pt}iso{\isacharcolon}{\kern0pt}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}epimorphism{\isacharparenleft}{\kern0pt}f{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ {\isachardoublequoteopen}regular{\isacharunderscore}{\kern0pt}monomorphism{\isacharparenleft}{\kern0pt}f{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}isomorphism{\isacharparenleft}{\kern0pt}f{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}{\kern0pt}\isanewline
\ \ \isacommand{obtain}\isamarkupfalse%
\ g\ h\ \isakeyword{where}\ g{\isacharunderscore}{\kern0pt}type{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}domain{\isacharparenleft}{\kern0pt}g{\isacharparenright}{\kern0pt}\ {\isacharequal}{\kern0pt}\ codomain{\isacharparenleft}{\kern0pt}f{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isakeyword{and}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ h{\isacharunderscore}{\kern0pt}type{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}domain{\isacharparenleft}{\kern0pt}h{\isacharparenright}{\kern0pt}\ {\isacharequal}{\kern0pt}\ codomain{\isacharparenleft}{\kern0pt}f{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isakeyword{and}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ f{\isacharunderscore}{\kern0pt}equalizer{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}equalizer\ {\isacharparenleft}{\kern0pt}domain\ f{\isacharparenright}{\kern0pt}\ f\ g\ h{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\kern0pt}{\isadigit{2}}{\isacharparenright}{\kern0pt}\ regular{\isacharunderscore}{\kern0pt}monomorphism{\isacharunderscore}{\kern0pt}def\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}g\ {\isasymcirc}\isactrlsub c\ f\ {\isacharequal}{\kern0pt}\ h\ {\isasymcirc}\isactrlsub c\ f{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ equalizer{\isacharunderscore}{\kern0pt}def\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}g\ {\isacharequal}{\kern0pt}\ h{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\kern0pt}{\isadigit{1}}{\isacharparenright}{\kern0pt}\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ epimorphism{\isacharunderscore}{\kern0pt}def\ equalizer{\isacharunderscore}{\kern0pt}def\ f{\isacharunderscore}{\kern0pt}equalizer\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}g\ {\isasymcirc}\isactrlsub c\ id{\isacharparenleft}{\kern0pt}codomain{\isacharparenleft}{\kern0pt}f{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}\ {\isacharequal}{\kern0pt}\ h\ {\isasymcirc}\isactrlsub c\ id{\isacharparenleft}{\kern0pt}codomain{\isacharparenleft}{\kern0pt}f{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{obtain}\isamarkupfalse%
\ k\ \isakeyword{where}\ k{\isacharunderscore}{\kern0pt}type{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}f\ {\isasymcirc}\isactrlsub c\ k\ {\isacharequal}{\kern0pt}\ id{\isacharparenleft}{\kern0pt}codomain{\isacharparenleft}{\kern0pt}f{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}\ {\isasymand}\ codomain\ k\ {\isacharequal}{\kern0pt}\ domain\ f{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}metis\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ equalizer{\isacharunderscore}{\kern0pt}def\ f{\isacharunderscore}{\kern0pt}equalizer\ id{\isacharunderscore}{\kern0pt}type{\isacharparenright}{\kern0pt}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}f\ {\isasymcirc}\isactrlsub c\ id{\isacharparenleft}{\kern0pt}domain{\isacharparenleft}{\kern0pt}f{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}\ {\isacharequal}{\kern0pt}\ f\ {\isasymcirc}\isactrlsub c\ {\isacharparenleft}{\kern0pt}k\ {\isasymcirc}\isactrlsub c\ f{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}metis\ comp{\isacharunderscore}{\kern0pt}associative\ domain{\isacharunderscore}{\kern0pt}comp\ id{\isacharunderscore}{\kern0pt}domain\ id{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}unit\ id{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}unit{\isacharparenright}{\kern0pt}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}monomorphism\ f\ {\isasymLongrightarrow}\ k\ {\isasymcirc}\isactrlsub c\ f\ {\isacharequal}{\kern0pt}\ id{\isacharparenleft}{\kern0pt}domain{\isacharparenleft}{\kern0pt}f{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}metis\ {\isacharparenleft}{\kern0pt}mono{\isacharunderscore}{\kern0pt}tags{\isacharparenright}{\kern0pt}\ codomain{\isacharunderscore}{\kern0pt}comp\ domain{\isacharunderscore}{\kern0pt}comp\ id{\isacharunderscore}{\kern0pt}codomain\ id{\isacharunderscore}{\kern0pt}domain\ k{\isacharunderscore}{\kern0pt}type\ monomorphism{\isacharunderscore}{\kern0pt}def{\isacharparenright}{\kern0pt}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}k\ {\isasymcirc}\isactrlsub c\ f\ {\isacharequal}{\kern0pt}\ id{\isacharparenleft}{\kern0pt}domain{\isacharparenleft}{\kern0pt}f{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ equalizer{\isacharunderscore}{\kern0pt}is{\isacharunderscore}{\kern0pt}monomorphism\ f{\isacharunderscore}{\kern0pt}equalizer\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}isomorphism{\isacharparenleft}{\kern0pt}f{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}metis\ domain{\isacharunderscore}{\kern0pt}comp\ id{\isacharunderscore}{\kern0pt}domain\ isomorphism{\isacharunderscore}{\kern0pt}def\ k{\isacharunderscore}{\kern0pt}type{\isacharparenright}{\kern0pt}\ \ \isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\isadelimdocument
%
\endisadelimdocument
%
\isatagdocument
%
\isamarkupsubsection{Subobjects%
}
\isamarkuptrue%
%
\endisatagdocument
{\isafolddocument}%
%
\isadelimdocument
%
\endisadelimdocument
%
\begin{isamarkuptext}%
The definition below corresponds to Definition 2.1.32 in Halvorson.%
\end{isamarkuptext}\isamarkuptrue%
\isacommand{definition}\isamarkupfalse%
\ factors{\isacharunderscore}{\kern0pt}through\ {\isacharcolon}{\kern0pt}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}cfunc\ \ {\isasymRightarrow}\ cfunc\ {\isasymRightarrow}\ bool{\isachardoublequoteclose}\ {\isacharparenleft}{\kern0pt}\isakeyword{infix}\ {\isachardoublequoteopen}factorsthru{\isachardoublequoteclose}\ {\isadigit{9}}{\isadigit{0}}{\isacharparenright}{\kern0pt}\isanewline
\ \ \isakeyword{where}\ {\isachardoublequoteopen}g\ factorsthru\ f\ {\isasymlongleftrightarrow}\ {\isacharparenleft}{\kern0pt}{\isasymexists}\ h{\isachardot}{\kern0pt}\ {\isacharparenleft}{\kern0pt}h{\isacharcolon}{\kern0pt}\ domain{\isacharparenleft}{\kern0pt}g{\isacharparenright}{\kern0pt}{\isasymrightarrow}\ domain{\isacharparenleft}{\kern0pt}f{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}\ {\isasymand}\ f\ {\isasymcirc}\isactrlsub c\ h\ {\isacharequal}{\kern0pt}\ g{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ factors{\isacharunderscore}{\kern0pt}through{\isacharunderscore}{\kern0pt}def{\isadigit{2}}{\isacharcolon}{\kern0pt}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}g\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Z{\isachardoublequoteclose}\ {\isachardoublequoteopen}f\ {\isacharcolon}{\kern0pt}\ Y\ {\isasymrightarrow}\ Z{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}g\ factorsthru\ f\ {\isasymlongleftrightarrow}\ {\isacharparenleft}{\kern0pt}{\isasymexists}\ h{\isachardot}{\kern0pt}\ h{\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Y\ {\isasymand}\ f\ {\isasymcirc}\isactrlsub c\ h\ {\isacharequal}{\kern0pt}\ g{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{unfolding}\isamarkupfalse%
\ factors{\isacharunderscore}{\kern0pt}through{\isacharunderscore}{\kern0pt}def\ \isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}simp\ add{\isacharcolon}{\kern0pt}\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def{\isacharparenright}{\kern0pt}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\begin{isamarkuptext}%
The lemma below corresponds to Exercise 2.1.33 in Halvorson.%
\end{isamarkuptext}\isamarkuptrue%
\isacommand{lemma}\isamarkupfalse%
\ xfactorthru{\isacharunderscore}{\kern0pt}equalizer{\isacharunderscore}{\kern0pt}iff{\isacharunderscore}{\kern0pt}fx{\isacharunderscore}{\kern0pt}eq{\isacharunderscore}{\kern0pt}gx{\isacharcolon}{\kern0pt}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}f{\isacharcolon}{\kern0pt}\ X{\isasymrightarrow}\ Y{\isachardoublequoteclose}\ {\isachardoublequoteopen}g{\isacharcolon}{\kern0pt}X\ {\isasymrightarrow}\ Y{\isachardoublequoteclose}\ {\isachardoublequoteopen}equalizer\ E\ m\ f\ g{\isachardoublequoteclose}\ {\isachardoublequoteopen}x{\isasymin}\isactrlsub c\ X{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}x\ factorsthru\ m\ {\isasymlongleftrightarrow}\ f\ {\isasymcirc}\isactrlsub c\ x\ {\isacharequal}{\kern0pt}\ g\ \ {\isasymcirc}\isactrlsub c\ x{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ LHS{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}x\ factorsthru\ m{\isachardoublequoteclose}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}f\ {\isasymcirc}\isactrlsub c\ x\ {\isacharequal}{\kern0pt}\ g\ \ {\isasymcirc}\isactrlsub c\ x{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\kern0pt}{\isadigit{3}}{\isacharparenright}{\kern0pt}\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ comp{\isacharunderscore}{\kern0pt}associative\ equalizer{\isacharunderscore}{\kern0pt}def\ factors{\isacharunderscore}{\kern0pt}through{\isacharunderscore}{\kern0pt}def\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ RHS{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}f\ {\isasymcirc}\isactrlsub c\ x\ {\isacharequal}{\kern0pt}\ g\ \ {\isasymcirc}\isactrlsub c\ x{\isachardoublequoteclose}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}x\ factorsthru\ m{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{unfolding}\isamarkupfalse%
\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ factors{\isacharunderscore}{\kern0pt}through{\isacharunderscore}{\kern0pt}def\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}metis\ RHS\ assms{\isacharparenleft}{\kern0pt}{\isadigit{1}}{\isacharcomma}{\kern0pt}{\isadigit{3}}{\isacharcomma}{\kern0pt}{\isadigit{4}}{\isacharparenright}{\kern0pt}\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ equalizer{\isacharunderscore}{\kern0pt}def{\isacharparenright}{\kern0pt}\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\begin{isamarkuptext}%
The definition below corresponds to Definition 2.1.37 in Halvorson.%
\end{isamarkuptext}\isamarkuptrue%
\isacommand{definition}\isamarkupfalse%
\ subobject{\isacharunderscore}{\kern0pt}of\ {\isacharcolon}{\kern0pt}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}cset\ {\isasymtimes}\ cfunc\ {\isasymRightarrow}\ cset\ {\isasymRightarrow}\ bool{\isachardoublequoteclose}\ {\isacharparenleft}{\kern0pt}\isakeyword{infix}\ {\isachardoublequoteopen}{\isasymsubseteq}\isactrlsub c{\isachardoublequoteclose}\ {\isadigit{5}}{\isadigit{0}}{\isacharparenright}{\kern0pt}\isanewline
\ \ \isakeyword{where}\ {\isachardoublequoteopen}B\ {\isasymsubseteq}\isactrlsub c\ X\ {\isasymlongleftrightarrow}\ {\isacharparenleft}{\kern0pt}snd\ B\ {\isacharcolon}{\kern0pt}\ fst\ B\ {\isasymrightarrow}\ X\ {\isasymand}\ monomorphism\ {\isacharparenleft}{\kern0pt}snd\ B{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ subobject{\isacharunderscore}{\kern0pt}of{\isacharunderscore}{\kern0pt}def{\isadigit{2}}{\isacharcolon}{\kern0pt}\isanewline
\ \ {\isachardoublequoteopen}{\isacharparenleft}{\kern0pt}B{\isacharcomma}{\kern0pt}m{\isacharparenright}{\kern0pt}\ {\isasymsubseteq}\isactrlsub c\ X\ {\isacharequal}{\kern0pt}\ {\isacharparenleft}{\kern0pt}m\ {\isacharcolon}{\kern0pt}\ B\ {\isasymrightarrow}\ X\ {\isasymand}\ monomorphism\ m{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}simp\ add{\isacharcolon}{\kern0pt}\ subobject{\isacharunderscore}{\kern0pt}of{\isacharunderscore}{\kern0pt}def{\isacharparenright}{\kern0pt}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{definition}\isamarkupfalse%
\ relative{\isacharunderscore}{\kern0pt}subset\ {\isacharcolon}{\kern0pt}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}cset\ {\isasymtimes}\ cfunc\ {\isasymRightarrow}\ cset\ {\isasymRightarrow}\ cset\ {\isasymtimes}\ cfunc\ {\isasymRightarrow}\ bool{\isachardoublequoteclose}\ {\isacharparenleft}{\kern0pt}{\isachardoublequoteopen}{\isacharunderscore}{\kern0pt}{\isasymsubseteq}\isactrlbsub {\isacharunderscore}{\kern0pt}\isactrlesub {\isacharunderscore}{\kern0pt}{\isachardoublequoteclose}\ {\isacharbrackleft}{\kern0pt}{\isadigit{5}}{\isadigit{1}}{\isacharcomma}{\kern0pt}{\isadigit{5}}{\isadigit{0}}{\isacharcomma}{\kern0pt}{\isadigit{5}}{\isadigit{1}}{\isacharbrackright}{\kern0pt}{\isadigit{5}}{\isadigit{0}}{\isacharparenright}{\kern0pt}\isanewline
\ \ \isakeyword{where}\ {\isachardoublequoteopen}B\ {\isasymsubseteq}\isactrlbsub X\isactrlesub \ A\ \ {\isasymlongleftrightarrow}\ \isanewline
\ \ \ \ {\isacharparenleft}{\kern0pt}snd\ B\ {\isacharcolon}{\kern0pt}\ fst\ B\ {\isasymrightarrow}\ X\ {\isasymand}\ monomorphism\ {\isacharparenleft}{\kern0pt}snd\ B{\isacharparenright}{\kern0pt}\ {\isasymand}\ snd\ A\ {\isacharcolon}{\kern0pt}\ fst\ A\ {\isasymrightarrow}\ X\ {\isasymand}\ monomorphism\ {\isacharparenleft}{\kern0pt}snd\ A{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \ \ \ \ \ \ {\isasymand}\ {\isacharparenleft}{\kern0pt}{\isasymexists}\ k{\isachardot}{\kern0pt}\ k{\isacharcolon}{\kern0pt}\ fst\ B\ {\isasymrightarrow}\ fst\ A\ {\isasymand}\ snd\ A\ {\isasymcirc}\isactrlsub c\ k\ {\isacharequal}{\kern0pt}\ snd\ B{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ relative{\isacharunderscore}{\kern0pt}subset{\isacharunderscore}{\kern0pt}def{\isadigit{2}}{\isacharcolon}{\kern0pt}\ \isanewline
\ \ {\isachardoublequoteopen}{\isacharparenleft}{\kern0pt}B{\isacharcomma}{\kern0pt}m{\isacharparenright}{\kern0pt}\ {\isasymsubseteq}\isactrlbsub X\isactrlesub \ {\isacharparenleft}{\kern0pt}A{\isacharcomma}{\kern0pt}n{\isacharparenright}{\kern0pt}\ {\isacharequal}{\kern0pt}\ {\isacharparenleft}{\kern0pt}m\ {\isacharcolon}{\kern0pt}\ B\ {\isasymrightarrow}\ X\ {\isasymand}\ monomorphism\ m\ {\isasymand}\ n\ {\isacharcolon}{\kern0pt}\ A\ {\isasymrightarrow}\ X\ {\isasymand}\ monomorphism\ n\isanewline
\ \ \ \ \ \ \ \ \ \ {\isasymand}\ {\isacharparenleft}{\kern0pt}{\isasymexists}\ k{\isachardot}{\kern0pt}\ k{\isacharcolon}{\kern0pt}\ B\ {\isasymrightarrow}\ A\ {\isasymand}\ n\ {\isasymcirc}\isactrlsub c\ k\ {\isacharequal}{\kern0pt}\ m{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{unfolding}\isamarkupfalse%
\ relative{\isacharunderscore}{\kern0pt}subset{\isacharunderscore}{\kern0pt}def\ \isacommand{by}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ subobject{\isacharunderscore}{\kern0pt}is{\isacharunderscore}{\kern0pt}relative{\isacharunderscore}{\kern0pt}subset{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}{\isacharparenleft}{\kern0pt}B{\isacharcomma}{\kern0pt}m{\isacharparenright}{\kern0pt}\ {\isasymsubseteq}\isactrlsub c\ A\ {\isasymlongleftrightarrow}\ {\isacharparenleft}{\kern0pt}B{\isacharcomma}{\kern0pt}m{\isacharparenright}{\kern0pt}\ {\isasymsubseteq}\isactrlbsub A\isactrlesub \ {\isacharparenleft}{\kern0pt}A{\isacharcomma}{\kern0pt}\ id{\isacharparenleft}{\kern0pt}A{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{unfolding}\isamarkupfalse%
\ relative{\isacharunderscore}{\kern0pt}subset{\isacharunderscore}{\kern0pt}def{\isadigit{2}}\ subobject{\isacharunderscore}{\kern0pt}of{\isacharunderscore}{\kern0pt}def{\isadigit{2}}\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ id{\isacharunderscore}{\kern0pt}isomorphism\ id{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}unit\ id{\isacharunderscore}{\kern0pt}type\ iso{\isacharunderscore}{\kern0pt}imp{\isacharunderscore}{\kern0pt}epi{\isacharunderscore}{\kern0pt}and{\isacharunderscore}{\kern0pt}monic\ \isacommand{by}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\begin{isamarkuptext}%
The definition below corresponds to Definition 2.1.39 in Halvorson.%
\end{isamarkuptext}\isamarkuptrue%
\isacommand{definition}\isamarkupfalse%
\ relative{\isacharunderscore}{\kern0pt}member\ {\isacharcolon}{\kern0pt}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}cfunc\ {\isasymRightarrow}\ cset\ {\isasymRightarrow}\ cset\ {\isasymtimes}\ cfunc\ {\isasymRightarrow}\ bool{\isachardoublequoteclose}\ {\isacharparenleft}{\kern0pt}{\isachardoublequoteopen}{\isacharunderscore}{\kern0pt}\ {\isasymin}\isactrlbsub {\isacharunderscore}{\kern0pt}\isactrlesub \ {\isacharunderscore}{\kern0pt}{\isachardoublequoteclose}\ {\isacharbrackleft}{\kern0pt}{\isadigit{5}}{\isadigit{1}}{\isacharcomma}{\kern0pt}{\isadigit{5}}{\isadigit{0}}{\isacharcomma}{\kern0pt}{\isadigit{5}}{\isadigit{1}}{\isacharbrackright}{\kern0pt}{\isadigit{5}}{\isadigit{0}}{\isacharparenright}{\kern0pt}\ \isakeyword{where}\isanewline
\ \ {\isachardoublequoteopen}x\ {\isasymin}\isactrlbsub X\isactrlesub \ B\ {\isasymlongleftrightarrow}\ {\isacharparenleft}{\kern0pt}x\ {\isasymin}\isactrlsub c\ X\ {\isasymand}\ monomorphism\ {\isacharparenleft}{\kern0pt}snd\ B{\isacharparenright}{\kern0pt}\ {\isasymand}\ snd\ B\ {\isacharcolon}{\kern0pt}\ fst\ B\ {\isasymrightarrow}\ X\ {\isasymand}\ x\ factorsthru\ {\isacharparenleft}{\kern0pt}snd\ B{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ relative{\isacharunderscore}{\kern0pt}member{\isacharunderscore}{\kern0pt}def{\isadigit{2}}{\isacharcolon}{\kern0pt}\isanewline
\ \ {\isachardoublequoteopen}x\ {\isasymin}\isactrlbsub X\isactrlesub \ {\isacharparenleft}{\kern0pt}B{\isacharcomma}{\kern0pt}\ m{\isacharparenright}{\kern0pt}\ {\isacharequal}{\kern0pt}\ {\isacharparenleft}{\kern0pt}x\ {\isasymin}\isactrlsub c\ X\ {\isasymand}\ monomorphism\ m\ {\isasymand}\ m\ {\isacharcolon}{\kern0pt}\ B\ {\isasymrightarrow}\ X\ {\isasymand}\ x\ factorsthru\ m{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{unfolding}\isamarkupfalse%
\ relative{\isacharunderscore}{\kern0pt}member{\isacharunderscore}{\kern0pt}def\ \isacommand{by}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\begin{isamarkuptext}%
The lemma below corresponds to Proposition 2.1.40 in Halvorson.%
\end{isamarkuptext}\isamarkuptrue%
\isacommand{lemma}\isamarkupfalse%
\ relative{\isacharunderscore}{\kern0pt}subobject{\isacharunderscore}{\kern0pt}member{\isacharcolon}{\kern0pt}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}{\isacharparenleft}{\kern0pt}A{\isacharcomma}{\kern0pt}n{\isacharparenright}{\kern0pt}\ {\isasymsubseteq}\isactrlbsub X\isactrlesub \ {\isacharparenleft}{\kern0pt}B{\isacharcomma}{\kern0pt}m{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ {\isachardoublequoteopen}x\ {\isasymin}\isactrlsub c\ X{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}x\ {\isasymin}\isactrlbsub X\isactrlesub \ {\isacharparenleft}{\kern0pt}A{\isacharcomma}{\kern0pt}n{\isacharparenright}{\kern0pt}\ {\isasymLongrightarrow}\ x\ {\isasymin}\isactrlbsub X\isactrlesub \ {\isacharparenleft}{\kern0pt}B{\isacharcomma}{\kern0pt}m{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{unfolding}\isamarkupfalse%
\ relative{\isacharunderscore}{\kern0pt}member{\isacharunderscore}{\kern0pt}def{\isadigit{2}}\ relative{\isacharunderscore}{\kern0pt}subset{\isacharunderscore}{\kern0pt}def{\isadigit{2}}\isanewline
\isacommand{proof}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{fix}\isamarkupfalse%
\ k\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ m{\isacharunderscore}{\kern0pt}type{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}m\ {\isacharcolon}{\kern0pt}\ B\ {\isasymrightarrow}\ X{\isachardoublequoteclose}\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ k{\isacharunderscore}{\kern0pt}type{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}k\ {\isacharcolon}{\kern0pt}\ A\ {\isasymrightarrow}\ B{\isachardoublequoteclose}\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ m{\isacharunderscore}{\kern0pt}monomorphism{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}monomorphism\ m{\isachardoublequoteclose}\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ mk{\isacharunderscore}{\kern0pt}monomorphism{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}monomorphism\ {\isacharparenleft}{\kern0pt}m\ {\isasymcirc}\isactrlsub c\ k{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ n{\isacharunderscore}{\kern0pt}eq{\isacharunderscore}{\kern0pt}mk{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}n\ {\isacharequal}{\kern0pt}\ m\ {\isasymcirc}\isactrlsub c\ k{\isachardoublequoteclose}\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ factorsthru{\isacharunderscore}{\kern0pt}mk{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}x\ factorsthru\ {\isacharparenleft}{\kern0pt}m\ {\isasymcirc}\isactrlsub c\ k{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \isanewline
\ \ \isacommand{obtain}\isamarkupfalse%
\ a\ \isakeyword{where}\ a{\isacharunderscore}{\kern0pt}assms{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}a\ {\isasymin}\isactrlsub c\ A\ {\isasymand}\ {\isacharparenleft}{\kern0pt}m\ {\isasymcirc}\isactrlsub c\ k{\isacharparenright}{\kern0pt}\ {\isasymcirc}\isactrlsub c\ a\ {\isacharequal}{\kern0pt}\ x{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\kern0pt}{\isadigit{2}}{\isacharparenright}{\kern0pt}\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ domain{\isacharunderscore}{\kern0pt}comp\ factors{\isacharunderscore}{\kern0pt}through{\isacharunderscore}{\kern0pt}def\ factorsthru{\isacharunderscore}{\kern0pt}mk\ k{\isacharunderscore}{\kern0pt}type\ m{\isacharunderscore}{\kern0pt}type\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}x\ factorsthru\ m\ {\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{unfolding}\isamarkupfalse%
\ factors{\isacharunderscore}{\kern0pt}through{\isacharunderscore}{\kern0pt}def\ \isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ comp{\isacharunderscore}{\kern0pt}type\ k{\isacharunderscore}{\kern0pt}type\ m{\isacharunderscore}{\kern0pt}type\ comp{\isacharunderscore}{\kern0pt}associative\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}rule{\isacharunderscore}{\kern0pt}tac\ x{\isacharequal}{\kern0pt}{\isachardoublequoteopen}k\ {\isasymcirc}\isactrlsub c\ a{\isachardoublequoteclose}\ \isakeyword{in}\ exI{\isacharcomma}{\kern0pt}\ auto{\isacharparenright}{\kern0pt}\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\isadelimdocument
%
\endisadelimdocument
%
\isatagdocument
%
\isamarkupsection{Pullback%
}
\isamarkuptrue%
%
\endisatagdocument
{\isafolddocument}%
%
\isadelimdocument
%
\endisadelimdocument
%
\begin{isamarkuptext}%
The definition below corresponds to a definition stated between Definition 2.1.42 and Definition 2.1.43 in Halvorson.%
\end{isamarkuptext}\isamarkuptrue%
\isacommand{definition}\isamarkupfalse%
\ is{\isacharunderscore}{\kern0pt}pullback\ {\isacharcolon}{\kern0pt}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}cset\ {\isasymRightarrow}\ cset\ {\isasymRightarrow}\ cset\ {\isasymRightarrow}\ cset\ {\isasymRightarrow}\ cfunc\ {\isasymRightarrow}\ cfunc\ {\isasymRightarrow}\ cfunc\ {\isasymRightarrow}\ cfunc\ {\isasymRightarrow}\ bool{\isachardoublequoteclose}\ \isakeyword{where}\isanewline
\ \ {\isachardoublequoteopen}is{\isacharunderscore}{\kern0pt}pullback\ A\ B\ C\ D\ ab\ bd\ ac\ cd\ {\isasymlongleftrightarrow}\ \isanewline
\ \ \ \ {\isacharparenleft}{\kern0pt}ab\ {\isacharcolon}{\kern0pt}\ A\ {\isasymrightarrow}\ B\ {\isasymand}\ bd\ {\isacharcolon}{\kern0pt}\ B\ {\isasymrightarrow}\ D\ {\isasymand}\ ac\ {\isacharcolon}{\kern0pt}\ A\ {\isasymrightarrow}\ C\ {\isasymand}\ cd\ {\isacharcolon}{\kern0pt}\ C\ {\isasymrightarrow}\ D\ {\isasymand}\ bd\ {\isasymcirc}\isactrlsub c\ ab\ {\isacharequal}{\kern0pt}\ cd\ {\isasymcirc}\isactrlsub c\ ac\ {\isasymand}\ \isanewline
\ \ \ \ {\isacharparenleft}{\kern0pt}{\isasymforall}\ Z\ k\ h{\isachardot}{\kern0pt}\ {\isacharparenleft}{\kern0pt}k\ {\isacharcolon}{\kern0pt}\ Z\ {\isasymrightarrow}\ B\ {\isasymand}\ h\ {\isacharcolon}{\kern0pt}\ Z\ {\isasymrightarrow}\ C\ {\isasymand}\ bd\ {\isasymcirc}\isactrlsub c\ k\ {\isacharequal}{\kern0pt}\ cd\ {\isasymcirc}\isactrlsub c\ h{\isacharparenright}{\kern0pt}\ \ {\isasymlongrightarrow}\isanewline
\ \ \ \ \ \ {\isacharparenleft}{\kern0pt}{\isasymexists}{\isacharbang}{\kern0pt}\ j{\isachardot}{\kern0pt}\ j\ {\isacharcolon}{\kern0pt}\ Z\ {\isasymrightarrow}\ A\ {\isasymand}\ ab\ {\isasymcirc}\isactrlsub c\ j\ {\isacharequal}{\kern0pt}\ k\ {\isasymand}\ ac\ {\isasymcirc}\isactrlsub c\ j\ {\isacharequal}{\kern0pt}\ h{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ pullback{\isacharunderscore}{\kern0pt}iff{\isacharunderscore}{\kern0pt}product{\isacharcolon}{\kern0pt}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}terminal{\isacharunderscore}{\kern0pt}object{\isacharparenleft}{\kern0pt}T{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ f{\isacharunderscore}{\kern0pt}type{\isacharbrackleft}{\kern0pt}type{\isacharunderscore}{\kern0pt}rule{\isacharbrackright}{\kern0pt}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}f\ {\isacharcolon}{\kern0pt}\ Y\ {\isasymrightarrow}\ T{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{assumes}\ g{\isacharunderscore}{\kern0pt}type{\isacharbrackleft}{\kern0pt}type{\isacharunderscore}{\kern0pt}rule{\isacharbrackright}{\kern0pt}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}g\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ T{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isacharparenleft}{\kern0pt}is{\isacharunderscore}{\kern0pt}pullback\ P\ Y\ X\ T\ {\isacharparenleft}{\kern0pt}pY{\isacharparenright}{\kern0pt}\ f\ {\isacharparenleft}{\kern0pt}pX{\isacharparenright}{\kern0pt}\ g{\isacharparenright}{\kern0pt}\ {\isacharequal}{\kern0pt}\ {\isacharparenleft}{\kern0pt}is{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}prod\ P\ pX\ pY\ X\ Y{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
{\isacharparenleft}{\kern0pt}auto{\isacharparenright}{\kern0pt}\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ pullback{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}is{\isacharunderscore}{\kern0pt}pullback\ P\ Y\ X\ T\ pY\ f\ pX\ g{\isachardoublequoteclose}\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ f{\isacharunderscore}{\kern0pt}type{\isacharbrackleft}{\kern0pt}type{\isacharunderscore}{\kern0pt}rule{\isacharbrackright}{\kern0pt}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}f\ {\isacharcolon}{\kern0pt}\ Y\ {\isasymrightarrow}\ T{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ is{\isacharunderscore}{\kern0pt}pullback{\isacharunderscore}{\kern0pt}def\ pullback\ \isacommand{by}\isamarkupfalse%
\ force\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ g{\isacharunderscore}{\kern0pt}type{\isacharbrackleft}{\kern0pt}type{\isacharunderscore}{\kern0pt}rule{\isacharbrackright}{\kern0pt}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}g\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ T{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ is{\isacharunderscore}{\kern0pt}pullback{\isacharunderscore}{\kern0pt}def\ pullback\ \isacommand{by}\isamarkupfalse%
\ force\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}is{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}prod\ P\ pX\ pY\ X\ Y{\isachardoublequoteclose}\isanewline
\ \ \isacommand{proof}\isamarkupfalse%
{\isacharparenleft}{\kern0pt}unfold\ is{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}prod{\isacharunderscore}{\kern0pt}def{\isacharcomma}{\kern0pt}\ auto{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ pX{\isacharunderscore}{\kern0pt}type{\isacharbrackleft}{\kern0pt}type{\isacharunderscore}{\kern0pt}rule{\isacharbrackright}{\kern0pt}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}pX\ {\isacharcolon}{\kern0pt}\ P\ {\isasymrightarrow}\ X{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ pullback\ is{\isacharunderscore}{\kern0pt}pullback{\isacharunderscore}{\kern0pt}def\ \isacommand{by}\isamarkupfalse%
\ force\isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ pY{\isacharunderscore}{\kern0pt}type{\isacharbrackleft}{\kern0pt}type{\isacharunderscore}{\kern0pt}rule{\isacharbrackright}{\kern0pt}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}pY\ {\isacharcolon}{\kern0pt}\ P\ {\isasymrightarrow}\ Y{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ pullback\ is{\isacharunderscore}{\kern0pt}pullback{\isacharunderscore}{\kern0pt}def\ \isacommand{by}\isamarkupfalse%
\ force\isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymAnd}x\ y\ Z{\isachardot}{\kern0pt}\isanewline
\ \ \ \ \ \ \ x\ {\isacharcolon}{\kern0pt}\ Z\ {\isasymrightarrow}\ X\ {\isasymLongrightarrow}\isanewline
\ \ \ \ \ \ \ y\ {\isacharcolon}{\kern0pt}\ Z\ {\isasymrightarrow}\ Y\ {\isasymLongrightarrow}\isanewline
\ \ \ \ \ \ \ {\isasymexists}h{\isachardot}{\kern0pt}\ h\ {\isacharcolon}{\kern0pt}\ Z\ {\isasymrightarrow}\ P\ {\isasymand}\isanewline
\ \ \ \ \ \ \ \ \ \ \ pX\ {\isasymcirc}\isactrlsub c\ h\ {\isacharequal}{\kern0pt}\ x\ {\isasymand}\ pY\ {\isasymcirc}\isactrlsub c\ h\ {\isacharequal}{\kern0pt}\ y\ {\isasymand}\ {\isacharparenleft}{\kern0pt}{\isasymforall}h{\isadigit{2}}{\isachardot}{\kern0pt}\ h{\isadigit{2}}\ {\isacharcolon}{\kern0pt}\ Z\ {\isasymrightarrow}\ P\ {\isasymand}\ pX\ {\isasymcirc}\isactrlsub c\ h{\isadigit{2}}\ {\isacharequal}{\kern0pt}\ x\ {\isasymand}\ pY\ {\isasymcirc}\isactrlsub c\ h{\isadigit{2}}\ {\isacharequal}{\kern0pt}\ y\ {\isasymlongrightarrow}\ h{\isadigit{2}}\ {\isacharequal}{\kern0pt}\ h{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharminus}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \isacommand{fix}\isamarkupfalse%
\ x\ y\ Z\isanewline
\ \ \ \ \ \ \isacommand{assume}\isamarkupfalse%
\ x{\isacharunderscore}{\kern0pt}type{\isacharbrackleft}{\kern0pt}type{\isacharunderscore}{\kern0pt}rule{\isacharbrackright}{\kern0pt}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}x\ {\isacharcolon}{\kern0pt}\ Z\ {\isasymrightarrow}\ X{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{assume}\isamarkupfalse%
\ y{\isacharunderscore}{\kern0pt}type{\isacharbrackleft}{\kern0pt}type{\isacharunderscore}{\kern0pt}rule{\isacharbrackright}{\kern0pt}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}y\ {\isacharcolon}{\kern0pt}\ Z\ {\isasymrightarrow}\ Y{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{have}\isamarkupfalse%
\ \ {\isachardoublequoteopen}{\isasymAnd}Z\ k\ h{\isachardot}{\kern0pt}\ k\ {\isacharcolon}{\kern0pt}\ Z\ {\isasymrightarrow}\ Y\ {\isasymLongrightarrow}\ h\ {\isacharcolon}{\kern0pt}\ Z\ {\isasymrightarrow}\ X\ {\isasymLongrightarrow}\ f\ {\isasymcirc}\isactrlsub c\ k\ {\isacharequal}{\kern0pt}\ g\ {\isasymcirc}\isactrlsub c\ h\ {\isasymLongrightarrow}\ {\isasymexists}j{\isachardot}{\kern0pt}\ j\ {\isacharcolon}{\kern0pt}\ Z\ {\isasymrightarrow}\ P\ {\isasymand}\ pY\ {\isasymcirc}\isactrlsub c\ j\ {\isacharequal}{\kern0pt}\ k\ {\isasymand}\ pX\ {\isasymcirc}\isactrlsub c\ j\ {\isacharequal}{\kern0pt}\ h{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ is{\isacharunderscore}{\kern0pt}pullback{\isacharunderscore}{\kern0pt}def\ pullback\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymexists}h{\isachardot}{\kern0pt}\ h\ {\isacharcolon}{\kern0pt}\ Z\ {\isasymrightarrow}\ P\ {\isasymand}\isanewline
\ \ \ \ \ \ \ \ \ \ \ pX\ {\isasymcirc}\isactrlsub c\ h\ {\isacharequal}{\kern0pt}\ x\ {\isasymand}\ pY\ {\isasymcirc}\isactrlsub c\ h\ {\isacharequal}{\kern0pt}\ y{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}smt\ {\isacharparenleft}{\kern0pt}verit{\isacharcomma}{\kern0pt}\ ccfv{\isacharunderscore}{\kern0pt}threshold{\isacharparenright}{\kern0pt}\ assms\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ codomain{\isacharunderscore}{\kern0pt}comp\ domain{\isacharunderscore}{\kern0pt}comp\ f{\isacharunderscore}{\kern0pt}type\ g{\isacharunderscore}{\kern0pt}type\ terminal{\isacharunderscore}{\kern0pt}object{\isacharunderscore}{\kern0pt}def\ x{\isacharunderscore}{\kern0pt}type\ y{\isacharunderscore}{\kern0pt}type{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymexists}h{\isachardot}{\kern0pt}\ h\ {\isacharcolon}{\kern0pt}\ Z\ {\isasymrightarrow}\ P\ {\isasymand}\isanewline
\ \ \ \ \ \ \ \ \ \ \ pX\ {\isasymcirc}\isactrlsub c\ h\ {\isacharequal}{\kern0pt}\ x\ {\isasymand}\ pY\ {\isasymcirc}\isactrlsub c\ h\ {\isacharequal}{\kern0pt}\ y\ {\isasymand}\ {\isacharparenleft}{\kern0pt}{\isasymforall}h{\isadigit{2}}{\isachardot}{\kern0pt}\ h{\isadigit{2}}\ {\isacharcolon}{\kern0pt}\ Z\ {\isasymrightarrow}\ P\ {\isasymand}\ pX\ {\isasymcirc}\isactrlsub c\ h{\isadigit{2}}\ {\isacharequal}{\kern0pt}\ x\ {\isasymand}\ pY\ {\isasymcirc}\isactrlsub c\ h{\isadigit{2}}\ {\isacharequal}{\kern0pt}\ y\ {\isasymlongrightarrow}\ h{\isadigit{2}}\ {\isacharequal}{\kern0pt}\ h{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharcomma}{\kern0pt}\ smt\ {\isacharparenleft}{\kern0pt}verit{\isacharcomma}{\kern0pt}\ ccfv{\isacharunderscore}{\kern0pt}threshold{\isacharparenright}{\kern0pt}\ comp{\isacharunderscore}{\kern0pt}associative{\isadigit{2}}\ is{\isacharunderscore}{\kern0pt}pullback{\isacharunderscore}{\kern0pt}def\ pullback{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ prod{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}is{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}prod\ P\ pX\ pY\ X\ Y{\isachardoublequoteclose}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}is{\isacharunderscore}{\kern0pt}pullback\ P\ Y\ X\ T\ pY\ f\ pX\ g{\isachardoublequoteclose}\isanewline
\ \ \isacommand{proof}\isamarkupfalse%
{\isacharparenleft}{\kern0pt}unfold\ is{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}prod{\isacharunderscore}{\kern0pt}def\ is{\isacharunderscore}{\kern0pt}pullback{\isacharunderscore}{\kern0pt}def{\isacharcomma}{\kern0pt}\ typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharcomma}{\kern0pt}\ auto{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ pX{\isacharunderscore}{\kern0pt}type{\isacharbrackleft}{\kern0pt}type{\isacharunderscore}{\kern0pt}rule{\isacharbrackright}{\kern0pt}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}pX\ {\isacharcolon}{\kern0pt}\ P\ {\isasymrightarrow}\ X{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ pY{\isacharunderscore}{\kern0pt}type{\isacharbrackleft}{\kern0pt}type{\isacharunderscore}{\kern0pt}rule{\isacharbrackright}{\kern0pt}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}pY\ {\isacharcolon}{\kern0pt}\ P\ {\isasymrightarrow}\ Y{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}f\ {\isasymcirc}\isactrlsub c\ pY\ {\isacharequal}{\kern0pt}\ g\ {\isasymcirc}\isactrlsub c\ pX{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\kern0pt}{\isadigit{1}}{\isacharparenright}{\kern0pt}\ terminal{\isacharunderscore}{\kern0pt}object{\isacharunderscore}{\kern0pt}def\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharcomma}{\kern0pt}\ auto{\isacharparenright}{\kern0pt}\ \ \isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymAnd}Z\ k\ h{\isachardot}{\kern0pt}\ k\ {\isacharcolon}{\kern0pt}\ Z\ {\isasymrightarrow}\ Y\ {\isasymLongrightarrow}\ h\ {\isacharcolon}{\kern0pt}\ Z\ {\isasymrightarrow}\ X\ {\isasymLongrightarrow}\ f\ {\isasymcirc}\isactrlsub c\ k\ {\isacharequal}{\kern0pt}\ g\ {\isasymcirc}\isactrlsub c\ h\ {\isasymLongrightarrow}\ {\isasymexists}j{\isachardot}{\kern0pt}\ j\ {\isacharcolon}{\kern0pt}\ Z\ {\isasymrightarrow}\ P\ {\isasymand}\ pY\ {\isasymcirc}\isactrlsub c\ j\ {\isacharequal}{\kern0pt}\ k\ {\isasymand}\ pX\ {\isasymcirc}\isactrlsub c\ j\ {\isacharequal}{\kern0pt}\ h{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ is{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}prod{\isacharunderscore}{\kern0pt}def\ prod\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymAnd}Z\ j\ y{\isachardot}{\kern0pt}\isanewline
\ \ \ \ \ \ \ pY\ {\isasymcirc}\isactrlsub c\ j\ {\isacharcolon}{\kern0pt}\ Z\ {\isasymrightarrow}\ Y\ {\isasymLongrightarrow}\isanewline
\ \ \ \ \ \ \ pX\ {\isasymcirc}\isactrlsub c\ j\ {\isacharcolon}{\kern0pt}\ Z\ {\isasymrightarrow}\ X\ {\isasymLongrightarrow}\isanewline
\ \ \ \ \ \ \ f\ {\isasymcirc}\isactrlsub c\ pY\ {\isasymcirc}\isactrlsub c\ j\ {\isacharequal}{\kern0pt}\ g\ {\isasymcirc}\isactrlsub c\ pX\ {\isasymcirc}\isactrlsub c\ j\ {\isasymLongrightarrow}\ j\ {\isacharcolon}{\kern0pt}\ Z\ {\isasymrightarrow}\ P\ {\isasymLongrightarrow}\ y\ {\isacharcolon}{\kern0pt}\ Z\ {\isasymrightarrow}\ P\ {\isasymLongrightarrow}\ pY\ {\isasymcirc}\isactrlsub c\ y\ {\isacharequal}{\kern0pt}\ pY\ {\isasymcirc}\isactrlsub c\ j\ {\isasymLongrightarrow}\ pX\ {\isasymcirc}\isactrlsub c\ y\ {\isacharequal}{\kern0pt}\ pX\ {\isasymcirc}\isactrlsub c\ j\ {\isasymLongrightarrow}\ j\ {\isacharequal}{\kern0pt}\ y{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ is{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}prod{\isacharunderscore}{\kern0pt}def\ prod\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\isadelimdocument
%
\endisadelimdocument
%
\isatagdocument
%
\isamarkupsection{Inverse Image%
}
\isamarkuptrue%
%
\endisatagdocument
{\isafolddocument}%
%
\isadelimdocument
%
\endisadelimdocument
%
\begin{isamarkuptext}%
The definition below corresponds to a definition given by a diagram between Definition 2.1.37 and Proposition 2.1.38 in Halvorson.%
\end{isamarkuptext}\isamarkuptrue%
\isacommand{definition}\isamarkupfalse%
\ inverse{\isacharunderscore}{\kern0pt}image\ {\isacharcolon}{\kern0pt}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}cfunc\ {\isasymRightarrow}\ cset\ {\isasymRightarrow}\ cfunc\ {\isasymRightarrow}\ cset{\isachardoublequoteclose}\ {\isacharparenleft}{\kern0pt}{\isachardoublequoteopen}{\isacharunderscore}{\kern0pt}\isactrlsup {\isacharminus}{\kern0pt}\isactrlsup {\isadigit{1}}{\isasymlparr}{\isacharunderscore}{\kern0pt}{\isasymrparr}\isactrlbsub {\isacharunderscore}{\kern0pt}\isactrlesub {\isachardoublequoteclose}\ {\isacharbrackleft}{\kern0pt}{\isadigit{1}}{\isadigit{0}}{\isadigit{1}}{\isacharcomma}{\kern0pt}{\isadigit{0}}{\isacharcomma}{\kern0pt}{\isadigit{0}}{\isacharbrackright}{\kern0pt}{\isadigit{1}}{\isadigit{0}}{\isadigit{0}}{\isacharparenright}{\kern0pt}\ \isakeyword{where}\isanewline
\ \ {\isachardoublequoteopen}inverse{\isacharunderscore}{\kern0pt}image\ f\ B\ m\ {\isacharequal}{\kern0pt}\ {\isacharparenleft}{\kern0pt}SOME\ A{\isachardot}{\kern0pt}\ {\isasymexists}\ X\ Y\ k{\isachardot}{\kern0pt}\ f\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Y\ {\isasymand}\ m\ {\isacharcolon}{\kern0pt}\ B\ {\isasymrightarrow}\ Y\ {\isasymand}\ monomorphism\ m\ {\isasymand}\isanewline
\ \ \ \ equalizer\ A\ k\ {\isacharparenleft}{\kern0pt}f\ {\isasymcirc}\isactrlsub c\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}m\ {\isasymcirc}\isactrlsub c\ right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}is{\isacharunderscore}{\kern0pt}equalizer{\isacharcolon}{\kern0pt}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}m\ {\isacharcolon}{\kern0pt}\ B\ {\isasymrightarrow}\ Y{\isachardoublequoteclose}\ {\isachardoublequoteopen}f\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Y{\isachardoublequoteclose}\ {\isachardoublequoteopen}monomorphism\ m{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isasymexists}k{\isachardot}{\kern0pt}\ equalizer\ {\isacharparenleft}{\kern0pt}f\isactrlsup {\isacharminus}{\kern0pt}\isactrlsup {\isadigit{1}}{\isasymlparr}B{\isasymrparr}\isactrlbsub m\isactrlesub {\isacharparenright}{\kern0pt}\ k\ {\isacharparenleft}{\kern0pt}f\ {\isasymcirc}\isactrlsub c\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}m\ {\isasymcirc}\isactrlsub c\ right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}{\kern0pt}\isanewline
\ \ \isacommand{obtain}\isamarkupfalse%
\ A\ k\ \isakeyword{where}\ {\isachardoublequoteopen}equalizer\ A\ k\ {\isacharparenleft}{\kern0pt}f\ {\isasymcirc}\isactrlsub c\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}m\ {\isasymcirc}\isactrlsub c\ right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}meson\ assms{\isacharparenleft}{\kern0pt}{\isadigit{1}}{\isacharcomma}{\kern0pt}{\isadigit{2}}{\isacharparenright}{\kern0pt}\ comp{\isacharunderscore}{\kern0pt}type\ equalizer{\isacharunderscore}{\kern0pt}exists\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}type\ right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}type{\isacharparenright}{\kern0pt}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymexists}\ X\ Y\ k{\isachardot}{\kern0pt}\ f\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Y\ {\isasymand}\ m\ {\isacharcolon}{\kern0pt}\ B\ {\isasymrightarrow}\ Y\ {\isasymand}\ monomorphism\ m\ {\isasymand}\isanewline
\ \ \ \ equalizer\ {\isacharparenleft}{\kern0pt}inverse{\isacharunderscore}{\kern0pt}image\ f\ B\ m{\isacharparenright}{\kern0pt}\ k\ {\isacharparenleft}{\kern0pt}f\ {\isasymcirc}\isactrlsub c\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}m\ {\isasymcirc}\isactrlsub c\ right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{unfolding}\isamarkupfalse%
\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}def\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}rule{\isacharunderscore}{\kern0pt}tac\ someI{\isacharunderscore}{\kern0pt}ex{\isacharcomma}{\kern0pt}\ auto{\isacharcomma}{\kern0pt}\ rule{\isacharunderscore}{\kern0pt}tac\ x{\isacharequal}{\kern0pt}{\isachardoublequoteopen}A{\isachardoublequoteclose}\ \isakeyword{in}\ exI{\isacharcomma}{\kern0pt}\ rule{\isacharunderscore}{\kern0pt}tac\ x{\isacharequal}{\kern0pt}{\isachardoublequoteopen}X{\isachardoublequoteclose}\ \isakeyword{in}\ exI{\isacharcomma}{\kern0pt}\ rule{\isacharunderscore}{\kern0pt}tac\ x{\isacharequal}{\kern0pt}{\isachardoublequoteopen}Y{\isachardoublequoteclose}\ \isakeyword{in}\ exI{\isacharcomma}{\kern0pt}\ auto\ simp\ add{\isacharcolon}{\kern0pt}\ assms{\isacharparenright}{\kern0pt}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymexists}k{\isachardot}{\kern0pt}\ equalizer\ {\isacharparenleft}{\kern0pt}inverse{\isacharunderscore}{\kern0pt}image\ f\ B\ m{\isacharparenright}{\kern0pt}\ k\ {\isacharparenleft}{\kern0pt}f\ {\isasymcirc}\isactrlsub c\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}m\ {\isasymcirc}\isactrlsub c\ right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\kern0pt}{\isadigit{2}}{\isacharparenright}{\kern0pt}\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{definition}\isamarkupfalse%
\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ {\isacharcolon}{\kern0pt}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}cfunc\ {\isasymRightarrow}\ cset\ {\isasymRightarrow}\ cfunc\ {\isasymRightarrow}\ cfunc{\isachardoublequoteclose}\ \ \isakeyword{where}\isanewline
\ \ {\isachardoublequoteopen}inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ f\ B\ m\ {\isacharequal}{\kern0pt}\ {\isacharparenleft}{\kern0pt}SOME\ k{\isachardot}{\kern0pt}\ {\isasymexists}\ X\ Y{\isachardot}{\kern0pt}\ f\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Y\ {\isasymand}\ m\ {\isacharcolon}{\kern0pt}\ B\ {\isasymrightarrow}\ Y\ {\isasymand}\ monomorphism\ m\ {\isasymand}\isanewline
\ \ \ \ equalizer\ {\isacharparenleft}{\kern0pt}inverse{\isacharunderscore}{\kern0pt}image\ f\ B\ m{\isacharparenright}{\kern0pt}\ k\ {\isacharparenleft}{\kern0pt}f\ {\isasymcirc}\isactrlsub c\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}m\ {\isasymcirc}\isactrlsub c\ right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}is{\isacharunderscore}{\kern0pt}equalizer{\isadigit{2}}{\isacharcolon}{\kern0pt}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}m\ {\isacharcolon}{\kern0pt}\ B\ {\isasymrightarrow}\ Y{\isachardoublequoteclose}\ {\isachardoublequoteopen}f\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Y{\isachardoublequoteclose}\ {\isachardoublequoteopen}monomorphism\ m{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}equalizer\ {\isacharparenleft}{\kern0pt}inverse{\isacharunderscore}{\kern0pt}image\ f\ B\ m{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ f\ B\ m{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}f\ {\isasymcirc}\isactrlsub c\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}m\ {\isasymcirc}\isactrlsub c\ right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}{\kern0pt}\isanewline
\ \ \isacommand{obtain}\isamarkupfalse%
\ k\ \isakeyword{where}\ {\isachardoublequoteopen}equalizer\ {\isacharparenleft}{\kern0pt}inverse{\isacharunderscore}{\kern0pt}image\ f\ B\ m{\isacharparenright}{\kern0pt}\ k\ {\isacharparenleft}{\kern0pt}f\ {\isasymcirc}\isactrlsub c\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}m\ {\isasymcirc}\isactrlsub c\ right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}is{\isacharunderscore}{\kern0pt}equalizer\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymexists}\ X\ Y{\isachardot}{\kern0pt}\ f\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Y\ {\isasymand}\ m\ {\isacharcolon}{\kern0pt}\ B\ {\isasymrightarrow}\ Y\ {\isasymand}\ monomorphism\ m\ {\isasymand}\isanewline
\ \ \ \ equalizer\ {\isacharparenleft}{\kern0pt}inverse{\isacharunderscore}{\kern0pt}image\ f\ B\ m{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ f\ B\ m{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}f\ {\isasymcirc}\isactrlsub c\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}m\ {\isasymcirc}\isactrlsub c\ right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{unfolding}\isamarkupfalse%
\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping{\isacharunderscore}{\kern0pt}def\ \isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}rule{\isacharunderscore}{\kern0pt}tac\ someI{\isacharunderscore}{\kern0pt}ex{\isacharcomma}{\kern0pt}\ auto{\isacharparenright}{\kern0pt}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}equalizer\ {\isacharparenleft}{\kern0pt}inverse{\isacharunderscore}{\kern0pt}image\ f\ B\ m{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ f\ B\ m{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}f\ {\isasymcirc}\isactrlsub c\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}m\ {\isasymcirc}\isactrlsub c\ right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\kern0pt}{\isadigit{2}}{\isacharparenright}{\kern0pt}\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping{\isacharunderscore}{\kern0pt}type{\isacharbrackleft}{\kern0pt}type{\isacharunderscore}{\kern0pt}rule{\isacharbrackright}{\kern0pt}{\isacharcolon}{\kern0pt}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}m\ {\isacharcolon}{\kern0pt}\ B\ {\isasymrightarrow}\ Y{\isachardoublequoteclose}\ {\isachardoublequoteopen}f\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Y{\isachardoublequoteclose}\ {\isachardoublequoteopen}monomorphism\ m{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ f\ B\ m\ {\isacharcolon}{\kern0pt}\ {\isacharparenleft}{\kern0pt}inverse{\isacharunderscore}{\kern0pt}image\ f\ B\ m{\isacharparenright}{\kern0pt}\ {\isasymrightarrow}\ X\ {\isasymtimes}\isactrlsub c\ B{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ domain{\isacharunderscore}{\kern0pt}comp\ equalizer{\isacharunderscore}{\kern0pt}def\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}is{\isacharunderscore}{\kern0pt}equalizer{\isadigit{2}}\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}type\ \isacommand{by}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping{\isacharunderscore}{\kern0pt}eq{\isacharcolon}{\kern0pt}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}m\ {\isacharcolon}{\kern0pt}\ B\ {\isasymrightarrow}\ Y{\isachardoublequoteclose}\ {\isachardoublequoteopen}f\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Y{\isachardoublequoteclose}\ {\isachardoublequoteopen}monomorphism\ m{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}f\ {\isasymcirc}\isactrlsub c\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B\ {\isasymcirc}\isactrlsub c\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ f\ B\ m\isanewline
\ \ \ \ {\isacharequal}{\kern0pt}\ m\ {\isasymcirc}\isactrlsub c\ right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B\ {\isasymcirc}\isactrlsub c\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ f\ B\ m{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ comp{\isacharunderscore}{\kern0pt}associative\ equalizer{\isacharunderscore}{\kern0pt}def\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}is{\isacharunderscore}{\kern0pt}equalizer{\isadigit{2}}\isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharcomma}{\kern0pt}\ smt\ {\isacharparenleft}{\kern0pt}verit{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping{\isacharunderscore}{\kern0pt}monomorphism{\isacharcolon}{\kern0pt}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}m\ {\isacharcolon}{\kern0pt}\ B\ {\isasymrightarrow}\ Y{\isachardoublequoteclose}\ {\isachardoublequoteopen}f\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Y{\isachardoublequoteclose}\ {\isachardoublequoteopen}monomorphism\ m{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}monomorphism\ {\isacharparenleft}{\kern0pt}inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ f\ B\ m{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ equalizer{\isacharunderscore}{\kern0pt}is{\isacharunderscore}{\kern0pt}monomorphism\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}is{\isacharunderscore}{\kern0pt}equalizer{\isadigit{2}}\ \isacommand{by}\isamarkupfalse%
\ blast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\begin{isamarkuptext}%
The lemma below is the dual of Proposition 2.1.38 in Halvorson.%
\end{isamarkuptext}\isamarkuptrue%
\isacommand{lemma}\isamarkupfalse%
\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}monomorphism{\isacharcolon}{\kern0pt}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}m\ {\isacharcolon}{\kern0pt}\ B\ {\isasymrightarrow}\ Y{\isachardoublequoteclose}\ {\isachardoublequoteopen}f\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Y{\isachardoublequoteclose}\ {\isachardoublequoteopen}monomorphism\ m{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}monomorphism\ {\isacharparenleft}{\kern0pt}left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B\ {\isasymcirc}\isactrlsub c\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ f\ B\ m{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\isanewline
\isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharcomma}{\kern0pt}\ unfold\ monomorphism{\isacharunderscore}{\kern0pt}def{\isadigit{3}}{\isacharcomma}{\kern0pt}\ auto{\isacharparenright}{\kern0pt}\isanewline
\ \ \isacommand{fix}\isamarkupfalse%
\ g\ h\ A\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ g{\isacharunderscore}{\kern0pt}type{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}g\ {\isacharcolon}{\kern0pt}\ A\ {\isasymrightarrow}\ {\isacharparenleft}{\kern0pt}f\isactrlsup {\isacharminus}{\kern0pt}\isactrlsup {\isadigit{1}}{\isasymlparr}B{\isasymrparr}\isactrlbsub m\isactrlesub {\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ h{\isacharunderscore}{\kern0pt}type{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}h\ {\isacharcolon}{\kern0pt}\ A\ {\isasymrightarrow}\ {\isacharparenleft}{\kern0pt}f\isactrlsup {\isacharminus}{\kern0pt}\isactrlsup {\isadigit{1}}{\isasymlparr}B{\isasymrparr}\isactrlbsub m\isactrlesub {\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ left{\isacharunderscore}{\kern0pt}eq{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}{\isacharparenleft}{\kern0pt}left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B\ {\isasymcirc}\isactrlsub c\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ f\ B\ m{\isacharparenright}{\kern0pt}\ {\isasymcirc}\isactrlsub c\ g\isanewline
\ \ \ \ {\isacharequal}{\kern0pt}\ {\isacharparenleft}{\kern0pt}left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B\ {\isasymcirc}\isactrlsub c\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ f\ B\ m{\isacharparenright}{\kern0pt}\ {\isasymcirc}\isactrlsub c\ h{\isachardoublequoteclose}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}f\ {\isasymcirc}\isactrlsub c\ {\isacharparenleft}{\kern0pt}left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B\ {\isasymcirc}\isactrlsub c\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ f\ B\ m{\isacharparenright}{\kern0pt}\ {\isasymcirc}\isactrlsub c\ g\isanewline
\ \ \ \ {\isacharequal}{\kern0pt}\ f\ {\isasymcirc}\isactrlsub c\ {\isacharparenleft}{\kern0pt}left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B\ {\isasymcirc}\isactrlsub c\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ f\ B\ m{\isacharparenright}{\kern0pt}\ {\isasymcirc}\isactrlsub c\ h{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}m\ {\isasymcirc}\isactrlsub c\ {\isacharparenleft}{\kern0pt}right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B\ {\isasymcirc}\isactrlsub c\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ f\ B\ m{\isacharparenright}{\kern0pt}\ {\isasymcirc}\isactrlsub c\ g\isanewline
\ \ \ \ {\isacharequal}{\kern0pt}\ m\ {\isasymcirc}\isactrlsub c\ {\isacharparenleft}{\kern0pt}right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B\ {\isasymcirc}\isactrlsub c\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ f\ B\ m{\isacharparenright}{\kern0pt}\ {\isasymcirc}\isactrlsub c\ h{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ g{\isacharunderscore}{\kern0pt}type\ h{\isacharunderscore}{\kern0pt}type\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharcomma}{\kern0pt}\ smt\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ codomain{\isacharunderscore}{\kern0pt}comp\ comp{\isacharunderscore}{\kern0pt}associative\ domain{\isacharunderscore}{\kern0pt}comp\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping{\isacharunderscore}{\kern0pt}eq\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}type{\isacharparenright}{\kern0pt}\ \isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ right{\isacharunderscore}{\kern0pt}eq{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}{\isacharparenleft}{\kern0pt}right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B\ {\isasymcirc}\isactrlsub c\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ f\ B\ m{\isacharparenright}{\kern0pt}\ {\isasymcirc}\isactrlsub c\ g\isanewline
\ \ \ \ {\isacharequal}{\kern0pt}\ {\isacharparenleft}{\kern0pt}right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B\ {\isasymcirc}\isactrlsub c\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ f\ B\ m{\isacharparenright}{\kern0pt}\ {\isasymcirc}\isactrlsub c\ h{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ g{\isacharunderscore}{\kern0pt}type\ h{\isacharunderscore}{\kern0pt}type\ monomorphism{\isacharunderscore}{\kern0pt}def{\isadigit{3}}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharcomma}{\kern0pt}\ auto{\isacharparenright}{\kern0pt}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ f\ B\ m\ {\isasymcirc}\isactrlsub c\ g\ {\isacharequal}{\kern0pt}\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ f\ B\ m\ {\isasymcirc}\isactrlsub c\ h{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ g{\isacharunderscore}{\kern0pt}type\ h{\isacharunderscore}{\kern0pt}type\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ comp{\isacharunderscore}{\kern0pt}associative\ left{\isacharunderscore}{\kern0pt}eq\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}type\ right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}type\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharcomma}{\kern0pt}\ subst\ cart{\isacharunderscore}{\kern0pt}prod{\isacharunderscore}{\kern0pt}eq{\isacharcomma}{\kern0pt}\ auto{\isacharparenright}{\kern0pt}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}g\ {\isacharequal}{\kern0pt}\ h{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ g{\isacharunderscore}{\kern0pt}type\ h{\isacharunderscore}{\kern0pt}type\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping{\isacharunderscore}{\kern0pt}monomorphism\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping{\isacharunderscore}{\kern0pt}type\ monomorphism{\isacharunderscore}{\kern0pt}def{\isadigit{3}}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{definition}\isamarkupfalse%
\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}subobject{\isacharunderscore}{\kern0pt}mapping\ {\isacharcolon}{\kern0pt}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}cfunc\ {\isasymRightarrow}\ cset\ {\isasymRightarrow}\ cfunc\ {\isasymRightarrow}\ cfunc{\isachardoublequoteclose}\ {\isacharparenleft}{\kern0pt}{\isachardoublequoteopen}{\isacharbrackleft}{\kern0pt}{\isacharunderscore}{\kern0pt}\isactrlsup {\isacharminus}{\kern0pt}\isactrlsup {\isadigit{1}}{\isasymlparr}{\isacharunderscore}{\kern0pt}{\isasymrparr}\isactrlbsub {\isacharunderscore}{\kern0pt}\isactrlesub {\isacharbrackright}{\kern0pt}map{\isachardoublequoteclose}\ {\isacharbrackleft}{\kern0pt}{\isadigit{1}}{\isadigit{0}}{\isadigit{1}}{\isacharcomma}{\kern0pt}{\isadigit{0}}{\isacharcomma}{\kern0pt}{\isadigit{0}}{\isacharbrackright}{\kern0pt}{\isadigit{1}}{\isadigit{0}}{\isadigit{0}}{\isacharparenright}{\kern0pt}\ \isakeyword{where}\isanewline
\ \ {\isachardoublequoteopen}{\isacharbrackleft}{\kern0pt}f\isactrlsup {\isacharminus}{\kern0pt}\isactrlsup {\isadigit{1}}{\isasymlparr}B{\isasymrparr}\isactrlbsub m\isactrlesub {\isacharbrackright}{\kern0pt}map\ {\isacharequal}{\kern0pt}\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ {\isacharparenleft}{\kern0pt}domain\ f{\isacharparenright}{\kern0pt}\ B\ {\isasymcirc}\isactrlsub c\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ f\ B\ m{\isachardoublequoteclose}\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}subobject{\isacharunderscore}{\kern0pt}mapping{\isacharunderscore}{\kern0pt}def{\isadigit{2}}{\isacharcolon}{\kern0pt}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}f\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Y{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isacharbrackleft}{\kern0pt}f\isactrlsup {\isacharminus}{\kern0pt}\isactrlsup {\isadigit{1}}{\isasymlparr}B{\isasymrparr}\isactrlbsub m\isactrlesub {\isacharbrackright}{\kern0pt}map\ {\isacharequal}{\kern0pt}\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B\ {\isasymcirc}\isactrlsub c\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ f\ B\ m{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{unfolding}\isamarkupfalse%
\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}subobject{\isacharunderscore}{\kern0pt}mapping{\isacharunderscore}{\kern0pt}def\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ \isacommand{by}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}subobject{\isacharunderscore}{\kern0pt}mapping{\isacharunderscore}{\kern0pt}type{\isacharbrackleft}{\kern0pt}type{\isacharunderscore}{\kern0pt}rule{\isacharbrackright}{\kern0pt}{\isacharcolon}{\kern0pt}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}f\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Y{\isachardoublequoteclose}\ {\isachardoublequoteopen}m\ {\isacharcolon}{\kern0pt}\ B\ {\isasymrightarrow}\ Y{\isachardoublequoteclose}\ {\isachardoublequoteopen}monomorphism\ m{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isacharbrackleft}{\kern0pt}f\isactrlsup {\isacharminus}{\kern0pt}\isactrlsup {\isadigit{1}}{\isasymlparr}B{\isasymrparr}\isactrlbsub m\isactrlesub {\isacharbrackright}{\kern0pt}map\ {\isacharcolon}{\kern0pt}\ f\isactrlsup {\isacharminus}{\kern0pt}\isactrlsup {\isadigit{1}}{\isasymlparr}B{\isasymrparr}\isactrlbsub m\isactrlesub \ {\isasymrightarrow}\ X{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}unfold\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}subobject{\isacharunderscore}{\kern0pt}mapping{\isacharunderscore}{\kern0pt}def{\isadigit{2}}{\isacharcomma}{\kern0pt}\ typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharparenright}{\kern0pt}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}subobject{\isacharunderscore}{\kern0pt}mapping{\isacharunderscore}{\kern0pt}mono{\isacharcolon}{\kern0pt}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}f\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Y{\isachardoublequoteclose}\ {\isachardoublequoteopen}m\ {\isacharcolon}{\kern0pt}\ B\ {\isasymrightarrow}\ Y{\isachardoublequoteclose}\ {\isachardoublequoteopen}monomorphism\ m{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}monomorphism\ {\isacharparenleft}{\kern0pt}{\isacharbrackleft}{\kern0pt}f\isactrlsup {\isacharminus}{\kern0pt}\isactrlsup {\isadigit{1}}{\isasymlparr}B{\isasymrparr}\isactrlbsub m\isactrlesub {\isacharbrackright}{\kern0pt}map{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}monomorphism\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}subobject{\isacharunderscore}{\kern0pt}mapping{\isacharunderscore}{\kern0pt}def\ \isacommand{by}\isamarkupfalse%
\ fastforce%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}subobject{\isacharcolon}{\kern0pt}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}m\ {\isacharcolon}{\kern0pt}\ B\ {\isasymrightarrow}\ Y{\isachardoublequoteclose}\ {\isachardoublequoteopen}f\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Y{\isachardoublequoteclose}\ {\isachardoublequoteopen}monomorphism\ m{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isacharparenleft}{\kern0pt}f\isactrlsup {\isacharminus}{\kern0pt}\isactrlsup {\isadigit{1}}{\isasymlparr}B{\isasymrparr}\isactrlbsub m\isactrlesub {\isacharcomma}{\kern0pt}\ {\isacharbrackleft}{\kern0pt}f\isactrlsup {\isacharminus}{\kern0pt}\isactrlsup {\isadigit{1}}{\isasymlparr}B{\isasymrparr}\isactrlbsub m\isactrlesub {\isacharbrackright}{\kern0pt}map{\isacharparenright}{\kern0pt}\ {\isasymsubseteq}\isactrlsub c\ X{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{unfolding}\isamarkupfalse%
\ subobject{\isacharunderscore}{\kern0pt}of{\isacharunderscore}{\kern0pt}def{\isadigit{2}}\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ assms\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}subobject{\isacharunderscore}{\kern0pt}mapping{\isacharunderscore}{\kern0pt}mono\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}subobject{\isacharunderscore}{\kern0pt}mapping{\isacharunderscore}{\kern0pt}type\isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ force%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}pullback{\isacharcolon}{\kern0pt}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}m\ {\isacharcolon}{\kern0pt}\ B\ {\isasymrightarrow}\ Y{\isachardoublequoteclose}\ {\isachardoublequoteopen}f\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Y{\isachardoublequoteclose}\ {\isachardoublequoteopen}monomorphism\ m{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}is{\isacharunderscore}{\kern0pt}pullback\ {\isacharparenleft}{\kern0pt}f\isactrlsup {\isacharminus}{\kern0pt}\isactrlsup {\isadigit{1}}{\isasymlparr}B{\isasymrparr}\isactrlbsub m\isactrlesub {\isacharparenright}{\kern0pt}\ B\ X\ Y\ \isanewline
\ \ \ \ {\isacharparenleft}{\kern0pt}right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B\ {\isasymcirc}\isactrlsub c\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ f\ B\ m{\isacharparenright}{\kern0pt}\ m\isanewline
\ \ \ \ {\isacharparenleft}{\kern0pt}left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B\ {\isasymcirc}\isactrlsub c\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ f\ B\ m{\isacharparenright}{\kern0pt}\ f{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{unfolding}\isamarkupfalse%
\ is{\isacharunderscore}{\kern0pt}pullback{\isacharunderscore}{\kern0pt}def\ \isacommand{using}\isamarkupfalse%
\ assms\isanewline
\isacommand{proof}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ right{\isacharunderscore}{\kern0pt}type{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B\ {\isasymcirc}\isactrlsub c\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ f\ B\ m\ {\isacharcolon}{\kern0pt}\ f\isactrlsup {\isacharminus}{\kern0pt}\isactrlsup {\isadigit{1}}{\isasymlparr}B{\isasymrparr}\isactrlbsub m\isactrlesub \ {\isasymrightarrow}\ B{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ codomain{\isacharunderscore}{\kern0pt}comp\ domain{\isacharunderscore}{\kern0pt}comp\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping{\isacharunderscore}{\kern0pt}type\isanewline
\ \ \ \ \ \ right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}type\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ left{\isacharunderscore}{\kern0pt}type{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B\ {\isasymcirc}\isactrlsub c\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ f\ B\ m\ {\isacharcolon}{\kern0pt}\ f\isactrlsup {\isacharminus}{\kern0pt}\isactrlsup {\isadigit{1}}{\isasymlparr}B{\isasymrparr}\isactrlbsub m\isactrlesub \ {\isasymrightarrow}\ X{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ fst{\isacharunderscore}{\kern0pt}conv\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}subobject\ subobject{\isacharunderscore}{\kern0pt}of{\isacharunderscore}{\kern0pt}def\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharparenright}{\kern0pt}\isanewline
\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}m\ {\isasymcirc}\isactrlsub c\ right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B\ {\isasymcirc}\isactrlsub c\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ f\ B\ m\ {\isacharequal}{\kern0pt}\isanewline
\ \ \ \ \ \ f\ {\isasymcirc}\isactrlsub c\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B\ {\isasymcirc}\isactrlsub c\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ f\ B\ m{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping{\isacharunderscore}{\kern0pt}eq\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\ \ \isacommand{fix}\isamarkupfalse%
\ Z\ k\ h\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ k{\isacharunderscore}{\kern0pt}type{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}k\ {\isacharcolon}{\kern0pt}\ Z\ {\isasymrightarrow}\ B{\isachardoublequoteclose}\ \isakeyword{and}\ h{\isacharunderscore}{\kern0pt}type{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}h\ {\isacharcolon}{\kern0pt}\ Z\ {\isasymrightarrow}\ X{\isachardoublequoteclose}\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ mk{\isacharunderscore}{\kern0pt}eq{\isacharunderscore}{\kern0pt}fh{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}m\ {\isasymcirc}\isactrlsub c\ k\ {\isacharequal}{\kern0pt}\ f\ {\isasymcirc}\isactrlsub c\ h{\isachardoublequoteclose}\isanewline
\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}equalizer\ {\isacharparenleft}{\kern0pt}f\isactrlsup {\isacharminus}{\kern0pt}\isactrlsup {\isadigit{1}}{\isasymlparr}B{\isasymrparr}\isactrlbsub m\isactrlesub {\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ f\ B\ m{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}f\ {\isasymcirc}\isactrlsub c\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}m\ {\isasymcirc}\isactrlsub c\ right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B\ {\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}is{\isacharunderscore}{\kern0pt}equalizer{\isadigit{2}}\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymforall}h\ F{\isachardot}{\kern0pt}\ h\ {\isacharcolon}{\kern0pt}\ F\ {\isasymrightarrow}\ {\isacharparenleft}{\kern0pt}X\ {\isasymtimes}\isactrlsub c\ B{\isacharparenright}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ {\isasymand}\ {\isacharparenleft}{\kern0pt}f\ {\isasymcirc}\isactrlsub c\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B{\isacharparenright}{\kern0pt}\ {\isasymcirc}\isactrlsub c\ h\ {\isacharequal}{\kern0pt}\ {\isacharparenleft}{\kern0pt}m\ {\isasymcirc}\isactrlsub c\ right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B{\isacharparenright}{\kern0pt}\ {\isasymcirc}\isactrlsub c\ h\ {\isasymlongrightarrow}\isanewline
\ \ \ \ \ \ \ \ \ \ {\isacharparenleft}{\kern0pt}{\isasymexists}{\isacharbang}{\kern0pt}u{\isachardot}{\kern0pt}\ u\ {\isacharcolon}{\kern0pt}\ F\ {\isasymrightarrow}\ {\isacharparenleft}{\kern0pt}f\isactrlsup {\isacharminus}{\kern0pt}\isactrlsup {\isadigit{1}}{\isasymlparr}B{\isasymrparr}\isactrlbsub m\isactrlesub {\isacharparenright}{\kern0pt}\ {\isasymand}\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ f\ B\ m\ {\isasymcirc}\isactrlsub c\ u\ {\isacharequal}{\kern0pt}\ h{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{unfolding}\isamarkupfalse%
\ equalizer{\isacharunderscore}{\kern0pt}def\ \isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\kern0pt}{\isadigit{2}}{\isacharparenright}{\kern0pt}\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ domain{\isacharunderscore}{\kern0pt}comp\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}type\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymlangle}h{\isacharcomma}{\kern0pt}k{\isasymrangle}\ {\isacharcolon}{\kern0pt}\ Z\ {\isasymrightarrow}\ X\ {\isasymtimes}\isactrlsub c\ B\ \ {\isasymLongrightarrow}\isanewline
\ \ \ \ \ \ {\isacharparenleft}{\kern0pt}f\ {\isasymcirc}\isactrlsub c\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B{\isacharparenright}{\kern0pt}\ {\isasymcirc}\isactrlsub c\ {\isasymlangle}h{\isacharcomma}{\kern0pt}k{\isasymrangle}\ {\isacharequal}{\kern0pt}\ {\isacharparenleft}{\kern0pt}m\ {\isasymcirc}\isactrlsub c\ right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B{\isacharparenright}{\kern0pt}\ {\isasymcirc}\isactrlsub c\ {\isasymlangle}h{\isacharcomma}{\kern0pt}k{\isasymrangle}\ {\isasymLongrightarrow}\isanewline
\ \ \ \ \ \ {\isacharparenleft}{\kern0pt}{\isasymexists}{\isacharbang}{\kern0pt}u{\isachardot}{\kern0pt}\ u\ {\isacharcolon}{\kern0pt}\ Z\ {\isasymrightarrow}\ {\isacharparenleft}{\kern0pt}f\isactrlsup {\isacharminus}{\kern0pt}\isactrlsup {\isadigit{1}}{\isasymlparr}B{\isasymrparr}\isactrlbsub m\isactrlesub {\isacharparenright}{\kern0pt}\ {\isasymand}\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ f\ B\ m\ {\isasymcirc}\isactrlsub c\ u\ {\isacharequal}{\kern0pt}\ {\isasymlangle}h{\isacharcomma}{\kern0pt}k{\isasymrangle}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}erule{\isacharunderscore}{\kern0pt}tac\ x{\isacharequal}{\kern0pt}{\isachardoublequoteopen}{\isasymlangle}h{\isacharcomma}{\kern0pt}k{\isasymrangle}{\isachardoublequoteclose}\ \isakeyword{in}\ allE{\isacharcomma}{\kern0pt}\ erule{\isacharunderscore}{\kern0pt}tac\ x{\isacharequal}{\kern0pt}Z\ \isakeyword{in}\ allE{\isacharcomma}{\kern0pt}\ auto{\isacharparenright}{\kern0pt}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymexists}{\isacharbang}{\kern0pt}u{\isachardot}{\kern0pt}\ u\ {\isacharcolon}{\kern0pt}\ Z\ {\isasymrightarrow}\ {\isacharparenleft}{\kern0pt}f\isactrlsup {\isacharminus}{\kern0pt}\isactrlsup {\isadigit{1}}{\isasymlparr}B{\isasymrparr}\isactrlbsub m\isactrlesub {\isacharparenright}{\kern0pt}\ {\isasymand}\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ f\ B\ m\ {\isasymcirc}\isactrlsub c\ u\ {\isacharequal}{\kern0pt}\ {\isasymlangle}h{\isacharcomma}{\kern0pt}k{\isasymrangle}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ k{\isacharunderscore}{\kern0pt}type\ h{\isacharunderscore}{\kern0pt}type\ assms\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharcomma}{\kern0pt}\ smt\ comp{\isacharunderscore}{\kern0pt}associative{\isadigit{2}}\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}cfunc{\isacharunderscore}{\kern0pt}prod\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}type\isanewline
\ \ \ \ \ \ \ \ mk{\isacharunderscore}{\kern0pt}eq{\isacharunderscore}{\kern0pt}fh\ right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}cfunc{\isacharunderscore}{\kern0pt}prod\ right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}type{\isacharparenright}{\kern0pt}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymexists}j{\isachardot}{\kern0pt}\ j\ {\isacharcolon}{\kern0pt}\ Z\ {\isasymrightarrow}\ {\isacharparenleft}{\kern0pt}f\isactrlsup {\isacharminus}{\kern0pt}\isactrlsup {\isadigit{1}}{\isasymlparr}B{\isasymrparr}\isactrlbsub m\isactrlesub {\isacharparenright}{\kern0pt}\ {\isasymand}\isanewline
\ \ \ \ \ \ \ \ \ {\isacharparenleft}{\kern0pt}right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B\ {\isasymcirc}\isactrlsub c\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ f\ B\ m{\isacharparenright}{\kern0pt}\ {\isasymcirc}\isactrlsub c\ j\ {\isacharequal}{\kern0pt}\ k\ {\isasymand}\isanewline
\ \ \ \ \ \ \ \ \ {\isacharparenleft}{\kern0pt}left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B\ {\isasymcirc}\isactrlsub c\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ f\ B\ m{\isacharparenright}{\kern0pt}\ {\isasymcirc}\isactrlsub c\ j\ {\isacharequal}{\kern0pt}\ h{\isachardoublequoteclose}\isanewline
\ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}insert\ k{\isacharunderscore}{\kern0pt}type\ h{\isacharunderscore}{\kern0pt}type\ assms{\isacharcomma}{\kern0pt}\ typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharcomma}{\kern0pt}\ safe{\isacharcomma}{\kern0pt}\ rule{\isacharunderscore}{\kern0pt}tac\ x{\isacharequal}{\kern0pt}u\ \isakeyword{in}\ exI{\isacharcomma}{\kern0pt}\ safe{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \isacommand{fix}\isamarkupfalse%
\ u\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ u{\isacharunderscore}{\kern0pt}type{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}u\ {\isacharcolon}{\kern0pt}\ Z\ {\isasymrightarrow}\ {\isacharparenleft}{\kern0pt}f\isactrlsup {\isacharminus}{\kern0pt}\isactrlsup {\isadigit{1}}{\isasymlparr}B{\isasymrparr}\isactrlbsub m\isactrlesub {\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ u{\isacharunderscore}{\kern0pt}eq{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ f\ B\ m\ {\isasymcirc}\isactrlsub c\ u\ {\isacharequal}{\kern0pt}\ {\isasymlangle}h{\isacharcomma}{\kern0pt}k{\isasymrangle}{\isachardoublequoteclose}\isanewline
\isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharparenleft}{\kern0pt}right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B\ {\isasymcirc}\isactrlsub c\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ f\ B\ m{\isacharparenright}{\kern0pt}\ {\isasymcirc}\isactrlsub c\ u\ {\isacharequal}{\kern0pt}\ k{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ u{\isacharunderscore}{\kern0pt}type\ h{\isacharunderscore}{\kern0pt}type\ k{\isacharunderscore}{\kern0pt}type\ u{\isacharunderscore}{\kern0pt}eq\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharcomma}{\kern0pt}\ metis\ {\isacharparenleft}{\kern0pt}full{\isacharunderscore}{\kern0pt}types{\isacharparenright}{\kern0pt}\ comp{\isacharunderscore}{\kern0pt}associative{\isadigit{2}}\ right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}cfunc{\isacharunderscore}{\kern0pt}prod{\isacharparenright}{\kern0pt}\isanewline
\isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharparenleft}{\kern0pt}left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B\ {\isasymcirc}\isactrlsub c\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ f\ B\ m{\isacharparenright}{\kern0pt}\ {\isasymcirc}\isactrlsub c\ u\ {\isacharequal}{\kern0pt}\ h{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ u{\isacharunderscore}{\kern0pt}type\ h{\isacharunderscore}{\kern0pt}type\ k{\isacharunderscore}{\kern0pt}type\ u{\isacharunderscore}{\kern0pt}eq\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharcomma}{\kern0pt}\ metis\ {\isacharparenleft}{\kern0pt}full{\isacharunderscore}{\kern0pt}types{\isacharparenright}{\kern0pt}\ comp{\isacharunderscore}{\kern0pt}associative{\isadigit{2}}\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}cfunc{\isacharunderscore}{\kern0pt}prod{\isacharparenright}{\kern0pt}\isanewline
\ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\ \ \isacommand{fix}\isamarkupfalse%
\ Z\ j\ y\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ j{\isacharunderscore}{\kern0pt}type{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}j\ {\isacharcolon}{\kern0pt}\ Z\ {\isasymrightarrow}\ {\isacharparenleft}{\kern0pt}f\isactrlsup {\isacharminus}{\kern0pt}\isactrlsup {\isadigit{1}}{\isasymlparr}B{\isasymrparr}\isactrlbsub m\isactrlesub {\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ y{\isacharunderscore}{\kern0pt}type{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}y\ {\isacharcolon}{\kern0pt}\ Z\ {\isasymrightarrow}\ {\isacharparenleft}{\kern0pt}f\isactrlsup {\isacharminus}{\kern0pt}\isactrlsup {\isadigit{1}}{\isasymlparr}B{\isasymrparr}\isactrlbsub m\isactrlesub {\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharparenleft}{\kern0pt}left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B\ {\isasymcirc}\isactrlsub c\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ f\ B\ m{\isacharparenright}{\kern0pt}\ {\isasymcirc}\isactrlsub c\ y\ {\isacharequal}{\kern0pt}\isanewline
\ \ \ \ \ \ \ {\isacharparenleft}{\kern0pt}left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B\ {\isasymcirc}\isactrlsub c\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ f\ B\ m{\isacharparenright}{\kern0pt}\ {\isasymcirc}\isactrlsub c\ j{\isachardoublequoteclose}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}j\ {\isacharequal}{\kern0pt}\ y{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ j{\isacharunderscore}{\kern0pt}type\ y{\isacharunderscore}{\kern0pt}type\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping{\isacharunderscore}{\kern0pt}type\ comp{\isacharunderscore}{\kern0pt}type\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}smt\ {\isacharparenleft}{\kern0pt}verit{\isacharcomma}{\kern0pt}\ ccfv{\isacharunderscore}{\kern0pt}threshold{\isacharparenright}{\kern0pt}\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}monomorphism\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}type\ monomorphism{\isacharunderscore}{\kern0pt}def{\isadigit{3}}{\isacharparenright}{\kern0pt}\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\begin{isamarkuptext}%
The lemma below corresponds to Proposition 2.1.41 in Halvorson.%
\end{isamarkuptext}\isamarkuptrue%
\isacommand{lemma}\isamarkupfalse%
\ in{\isacharunderscore}{\kern0pt}inverse{\isacharunderscore}{\kern0pt}image{\isacharcolon}{\kern0pt}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}f\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Y{\isachardoublequoteclose}\ {\isachardoublequoteopen}{\isacharparenleft}{\kern0pt}B{\isacharcomma}{\kern0pt}m{\isacharparenright}{\kern0pt}\ {\isasymsubseteq}\isactrlsub c\ Y{\isachardoublequoteclose}\ {\isachardoublequoteopen}x\ {\isasymin}\isactrlsub c\ X{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isacharparenleft}{\kern0pt}x\ {\isasymin}\isactrlbsub X\isactrlesub \ {\isacharparenleft}{\kern0pt}f\isactrlsup {\isacharminus}{\kern0pt}\isactrlsup {\isadigit{1}}{\isasymlparr}B{\isasymrparr}\isactrlbsub m\isactrlesub {\isacharcomma}{\kern0pt}\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B\ {\isasymcirc}\isactrlsub c\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ f\ B\ m{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}\ {\isacharequal}{\kern0pt}\ {\isacharparenleft}{\kern0pt}f\ {\isasymcirc}\isactrlsub c\ x\ {\isasymin}\isactrlbsub Y\isactrlesub \ {\isacharparenleft}{\kern0pt}B{\isacharcomma}{\kern0pt}m{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ m{\isacharunderscore}{\kern0pt}type{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}m\ {\isacharcolon}{\kern0pt}\ B\ {\isasymrightarrow}\ Y{\isachardoublequoteclose}\ {\isachardoublequoteopen}monomorphism\ m{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\kern0pt}{\isadigit{2}}{\isacharparenright}{\kern0pt}\ \isacommand{unfolding}\isamarkupfalse%
\ subobject{\isacharunderscore}{\kern0pt}of{\isacharunderscore}{\kern0pt}def{\isadigit{2}}\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}x\ {\isasymin}\isactrlbsub X\isactrlesub \ {\isacharparenleft}{\kern0pt}f\isactrlsup {\isacharminus}{\kern0pt}\isactrlsup {\isadigit{1}}{\isasymlparr}B{\isasymrparr}\isactrlbsub m\isactrlesub {\isacharcomma}{\kern0pt}\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B\ {\isasymcirc}\isactrlsub c\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ f\ B\ m{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{obtain}\isamarkupfalse%
\ h\ \isakeyword{where}\ h{\isacharunderscore}{\kern0pt}type{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}h\ {\isasymin}\isactrlsub c\ {\isacharparenleft}{\kern0pt}f\isactrlsup {\isacharminus}{\kern0pt}\isactrlsup {\isadigit{1}}{\isasymlparr}B{\isasymrparr}\isactrlbsub m\isactrlesub {\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isakeyword{and}\ h{\isacharunderscore}{\kern0pt}def{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}{\isacharparenleft}{\kern0pt}left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B\ {\isasymcirc}\isactrlsub c\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ f\ B\ m{\isacharparenright}{\kern0pt}\ {\isasymcirc}\isactrlsub c\ h\ {\isacharequal}{\kern0pt}\ x{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{unfolding}\isamarkupfalse%
\ relative{\isacharunderscore}{\kern0pt}member{\isacharunderscore}{\kern0pt}def{\isadigit{2}}\ factors{\isacharunderscore}{\kern0pt}through{\isacharunderscore}{\kern0pt}def\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}auto\ simp\ add{\isacharcolon}{\kern0pt}\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def{\isacharparenright}{\kern0pt}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}f\ {\isasymcirc}\isactrlsub c\ x\ {\isacharequal}{\kern0pt}\ f\ {\isasymcirc}\isactrlsub c\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B\ {\isasymcirc}\isactrlsub c\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ f\ B\ m\ {\isasymcirc}\isactrlsub c\ h{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ m{\isacharunderscore}{\kern0pt}type\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharcomma}{\kern0pt}\ simp\ add{\isacharcolon}{\kern0pt}\ comp{\isacharunderscore}{\kern0pt}associative{\isadigit{2}}\ h{\isacharunderscore}{\kern0pt}def{\isacharparenright}{\kern0pt}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}f\ {\isasymcirc}\isactrlsub c\ x\ {\isacharequal}{\kern0pt}\ {\isacharparenleft}{\kern0pt}f\ {\isasymcirc}\isactrlsub c\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B\ {\isasymcirc}\isactrlsub c\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ f\ B\ m{\isacharparenright}{\kern0pt}\ {\isasymcirc}\isactrlsub c\ h{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ m{\isacharunderscore}{\kern0pt}type\ h{\isacharunderscore}{\kern0pt}type\ h{\isacharunderscore}{\kern0pt}def\ comp{\isacharunderscore}{\kern0pt}associative{\isadigit{2}}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharcomma}{\kern0pt}\ blast{\isacharparenright}{\kern0pt}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}f\ {\isasymcirc}\isactrlsub c\ x\ {\isacharequal}{\kern0pt}\ {\isacharparenleft}{\kern0pt}m\ {\isasymcirc}\isactrlsub c\ right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B\ {\isasymcirc}\isactrlsub c\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ f\ B\ m{\isacharparenright}{\kern0pt}\ {\isasymcirc}\isactrlsub c\ h{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ h{\isacharunderscore}{\kern0pt}type\ m{\isacharunderscore}{\kern0pt}type\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharcomma}{\kern0pt}\ simp\ add{\isacharcolon}{\kern0pt}\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping{\isacharunderscore}{\kern0pt}eq\ m{\isacharunderscore}{\kern0pt}type{\isacharparenright}{\kern0pt}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}f\ {\isasymcirc}\isactrlsub c\ x\ {\isacharequal}{\kern0pt}\ m\ {\isasymcirc}\isactrlsub c\ right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B\ {\isasymcirc}\isactrlsub c\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ f\ B\ m\ {\isasymcirc}\isactrlsub c\ h{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ m{\isacharunderscore}{\kern0pt}type\ h{\isacharunderscore}{\kern0pt}type\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharcomma}{\kern0pt}\ smt\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ comp{\isacharunderscore}{\kern0pt}associative\ domain{\isacharunderscore}{\kern0pt}comp{\isacharparenright}{\kern0pt}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharparenleft}{\kern0pt}f\ {\isasymcirc}\isactrlsub c\ x{\isacharparenright}{\kern0pt}\ factorsthru\ m{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{unfolding}\isamarkupfalse%
\ factors{\isacharunderscore}{\kern0pt}through{\isacharunderscore}{\kern0pt}def\ \isacommand{using}\isamarkupfalse%
\ assms\ h{\isacharunderscore}{\kern0pt}type\ m{\isacharunderscore}{\kern0pt}type\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}rule{\isacharunderscore}{\kern0pt}tac\ x{\isacharequal}{\kern0pt}{\isachardoublequoteopen}right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B\ {\isasymcirc}\isactrlsub c\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ f\ B\ m\ {\isasymcirc}\isactrlsub c\ h{\isachardoublequoteclose}\ \isakeyword{in}\ exI{\isacharcomma}{\kern0pt}\isanewline
\ \ \ \ \ \ \ \ typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharcomma}{\kern0pt}\ auto\ simp\ add{\isacharcolon}{\kern0pt}\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def{\isacharparenright}{\kern0pt}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}f\ {\isasymcirc}\isactrlsub c\ x\ {\isasymin}\isactrlbsub Y\isactrlesub \ {\isacharparenleft}{\kern0pt}B{\isacharcomma}{\kern0pt}\ m{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{unfolding}\isamarkupfalse%
\ relative{\isacharunderscore}{\kern0pt}member{\isacharunderscore}{\kern0pt}def{\isadigit{2}}\ \isacommand{using}\isamarkupfalse%
\ assms\ m{\isacharunderscore}{\kern0pt}type\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharcomma}{\kern0pt}\ auto{\isacharparenright}{\kern0pt}\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ m{\isacharunderscore}{\kern0pt}type{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}m\ {\isacharcolon}{\kern0pt}\ B\ {\isasymrightarrow}\ Y{\isachardoublequoteclose}\ {\isachardoublequoteopen}monomorphism\ m{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\kern0pt}{\isadigit{2}}{\isacharparenright}{\kern0pt}\ \isacommand{unfolding}\isamarkupfalse%
\ subobject{\isacharunderscore}{\kern0pt}of{\isacharunderscore}{\kern0pt}def{\isadigit{2}}\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}f\ {\isasymcirc}\isactrlsub c\ x\ {\isasymin}\isactrlbsub Y\isactrlesub \ {\isacharparenleft}{\kern0pt}B{\isacharcomma}{\kern0pt}\ m{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymexists}h{\isachardot}{\kern0pt}\ h\ {\isacharcolon}{\kern0pt}\ domain\ {\isacharparenleft}{\kern0pt}f\ {\isasymcirc}\isactrlsub c\ x{\isacharparenright}{\kern0pt}\ {\isasymrightarrow}\ domain\ m\ {\isasymand}\ m\ {\isasymcirc}\isactrlsub c\ h\ {\isacharequal}{\kern0pt}\ f\ {\isasymcirc}\isactrlsub c\ x{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{unfolding}\isamarkupfalse%
\ relative{\isacharunderscore}{\kern0pt}member{\isacharunderscore}{\kern0pt}def{\isadigit{2}}\ factors{\isacharunderscore}{\kern0pt}through{\isacharunderscore}{\kern0pt}def\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{obtain}\isamarkupfalse%
\ h\ \isakeyword{where}\ h{\isacharunderscore}{\kern0pt}type{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}h\ {\isasymin}\isactrlsub c\ B{\isachardoublequoteclose}\ \isakeyword{and}\ h{\isacharunderscore}{\kern0pt}def{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}m\ {\isasymcirc}\isactrlsub c\ h\ {\isacharequal}{\kern0pt}\ f\ {\isasymcirc}\isactrlsub c\ x{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{unfolding}\isamarkupfalse%
\ relative{\isacharunderscore}{\kern0pt}member{\isacharunderscore}{\kern0pt}def{\isadigit{2}}\ factors{\isacharunderscore}{\kern0pt}through{\isacharunderscore}{\kern0pt}def\ \isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ domain{\isacharunderscore}{\kern0pt}comp\ m{\isacharunderscore}{\kern0pt}type\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymexists}j{\isachardot}{\kern0pt}\ j\ {\isasymin}\isactrlsub c\ {\isacharparenleft}{\kern0pt}f\isactrlsup {\isacharminus}{\kern0pt}\isactrlsup {\isadigit{1}}{\isasymlparr}B{\isasymrparr}\isactrlbsub m\isactrlesub {\isacharparenright}{\kern0pt}\ {\isasymand}\isanewline
\ \ \ \ \ \ \ \ \ {\isacharparenleft}{\kern0pt}right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B\ {\isasymcirc}\isactrlsub c\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ f\ B\ m{\isacharparenright}{\kern0pt}\ {\isasymcirc}\isactrlsub c\ j\ {\isacharequal}{\kern0pt}\ h\ {\isasymand}\isanewline
\ \ \ \ \ \ \ \ \ {\isacharparenleft}{\kern0pt}left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B\ {\isasymcirc}\isactrlsub c\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ f\ B\ m{\isacharparenright}{\kern0pt}\ {\isasymcirc}\isactrlsub c\ j\ {\isacharequal}{\kern0pt}\ x{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}pullback\ assms\ m{\isacharunderscore}{\kern0pt}type\ \isacommand{unfolding}\isamarkupfalse%
\ is{\isacharunderscore}{\kern0pt}pullback{\isacharunderscore}{\kern0pt}def\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}x\ factorsthru\ {\isacharparenleft}{\kern0pt}left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B\ {\isasymcirc}\isactrlsub c\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ f\ B\ m{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ m{\isacharunderscore}{\kern0pt}type\ assms\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharcomma}{\kern0pt}\ unfold\ factors{\isacharunderscore}{\kern0pt}through{\isacharunderscore}{\kern0pt}def{\isacharcomma}{\kern0pt}\ auto{\isacharparenright}{\kern0pt}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}x\ {\isasymin}\isactrlbsub X\isactrlesub \ {\isacharparenleft}{\kern0pt}f\isactrlsup {\isacharminus}{\kern0pt}\isactrlsup {\isadigit{1}}{\isasymlparr}B{\isasymrparr}\isactrlbsub m\isactrlesub {\isacharcomma}{\kern0pt}\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B\ {\isasymcirc}\isactrlsub c\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ f\ B\ m{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{unfolding}\isamarkupfalse%
\ relative{\isacharunderscore}{\kern0pt}member{\isacharunderscore}{\kern0pt}def{\isadigit{2}}\ \isacommand{using}\isamarkupfalse%
\ m{\isacharunderscore}{\kern0pt}type\ assms\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharcomma}{\kern0pt}\ simp\ add{\isacharcolon}{\kern0pt}\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}monomorphism{\isacharparenright}{\kern0pt}\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\isadelimdocument
%
\endisadelimdocument
%
\isatagdocument
%
\isamarkupsection{Fibered Products%
}
\isamarkuptrue%
%
\endisatagdocument
{\isafolddocument}%
%
\isadelimdocument
%
\endisadelimdocument
%
\begin{isamarkuptext}%
The definition below corresponds to Definition 2.1.42 in Halvorson.%
\end{isamarkuptext}\isamarkuptrue%
\isacommand{definition}\isamarkupfalse%
\ fibered{\isacharunderscore}{\kern0pt}product\ {\isacharcolon}{\kern0pt}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}cset\ {\isasymRightarrow}\ cfunc\ {\isasymRightarrow}\ cfunc\ {\isasymRightarrow}\ cset\ {\isasymRightarrow}\ cset{\isachardoublequoteclose}\ {\isacharparenleft}{\kern0pt}{\isachardoublequoteopen}{\isacharunderscore}{\kern0pt}\ \isactrlbsub {\isacharunderscore}{\kern0pt}\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub {\isacharunderscore}{\kern0pt}\isactrlesub \ {\isacharunderscore}{\kern0pt}{\isachardoublequoteclose}\ {\isacharbrackleft}{\kern0pt}{\isadigit{6}}{\isadigit{6}}{\isacharcomma}{\kern0pt}{\isadigit{5}}{\isadigit{0}}{\isacharcomma}{\kern0pt}{\isadigit{5}}{\isadigit{0}}{\isacharcomma}{\kern0pt}{\isadigit{6}}{\isadigit{5}}{\isacharbrackright}{\kern0pt}{\isadigit{6}}{\isadigit{5}}{\isacharparenright}{\kern0pt}\ \isakeyword{where}\isanewline
\ \ {\isachardoublequoteopen}X\ \isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub g\isactrlesub \ Y\ {\isacharequal}{\kern0pt}\ {\isacharparenleft}{\kern0pt}SOME\ E{\isachardot}{\kern0pt}\ {\isasymexists}\ Z\ m{\isachardot}{\kern0pt}\ f\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Z\ {\isasymand}\ g\ {\isacharcolon}{\kern0pt}\ Y\ {\isasymrightarrow}\ Z\ {\isasymand}\isanewline
\ \ \ \ equalizer\ E\ m\ {\isacharparenleft}{\kern0pt}f\ {\isasymcirc}\isactrlsub c\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ Y{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}g\ {\isasymcirc}\isactrlsub c\ right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ Y{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}equalizer{\isacharcolon}{\kern0pt}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}f\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Z{\isachardoublequoteclose}\ {\isachardoublequoteopen}g\ {\isacharcolon}{\kern0pt}\ Y\ {\isasymrightarrow}\ Z{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isasymexists}\ m{\isachardot}{\kern0pt}\ equalizer\ {\isacharparenleft}{\kern0pt}X\ \isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub g\isactrlesub \ Y{\isacharparenright}{\kern0pt}\ m\ {\isacharparenleft}{\kern0pt}f\ {\isasymcirc}\isactrlsub c\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ Y{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}g\ {\isasymcirc}\isactrlsub c\ right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ Y{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}{\kern0pt}\isanewline
\ \ \isacommand{obtain}\isamarkupfalse%
\ E\ m\ \isakeyword{where}\ {\isachardoublequoteopen}equalizer\ E\ m\ {\isacharparenleft}{\kern0pt}f\ {\isasymcirc}\isactrlsub c\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ Y{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}g\ {\isasymcirc}\isactrlsub c\ right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ Y{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ equalizer{\isacharunderscore}{\kern0pt}exists\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharcomma}{\kern0pt}\ blast{\isacharparenright}{\kern0pt}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymexists}x\ Z\ m{\isachardot}{\kern0pt}\ f\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Z\ {\isasymand}\ g\ {\isacharcolon}{\kern0pt}\ Y\ {\isasymrightarrow}\ Z\ {\isasymand}\isanewline
\ \ \ \ \ \ equalizer\ x\ m\ {\isacharparenleft}{\kern0pt}f\ {\isasymcirc}\isactrlsub c\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ Y{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}g\ {\isasymcirc}\isactrlsub c\ right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ Y{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymexists}\ Z\ m{\isachardot}{\kern0pt}\ f\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Z\ {\isasymand}\ g\ {\isacharcolon}{\kern0pt}\ Y\ {\isasymrightarrow}\ Z\ {\isasymand}\ \isanewline
\ \ \ \ \ \ equalizer\ {\isacharparenleft}{\kern0pt}X\ \isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub g\isactrlesub \ Y{\isacharparenright}{\kern0pt}\ m\ {\isacharparenleft}{\kern0pt}f\ {\isasymcirc}\isactrlsub c\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ Y{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}g\ {\isasymcirc}\isactrlsub c\ right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ Y{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{unfolding}\isamarkupfalse%
\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}def\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}rule\ someI{\isacharunderscore}{\kern0pt}ex{\isacharparenright}{\kern0pt}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymexists}m{\isachardot}{\kern0pt}\ equalizer\ {\isacharparenleft}{\kern0pt}X\ \isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub g\isactrlesub \ Y{\isacharparenright}{\kern0pt}\ m\ {\isacharparenleft}{\kern0pt}f\ {\isasymcirc}\isactrlsub c\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ Y{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}g\ {\isasymcirc}\isactrlsub c\ right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ Y{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{definition}\isamarkupfalse%
\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ {\isacharcolon}{\kern0pt}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}cset\ {\isasymRightarrow}\ cfunc\ {\isasymRightarrow}\ cfunc\ {\isasymRightarrow}\ cset\ {\isasymRightarrow}\ cfunc{\isachardoublequoteclose}\ \isakeyword{where}\isanewline
\ \ {\isachardoublequoteopen}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ g\ Y\ {\isacharequal}{\kern0pt}\ {\isacharparenleft}{\kern0pt}SOME\ m{\isachardot}{\kern0pt}\ {\isasymexists}\ Z{\isachardot}{\kern0pt}\ f\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Z\ {\isasymand}\ g\ {\isacharcolon}{\kern0pt}\ Y\ {\isasymrightarrow}\ Z\ {\isasymand}\isanewline
\ \ \ \ equalizer\ {\isacharparenleft}{\kern0pt}X\ \isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub g\isactrlesub \ Y{\isacharparenright}{\kern0pt}\ m\ {\isacharparenleft}{\kern0pt}f\ {\isasymcirc}\isactrlsub c\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ Y{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}g\ {\isasymcirc}\isactrlsub c\ right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ Y{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism{\isacharunderscore}{\kern0pt}equalizer{\isacharcolon}{\kern0pt}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}f\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Z{\isachardoublequoteclose}\ {\isachardoublequoteopen}g\ {\isacharcolon}{\kern0pt}\ Y\ {\isasymrightarrow}\ Z{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}equalizer\ {\isacharparenleft}{\kern0pt}X\ \isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub g\isactrlesub \ Y{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ g\ Y{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}f\ {\isasymcirc}\isactrlsub c\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ Y{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}g\ {\isasymcirc}\isactrlsub c\ right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ Y{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}{\kern0pt}\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymexists}x\ Z{\isachardot}{\kern0pt}\ f\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Z\ {\isasymand}\isanewline
\ \ \ \ \ \ g\ {\isacharcolon}{\kern0pt}\ Y\ {\isasymrightarrow}\ Z\ {\isasymand}\ equalizer\ {\isacharparenleft}{\kern0pt}X\ \isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub g\isactrlesub \ Y{\isacharparenright}{\kern0pt}\ x\ {\isacharparenleft}{\kern0pt}f\ {\isasymcirc}\isactrlsub c\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ Y{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}g\ {\isasymcirc}\isactrlsub c\ right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ Y{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}equalizer\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymexists}Z{\isachardot}{\kern0pt}\ f\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Z\ {\isasymand}\ g\ {\isacharcolon}{\kern0pt}\ Y\ {\isasymrightarrow}\ Z\ {\isasymand}\isanewline
\ \ \ \ equalizer\ {\isacharparenleft}{\kern0pt}X\ \isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub g\isactrlesub \ Y{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ g\ Y{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}f\ {\isasymcirc}\isactrlsub c\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ Y{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}g\ {\isasymcirc}\isactrlsub c\ right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ Y{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{unfolding}\isamarkupfalse%
\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism{\isacharunderscore}{\kern0pt}def\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}rule\ someI{\isacharunderscore}{\kern0pt}ex{\isacharparenright}{\kern0pt}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}equalizer\ {\isacharparenleft}{\kern0pt}X\ \isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub g\isactrlesub \ Y{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ g\ Y{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}f\ {\isasymcirc}\isactrlsub c\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ Y{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}g\ {\isasymcirc}\isactrlsub c\ right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ Y{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism{\isacharunderscore}{\kern0pt}type{\isacharbrackleft}{\kern0pt}type{\isacharunderscore}{\kern0pt}rule{\isacharbrackright}{\kern0pt}{\isacharcolon}{\kern0pt}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}f\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Z{\isachardoublequoteclose}\ {\isachardoublequoteopen}g\ {\isacharcolon}{\kern0pt}\ Y\ {\isasymrightarrow}\ Z{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ g\ Y\ {\isacharcolon}{\kern0pt}\ X\ \isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub g\isactrlesub \ Y\ {\isasymrightarrow}\ X\ {\isasymtimes}\isactrlsub c\ Y{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ domain{\isacharunderscore}{\kern0pt}comp\ equalizer{\isacharunderscore}{\kern0pt}def\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism{\isacharunderscore}{\kern0pt}equalizer\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}type\ \isacommand{by}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism{\isacharunderscore}{\kern0pt}monomorphism{\isacharcolon}{\kern0pt}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}f\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Z{\isachardoublequoteclose}\ {\isachardoublequoteopen}g\ {\isacharcolon}{\kern0pt}\ Y\ {\isasymrightarrow}\ Z{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}monomorphism\ {\isacharparenleft}{\kern0pt}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ g\ Y{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ equalizer{\isacharunderscore}{\kern0pt}is{\isacharunderscore}{\kern0pt}monomorphism\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism{\isacharunderscore}{\kern0pt}equalizer\ \isacommand{by}\isamarkupfalse%
\ blast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{definition}\isamarkupfalse%
\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj\ {\isacharcolon}{\kern0pt}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}cset\ {\isasymRightarrow}\ cfunc\ {\isasymRightarrow}\ cfunc\ {\isasymRightarrow}\ cset\ {\isasymRightarrow}\ cfunc{\isachardoublequoteclose}\ \isakeyword{where}\isanewline
\ \ {\isachardoublequoteopen}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj\ X\ f\ g\ Y\ {\isacharequal}{\kern0pt}\ {\isacharparenleft}{\kern0pt}left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ Y{\isacharparenright}{\kern0pt}\ {\isasymcirc}\isactrlsub c\ {\isacharparenleft}{\kern0pt}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ g\ Y{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}type{\isacharbrackleft}{\kern0pt}type{\isacharunderscore}{\kern0pt}rule{\isacharbrackright}{\kern0pt}{\isacharcolon}{\kern0pt}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}f\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Z{\isachardoublequoteclose}\ {\isachardoublequoteopen}g\ {\isacharcolon}{\kern0pt}\ Y\ {\isasymrightarrow}\ Z{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj\ X\ f\ g\ Y\ {\isacharcolon}{\kern0pt}\ X\ \isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub g\isactrlesub \ Y\ {\isasymrightarrow}\ X{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}metis\ assms\ comp{\isacharunderscore}{\kern0pt}type\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}def\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism{\isacharunderscore}{\kern0pt}type\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}type{\isacharparenright}{\kern0pt}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{definition}\isamarkupfalse%
\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj\ {\isacharcolon}{\kern0pt}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}cset\ {\isasymRightarrow}\ cfunc\ {\isasymRightarrow}\ cfunc\ {\isasymRightarrow}\ cset\ {\isasymRightarrow}\ cfunc{\isachardoublequoteclose}\ \isakeyword{where}\isanewline
\ \ {\isachardoublequoteopen}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj\ X\ f\ g\ Y\ {\isacharequal}{\kern0pt}\ {\isacharparenleft}{\kern0pt}right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ Y{\isacharparenright}{\kern0pt}\ {\isasymcirc}\isactrlsub c\ {\isacharparenleft}{\kern0pt}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ g\ Y{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}type{\isacharbrackleft}{\kern0pt}type{\isacharunderscore}{\kern0pt}rule{\isacharbrackright}{\kern0pt}{\isacharcolon}{\kern0pt}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}f\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Z{\isachardoublequoteclose}\ {\isachardoublequoteopen}g\ {\isacharcolon}{\kern0pt}\ Y\ {\isasymrightarrow}\ Z{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj\ X\ f\ g\ Y\ {\isacharcolon}{\kern0pt}\ X\ \isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub g\isactrlesub \ Y\ {\isasymrightarrow}\ Y{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}metis\ assms\ comp{\isacharunderscore}{\kern0pt}type\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}def\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism{\isacharunderscore}{\kern0pt}type\ right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}type{\isacharparenright}{\kern0pt}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ pair{\isacharunderscore}{\kern0pt}factorsthru{\isacharunderscore}{\kern0pt}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism{\isacharcolon}{\kern0pt}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}f\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Z{\isachardoublequoteclose}\ {\isachardoublequoteopen}g\ {\isacharcolon}{\kern0pt}\ Y\ {\isasymrightarrow}\ Z{\isachardoublequoteclose}\ {\isachardoublequoteopen}x\ {\isacharcolon}{\kern0pt}\ A\ {\isasymrightarrow}\ X{\isachardoublequoteclose}\ {\isachardoublequoteopen}y\ {\isacharcolon}{\kern0pt}\ A\ {\isasymrightarrow}\ Y{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}f\ {\isasymcirc}\isactrlsub c\ x\ {\isacharequal}{\kern0pt}\ g\ {\isasymcirc}\isactrlsub c\ y\ {\isasymLongrightarrow}\ {\isasymlangle}x{\isacharcomma}{\kern0pt}y{\isasymrangle}\ factorsthru\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ g\ Y{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{unfolding}\isamarkupfalse%
\ factors{\isacharunderscore}{\kern0pt}through{\isacharunderscore}{\kern0pt}def\isanewline
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}{\kern0pt}\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ equalizer{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}equalizer\ {\isacharparenleft}{\kern0pt}X\ \isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub g\isactrlesub \ Y{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ g\ Y{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}f\ {\isasymcirc}\isactrlsub c\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ Y{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}g\ {\isasymcirc}\isactrlsub c\ right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ Y{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism{\isacharunderscore}{\kern0pt}equalizer\ assms\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharcomma}{\kern0pt}\ auto{\isacharparenright}{\kern0pt}\isanewline
\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}f\ {\isasymcirc}\isactrlsub c\ x\ {\isacharequal}{\kern0pt}\ g\ {\isasymcirc}\isactrlsub c\ y{\isachardoublequoteclose}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharparenleft}{\kern0pt}f\ {\isasymcirc}\isactrlsub c\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ Y{\isacharparenright}{\kern0pt}\ {\isasymcirc}\isactrlsub c\ {\isasymlangle}x{\isacharcomma}{\kern0pt}y{\isasymrangle}\ {\isacharequal}{\kern0pt}\ {\isacharparenleft}{\kern0pt}g\ {\isasymcirc}\isactrlsub c\ right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ Y{\isacharparenright}{\kern0pt}\ {\isasymcirc}\isactrlsub c\ {\isasymlangle}x{\isacharcomma}{\kern0pt}y{\isasymrangle}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharcomma}{\kern0pt}\ smt\ comp{\isacharunderscore}{\kern0pt}associative{\isadigit{2}}\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}cfunc{\isacharunderscore}{\kern0pt}prod\ right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}cfunc{\isacharunderscore}{\kern0pt}prod{\isacharparenright}{\kern0pt}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymexists}{\isacharbang}{\kern0pt}\ h{\isachardot}{\kern0pt}\ h\ {\isacharcolon}{\kern0pt}\ A\ {\isasymrightarrow}\ X\ \isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub g\isactrlesub \ Y\ {\isasymand}\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ g\ Y\ {\isasymcirc}\isactrlsub c\ h\ {\isacharequal}{\kern0pt}\ {\isasymlangle}x{\isacharcomma}{\kern0pt}y{\isasymrangle}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ similar{\isacharunderscore}{\kern0pt}equalizers\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharcomma}{\kern0pt}\ smt\ {\isacharparenleft}{\kern0pt}verit{\isacharcomma}{\kern0pt}\ del{\isacharunderscore}{\kern0pt}insts{\isacharparenright}{\kern0pt}\ \ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ equalizer\ equalizer{\isacharunderscore}{\kern0pt}def{\isacharparenright}{\kern0pt}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymexists}h{\isachardot}{\kern0pt}\ h\ {\isacharcolon}{\kern0pt}\ domain\ {\isasymlangle}x{\isacharcomma}{\kern0pt}y{\isasymrangle}\ {\isasymrightarrow}\ domain\ {\isacharparenleft}{\kern0pt}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ g\ Y{\isacharparenright}{\kern0pt}\ {\isasymand}\isanewline
\ \ \ \ \ \ \ \ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ g\ Y\ {\isasymcirc}\isactrlsub c\ h\ {\isacharequal}{\kern0pt}\ {\isasymlangle}x{\isacharcomma}{\kern0pt}y{\isasymrangle}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}metis\ assms{\isacharparenleft}{\kern0pt}{\isadigit{1}}{\isacharcomma}{\kern0pt}{\isadigit{2}}{\isacharparenright}{\kern0pt}\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ domain{\isacharunderscore}{\kern0pt}comp\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism{\isacharunderscore}{\kern0pt}type{\isacharparenright}{\kern0pt}\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}is{\isacharunderscore}{\kern0pt}pullback{\isacharcolon}{\kern0pt}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}f\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Z{\isachardoublequoteclose}\ {\isachardoublequoteopen}g\ {\isacharcolon}{\kern0pt}\ Y\ {\isasymrightarrow}\ Z{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}is{\isacharunderscore}{\kern0pt}pullback\ {\isacharparenleft}{\kern0pt}X\ \isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub g\isactrlesub \ Y{\isacharparenright}{\kern0pt}\ Y\ X\ Z\ \ {\isacharparenleft}{\kern0pt}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj\ X\ f\ g\ Y{\isacharparenright}{\kern0pt}\ g\ {\isacharparenleft}{\kern0pt}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj\ X\ f\ g\ Y{\isacharparenright}{\kern0pt}\ f{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{unfolding}\isamarkupfalse%
\ is{\isacharunderscore}{\kern0pt}pullback{\isacharunderscore}{\kern0pt}def\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ assms\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}type\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}type\isanewline
\isacommand{proof}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}g\ {\isasymcirc}\isactrlsub c\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj\ X\ f\ g\ Y\ {\isacharequal}{\kern0pt}\ f\ {\isasymcirc}\isactrlsub c\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj\ X\ f\ g\ Y{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{unfolding}\isamarkupfalse%
\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}def\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}def\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ comp{\isacharunderscore}{\kern0pt}associative{\isadigit{2}}\ equalizer{\isacharunderscore}{\kern0pt}def\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism{\isacharunderscore}{\kern0pt}equalizer\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharcomma}{\kern0pt}\ auto{\isacharparenright}{\kern0pt}\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\ \ \isacommand{fix}\isamarkupfalse%
\ A\ k\ h\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ k{\isacharunderscore}{\kern0pt}type{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}k\ {\isacharcolon}{\kern0pt}\ A\ {\isasymrightarrow}\ Y{\isachardoublequoteclose}\ \isakeyword{and}\ h{\isacharunderscore}{\kern0pt}type{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}h\ {\isacharcolon}{\kern0pt}\ A\ {\isasymrightarrow}\ X{\isachardoublequoteclose}\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ k{\isacharunderscore}{\kern0pt}h{\isacharunderscore}{\kern0pt}commutes{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}g\ {\isasymcirc}\isactrlsub c\ k\ {\isacharequal}{\kern0pt}\ f\ {\isasymcirc}\isactrlsub c\ h{\isachardoublequoteclose}\isanewline
\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymlangle}h{\isacharcomma}{\kern0pt}k{\isasymrangle}\ factorsthru\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ g\ Y{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ h{\isacharunderscore}{\kern0pt}type\ k{\isacharunderscore}{\kern0pt}h{\isacharunderscore}{\kern0pt}commutes\ k{\isacharunderscore}{\kern0pt}type\ pair{\isacharunderscore}{\kern0pt}factorsthru{\isacharunderscore}{\kern0pt}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymexists}j{\isachardot}{\kern0pt}\ j\ {\isacharcolon}{\kern0pt}\ A\ {\isasymrightarrow}\ X\ \isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub g\isactrlesub \ Y\ {\isasymand}\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ g\ Y\ {\isasymcirc}\isactrlsub c\ j\ {\isacharequal}{\kern0pt}\ {\isasymlangle}h{\isacharcomma}{\kern0pt}k{\isasymrangle}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}meson\ assms\ cfunc{\isacharunderscore}{\kern0pt}prod{\isacharunderscore}{\kern0pt}type\ factors{\isacharunderscore}{\kern0pt}through{\isacharunderscore}{\kern0pt}def{\isadigit{2}}\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism{\isacharunderscore}{\kern0pt}type\ h{\isacharunderscore}{\kern0pt}type\ k{\isacharunderscore}{\kern0pt}type{\isacharparenright}{\kern0pt}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymexists}j{\isachardot}{\kern0pt}\ j\ {\isacharcolon}{\kern0pt}\ A\ {\isasymrightarrow}\ X\ \isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub g\isactrlesub \ Y\ {\isasymand}\isanewline
\ \ \ \ \ \ \ \ \ \ \ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj\ X\ f\ g\ Y\ {\isasymcirc}\isactrlsub c\ j\ {\isacharequal}{\kern0pt}\ k\ {\isasymand}\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj\ X\ f\ g\ Y\ {\isasymcirc}\isactrlsub c\ j\ {\isacharequal}{\kern0pt}\ h{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{unfolding}\isamarkupfalse%
\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}def\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}def\ \isanewline
\ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}auto{\isacharcomma}{\kern0pt}\ rule{\isacharunderscore}{\kern0pt}tac\ x{\isacharequal}{\kern0pt}j\ \isakeyword{in}\ exI{\isacharcomma}{\kern0pt}\ auto{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \isacommand{fix}\isamarkupfalse%
\ j\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ j{\isacharunderscore}{\kern0pt}type{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}j\ {\isacharcolon}{\kern0pt}\ A\ {\isasymrightarrow}\ X\ \isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub g\isactrlesub \ Y{\isachardoublequoteclose}\isanewline
\isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ g\ Y\ {\isasymcirc}\isactrlsub c\ j\ {\isacharequal}{\kern0pt}\ {\isasymlangle}h{\isacharcomma}{\kern0pt}k{\isasymrangle}\ {\isasymLongrightarrow}\isanewline
\ \ \ \ \ \ \ \ {\isacharparenleft}{\kern0pt}right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ Y\ {\isasymcirc}\isactrlsub c\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ g\ Y{\isacharparenright}{\kern0pt}\ {\isasymcirc}\isactrlsub c\ j\ {\isacharequal}{\kern0pt}\ k{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ h{\isacharunderscore}{\kern0pt}type\ k{\isacharunderscore}{\kern0pt}type\ j{\isacharunderscore}{\kern0pt}type\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharcomma}{\kern0pt}\ metis\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ comp{\isacharunderscore}{\kern0pt}associative\ right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}cfunc{\isacharunderscore}{\kern0pt}prod{\isacharparenright}{\kern0pt}\isanewline
\isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ g\ Y\ {\isasymcirc}\isactrlsub c\ j\ {\isacharequal}{\kern0pt}\ {\isasymlangle}h{\isacharcomma}{\kern0pt}k{\isasymrangle}\ {\isasymLongrightarrow}\isanewline
\ \ \ \ \ \ \ \ {\isacharparenleft}{\kern0pt}left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ Y\ {\isasymcirc}\isactrlsub c\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ g\ Y{\isacharparenright}{\kern0pt}\ {\isasymcirc}\isactrlsub c\ j\ {\isacharequal}{\kern0pt}\ h{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ h{\isacharunderscore}{\kern0pt}type\ k{\isacharunderscore}{\kern0pt}type\ j{\isacharunderscore}{\kern0pt}type\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharcomma}{\kern0pt}\ metis\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ comp{\isacharunderscore}{\kern0pt}associative\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}cfunc{\isacharunderscore}{\kern0pt}prod{\isacharparenright}{\kern0pt}\isanewline
\ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\ \ \isacommand{fix}\isamarkupfalse%
\ A\ j\ y\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ j{\isacharunderscore}{\kern0pt}type{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}j\ {\isacharcolon}{\kern0pt}\ A\ {\isasymrightarrow}\ X\ \isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub g\isactrlesub \ Y{\isachardoublequoteclose}\ \isakeyword{and}\ y{\isacharunderscore}{\kern0pt}type{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}y\ {\isacharcolon}{\kern0pt}\ A\ {\isasymrightarrow}\ X\ \isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub g\isactrlesub \ Y{\isachardoublequoteclose}\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj\ X\ f\ g\ Y\ {\isasymcirc}\isactrlsub c\ y\ {\isacharequal}{\kern0pt}\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj\ X\ f\ g\ Y\ {\isasymcirc}\isactrlsub c\ j{\isachardoublequoteclose}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ right{\isacharunderscore}{\kern0pt}eq{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ Y\ {\isasymcirc}\isactrlsub c\ {\isacharparenleft}{\kern0pt}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ g\ Y\ {\isasymcirc}\isactrlsub c\ y{\isacharparenright}{\kern0pt}\ {\isacharequal}{\kern0pt}\isanewline
\ \ \ \ \ \ right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ Y\ {\isasymcirc}\isactrlsub c\ {\isacharparenleft}{\kern0pt}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ g\ Y\ {\isasymcirc}\isactrlsub c\ j{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{unfolding}\isamarkupfalse%
\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}def\ \isacommand{using}\isamarkupfalse%
\ assms\ j{\isacharunderscore}{\kern0pt}type\ y{\isacharunderscore}{\kern0pt}type\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharcomma}{\kern0pt}\ simp\ add{\isacharcolon}{\kern0pt}\ comp{\isacharunderscore}{\kern0pt}associative{\isadigit{2}}{\isacharparenright}{\kern0pt}\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj\ X\ f\ g\ Y\ {\isasymcirc}\isactrlsub c\ y\ {\isacharequal}{\kern0pt}\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj\ X\ f\ g\ Y\ {\isasymcirc}\isactrlsub c\ j{\isachardoublequoteclose}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ left{\isacharunderscore}{\kern0pt}eq{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ Y\ {\isasymcirc}\isactrlsub c\ {\isacharparenleft}{\kern0pt}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ g\ Y\ {\isasymcirc}\isactrlsub c\ y{\isacharparenright}{\kern0pt}\ {\isacharequal}{\kern0pt}\isanewline
\ \ \ \ \ \ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ Y\ {\isasymcirc}\isactrlsub c\ {\isacharparenleft}{\kern0pt}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ g\ Y\ {\isasymcirc}\isactrlsub c\ j{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{unfolding}\isamarkupfalse%
\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}def\ \ \isacommand{using}\isamarkupfalse%
\ assms\ j{\isacharunderscore}{\kern0pt}type\ y{\isacharunderscore}{\kern0pt}type\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharcomma}{\kern0pt}\ simp\ add{\isacharcolon}{\kern0pt}\ comp{\isacharunderscore}{\kern0pt}associative{\isadigit{2}}{\isacharparenright}{\kern0pt}\isanewline
\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ mono{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}monomorphism\ {\isacharparenleft}{\kern0pt}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ g\ Y{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism{\isacharunderscore}{\kern0pt}monomorphism\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ g\ Y\ {\isasymcirc}\isactrlsub c\ y\ {\isacharequal}{\kern0pt}\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ g\ Y\ {\isasymcirc}\isactrlsub c\ j{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ right{\isacharunderscore}{\kern0pt}eq\ left{\isacharunderscore}{\kern0pt}eq\ cart{\isacharunderscore}{\kern0pt}prod{\isacharunderscore}{\kern0pt}eq\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism{\isacharunderscore}{\kern0pt}type\ y{\isacharunderscore}{\kern0pt}type\ j{\isacharunderscore}{\kern0pt}type\ assms\ comp{\isacharunderscore}{\kern0pt}type\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}subst\ cart{\isacharunderscore}{\kern0pt}prod{\isacharunderscore}{\kern0pt}eq{\isacharbrackleft}{\kern0pt}\isakeyword{where}\ Z{\isacharequal}{\kern0pt}A{\isacharcomma}{\kern0pt}\ \isakeyword{where}\ X{\isacharequal}{\kern0pt}X{\isacharcomma}{\kern0pt}\ \isakeyword{where}\ Y{\isacharequal}{\kern0pt}Y{\isacharbrackright}{\kern0pt}{\isacharcomma}{\kern0pt}\ auto{\isacharparenright}{\kern0pt}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}j\ {\isacharequal}{\kern0pt}\ y{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ mono\ assms\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism{\isacharunderscore}{\kern0pt}type\ j{\isacharunderscore}{\kern0pt}type\ y{\isacharunderscore}{\kern0pt}type\isanewline
\ \ \ \ \isacommand{unfolding}\isamarkupfalse%
\ monomorphism{\isacharunderscore}{\kern0pt}def\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\ \isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}eq{\isacharcolon}{\kern0pt}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}f\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Z{\isachardoublequoteclose}\ {\isachardoublequoteopen}g\ {\isacharcolon}{\kern0pt}\ Y\ {\isasymrightarrow}\ Z{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}f\ {\isasymcirc}\isactrlsub c\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj\ X\ f\ g\ Y\ {\isacharequal}{\kern0pt}\ g\ {\isasymcirc}\isactrlsub c\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj\ X\ f\ g\ Y{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}is{\isacharunderscore}{\kern0pt}pullback\ assms\isanewline
\ \ \ \ \isacommand{unfolding}\isamarkupfalse%
\ is{\isacharunderscore}{\kern0pt}pullback{\isacharunderscore}{\kern0pt}def\ \isacommand{by}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}pair{\isacharunderscore}{\kern0pt}member{\isacharcolon}{\kern0pt}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}f\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Z{\isachardoublequoteclose}\ {\isachardoublequoteopen}g\ {\isacharcolon}{\kern0pt}\ Y\ {\isasymrightarrow}\ Z{\isachardoublequoteclose}\ {\isachardoublequoteopen}x\ {\isasymin}\isactrlsub c\ X{\isachardoublequoteclose}\ {\isachardoublequoteopen}y\ {\isasymin}\isactrlsub c\ Y{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isacharparenleft}{\kern0pt}{\isasymlangle}x{\isacharcomma}{\kern0pt}\ y{\isasymrangle}\ {\isasymin}\isactrlbsub X\ {\isasymtimes}\isactrlsub c\ Y\isactrlesub \ {\isacharparenleft}{\kern0pt}X\isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub g\isactrlesub Y{\isacharcomma}{\kern0pt}\ \ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ g\ Y{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}\ {\isacharequal}{\kern0pt}\ {\isacharparenleft}{\kern0pt}f\ {\isasymcirc}\isactrlsub c\ x\ {\isacharequal}{\kern0pt}\ g\ {\isasymcirc}\isactrlsub c\ y{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymlangle}x{\isacharcomma}{\kern0pt}y{\isasymrangle}\ {\isasymin}\isactrlbsub X\ {\isasymtimes}\isactrlsub c\ Y\isactrlesub \ {\isacharparenleft}{\kern0pt}X\ \isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub g\isactrlesub \ Y{\isacharcomma}{\kern0pt}\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ g\ Y{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{obtain}\isamarkupfalse%
\ h\ \isakeyword{where}\isanewline
\ \ \ \ h{\isacharunderscore}{\kern0pt}type{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}h\ {\isasymin}\isactrlsub c\ X\isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub g\isactrlesub Y{\isachardoublequoteclose}\ \isakeyword{and}\ h{\isacharunderscore}{\kern0pt}eq{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ g\ Y\ {\isasymcirc}\isactrlsub c\ h\ {\isacharequal}{\kern0pt}\ {\isasymlangle}x{\isacharcomma}{\kern0pt}y{\isasymrangle}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{unfolding}\isamarkupfalse%
\ relative{\isacharunderscore}{\kern0pt}member{\isacharunderscore}{\kern0pt}def{\isadigit{2}}\ factors{\isacharunderscore}{\kern0pt}through{\isacharunderscore}{\kern0pt}def\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\kern0pt}{\isadigit{3}}{\isacharcomma}{\kern0pt}{\isadigit{4}}{\isacharparenright}{\kern0pt}\ cfunc{\isacharunderscore}{\kern0pt}prod{\isacharunderscore}{\kern0pt}type\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ left{\isacharunderscore}{\kern0pt}eq{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj\ X\ f\ g\ Y\ {\isasymcirc}\isactrlsub c\ h\ {\isacharequal}{\kern0pt}\ x{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{unfolding}\isamarkupfalse%
\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}def\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ h{\isacharunderscore}{\kern0pt}type\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharcomma}{\kern0pt}\ smt\ comp{\isacharunderscore}{\kern0pt}associative{\isadigit{2}}\ h{\isacharunderscore}{\kern0pt}eq\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}cfunc{\isacharunderscore}{\kern0pt}prod{\isacharparenright}{\kern0pt}\isanewline
\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ right{\isacharunderscore}{\kern0pt}eq{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj\ X\ f\ g\ Y\ {\isasymcirc}\isactrlsub c\ h\ {\isacharequal}{\kern0pt}\ y{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{unfolding}\isamarkupfalse%
\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}def\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ h{\isacharunderscore}{\kern0pt}type\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharcomma}{\kern0pt}\ smt\ comp{\isacharunderscore}{\kern0pt}associative{\isadigit{2}}\ h{\isacharunderscore}{\kern0pt}eq\ right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}cfunc{\isacharunderscore}{\kern0pt}prod{\isacharparenright}{\kern0pt}\isanewline
\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}f\ {\isasymcirc}\isactrlsub c\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj\ X\ f\ g\ Y\ {\isasymcirc}\isactrlsub c\ h\ {\isacharequal}{\kern0pt}\ g\ {\isasymcirc}\isactrlsub c\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj\ X\ f\ g\ Y\ {\isasymcirc}\isactrlsub c\ h{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ h{\isacharunderscore}{\kern0pt}type\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharcomma}{\kern0pt}\ simp\ add{\isacharcolon}{\kern0pt}\ comp{\isacharunderscore}{\kern0pt}associative{\isadigit{2}}\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}eq{\isacharparenright}{\kern0pt}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}f\ {\isasymcirc}\isactrlsub c\ x\ {\isacharequal}{\kern0pt}\ g\ {\isasymcirc}\isactrlsub c\ y{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ left{\isacharunderscore}{\kern0pt}eq\ right{\isacharunderscore}{\kern0pt}eq\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ f{\isacharunderscore}{\kern0pt}g{\isacharunderscore}{\kern0pt}eq{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}f\ {\isasymcirc}\isactrlsub c\ x\ {\isacharequal}{\kern0pt}\ g\ {\isasymcirc}\isactrlsub c\ y{\isachardoublequoteclose}\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymlangle}x{\isacharcomma}{\kern0pt}y{\isasymrangle}\ {\isasymin}\isactrlbsub X\ {\isasymtimes}\isactrlsub c\ Y\isactrlesub \ {\isacharparenleft}{\kern0pt}X\ \isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub g\isactrlesub \ Y{\isacharcomma}{\kern0pt}\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ g\ Y{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{unfolding}\isamarkupfalse%
\ relative{\isacharunderscore}{\kern0pt}member{\isacharunderscore}{\kern0pt}def\ factors{\isacharunderscore}{\kern0pt}through{\isacharunderscore}{\kern0pt}def\isanewline
\ \ \isacommand{proof}\isamarkupfalse%
\ auto\isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymlangle}x{\isacharcomma}{\kern0pt}y{\isasymrangle}\ {\isasymin}\isactrlsub c\ X\ {\isasymtimes}\isactrlsub c\ Y{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ typecheck{\isacharunderscore}{\kern0pt}cfuncs\isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}monomorphism\ {\isacharparenleft}{\kern0pt}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ g\ Y{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\kern0pt}{\isadigit{1}}{\isacharcomma}{\kern0pt}{\isadigit{2}}{\isacharparenright}{\kern0pt}\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism{\isacharunderscore}{\kern0pt}monomorphism\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ g\ Y\ {\isacharcolon}{\kern0pt}\ X\ \isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub g\isactrlesub \ Y\ {\isasymrightarrow}\ X\ {\isasymtimes}\isactrlsub c\ Y{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ typecheck{\isacharunderscore}{\kern0pt}cfuncs\isanewline
\isanewline
\ \ \ \ \isacommand{have}\isamarkupfalse%
\ j{\isacharunderscore}{\kern0pt}exists{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}{\isasymAnd}\ Z\ k\ h{\isachardot}{\kern0pt}\ k\ {\isacharcolon}{\kern0pt}\ Z\ {\isasymrightarrow}\ Y\ {\isasymLongrightarrow}\ h\ {\isacharcolon}{\kern0pt}\ Z\ {\isasymrightarrow}\ X\ {\isasymLongrightarrow}\ g\ {\isasymcirc}\isactrlsub c\ k\ {\isacharequal}{\kern0pt}\ f\ {\isasymcirc}\isactrlsub c\ h\ {\isasymLongrightarrow}\isanewline
\ \ \ \ \ \ {\isacharparenleft}{\kern0pt}{\isasymexists}{\isacharbang}{\kern0pt}j{\isachardot}{\kern0pt}\ j\ {\isacharcolon}{\kern0pt}\ Z\ {\isasymrightarrow}\ X\ \isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub g\isactrlesub \ Y\ {\isasymand}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj\ X\ f\ g\ Y\ {\isasymcirc}\isactrlsub c\ j\ {\isacharequal}{\kern0pt}\ k\ {\isasymand}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj\ X\ f\ g\ Y\ {\isasymcirc}\isactrlsub c\ j\ {\isacharequal}{\kern0pt}\ h{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}is{\isacharunderscore}{\kern0pt}pullback\ assms\ \isacommand{unfolding}\isamarkupfalse%
\ is{\isacharunderscore}{\kern0pt}pullback{\isacharunderscore}{\kern0pt}def\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\isanewline
\ \ \ \ \isacommand{obtain}\isamarkupfalse%
\ j\ \isakeyword{where}\ j{\isacharunderscore}{\kern0pt}type{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}j\ {\isasymin}\isactrlsub c\ X\ \isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub g\isactrlesub \ Y{\isachardoublequoteclose}\ \isakeyword{and}\ \isanewline
\ \ \ \ \ \ j{\isacharunderscore}{\kern0pt}projs{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj\ X\ f\ g\ Y\ {\isasymcirc}\isactrlsub c\ j\ {\isacharequal}{\kern0pt}\ y{\isachardoublequoteclose}\ {\isachardoublequoteopen}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj\ X\ f\ g\ Y\ {\isasymcirc}\isactrlsub c\ j\ {\isacharequal}{\kern0pt}\ x{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ j{\isacharunderscore}{\kern0pt}exists{\isacharbrackleft}{\kern0pt}\isakeyword{where}\ Z{\isacharequal}{\kern0pt}one{\isacharcomma}{\kern0pt}\ \isakeyword{where}\ k{\isacharequal}{\kern0pt}y{\isacharcomma}{\kern0pt}\ \isakeyword{where}\ h{\isacharequal}{\kern0pt}x{\isacharbrackright}{\kern0pt}\ assms\ f{\isacharunderscore}{\kern0pt}g{\isacharunderscore}{\kern0pt}eq\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymexists}h{\isachardot}{\kern0pt}\ h\ {\isacharcolon}{\kern0pt}\ domain\ {\isasymlangle}x{\isacharcomma}{\kern0pt}y{\isasymrangle}\ {\isasymrightarrow}\ domain\ {\isacharparenleft}{\kern0pt}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ g\ Y{\isacharparenright}{\kern0pt}\ {\isasymand}\isanewline
\ \ \ \ \ \ \ \ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ g\ Y\ {\isasymcirc}\isactrlsub c\ h\ {\isacharequal}{\kern0pt}\ {\isasymlangle}x{\isacharcomma}{\kern0pt}y{\isasymrangle}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}rule{\isacharunderscore}{\kern0pt}tac\ x{\isacharequal}{\kern0pt}j\ \isakeyword{in}\ exI{\isacharcomma}{\kern0pt}\ auto{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}j\ {\isacharcolon}{\kern0pt}\ domain\ {\isasymlangle}x{\isacharcomma}{\kern0pt}y{\isasymrangle}\ {\isasymrightarrow}\ domain\ {\isacharparenleft}{\kern0pt}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ g\ Y{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ j{\isacharunderscore}{\kern0pt}type\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharcomma}{\kern0pt}\ auto{\isacharparenright}{\kern0pt}\isanewline
\isanewline
\ \ \ \ \ \ \isacommand{have}\isamarkupfalse%
\ left{\isacharunderscore}{\kern0pt}eq{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ Y\ {\isasymcirc}\isactrlsub c\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ g\ Y\ {\isasymcirc}\isactrlsub c\ j\ {\isacharequal}{\kern0pt}\ x{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ j{\isacharunderscore}{\kern0pt}projs\ assms\ j{\isacharunderscore}{\kern0pt}type\ comp{\isacharunderscore}{\kern0pt}associative{\isadigit{2}}\isanewline
\ \ \ \ \ \ \ \ \isacommand{unfolding}\isamarkupfalse%
\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}def\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharcomma}{\kern0pt}\ auto{\isacharparenright}{\kern0pt}\isanewline
\isanewline
\ \ \ \ \ \ \isacommand{have}\isamarkupfalse%
\ right{\isacharunderscore}{\kern0pt}eq{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ Y\ {\isasymcirc}\isactrlsub c\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ g\ Y\ {\isasymcirc}\isactrlsub c\ j\ {\isacharequal}{\kern0pt}\ y{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ j{\isacharunderscore}{\kern0pt}projs\ assms\ j{\isacharunderscore}{\kern0pt}type\ comp{\isacharunderscore}{\kern0pt}associative{\isadigit{2}}\isanewline
\ \ \ \ \ \ \ \ \isacommand{unfolding}\isamarkupfalse%
\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}def\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharcomma}{\kern0pt}\ auto{\isacharparenright}{\kern0pt}\isanewline
\isanewline
\ \ \ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ g\ Y\ {\isasymcirc}\isactrlsub c\ j\ {\isacharequal}{\kern0pt}\ {\isasymlangle}x{\isacharcomma}{\kern0pt}y{\isasymrangle}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ left{\isacharunderscore}{\kern0pt}eq\ right{\isacharunderscore}{\kern0pt}eq\ assms\ j{\isacharunderscore}{\kern0pt}type\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharcomma}{\kern0pt}\ simp\ add{\isacharcolon}{\kern0pt}\ cfunc{\isacharunderscore}{\kern0pt}prod{\isacharunderscore}{\kern0pt}unique{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}pair{\isacharunderscore}{\kern0pt}member{\isadigit{2}}{\isacharcolon}{\kern0pt}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}f\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Y{\isachardoublequoteclose}\ {\isachardoublequoteopen}g\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ E{\isachardoublequoteclose}\ {\isachardoublequoteopen}x\ {\isasymin}\isactrlsub c\ X{\isachardoublequoteclose}\ {\isachardoublequoteopen}y\ {\isasymin}\isactrlsub c\ X{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}g\ {\isasymcirc}\isactrlsub c\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj\ X\ f\ f\ X\ {\isacharequal}{\kern0pt}\ g\ {\isasymcirc}\isactrlsub c\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj\ X\ f\ f\ X{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isasymforall}x\ y{\isachardot}{\kern0pt}\ x\ {\isasymin}\isactrlsub c\ X\ {\isasymlongrightarrow}\ y\ {\isasymin}\isactrlsub c\ X\ {\isasymlongrightarrow}\ {\isasymlangle}x{\isacharcomma}{\kern0pt}y{\isasymrangle}\ {\isasymin}\isactrlbsub X\ {\isasymtimes}\isactrlsub c\ X\isactrlesub \ {\isacharparenleft}{\kern0pt}X\ \isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub f\isactrlesub \ X{\isacharcomma}{\kern0pt}\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ f\ X{\isacharparenright}{\kern0pt}\ {\isasymlongrightarrow}\ g\ {\isasymcirc}\isactrlsub c\ x\ {\isacharequal}{\kern0pt}\ g\ {\isasymcirc}\isactrlsub c\ y{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
{\isacharparenleft}{\kern0pt}auto{\isacharparenright}{\kern0pt}\isanewline
\ \ \isacommand{fix}\isamarkupfalse%
\ x\ y\ \ \isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ x{\isacharunderscore}{\kern0pt}type{\isacharbrackleft}{\kern0pt}type{\isacharunderscore}{\kern0pt}rule{\isacharbrackright}{\kern0pt}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}x\ {\isasymin}\isactrlsub c\ X{\isachardoublequoteclose}\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ y{\isacharunderscore}{\kern0pt}type{\isacharbrackleft}{\kern0pt}type{\isacharunderscore}{\kern0pt}rule{\isacharbrackright}{\kern0pt}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}y\ {\isasymin}\isactrlsub c\ X{\isachardoublequoteclose}\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ a{\isadigit{3}}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}{\isasymlangle}x{\isacharcomma}{\kern0pt}y{\isasymrangle}\ {\isasymin}\isactrlbsub X\ {\isasymtimes}\isactrlsub c\ X\isactrlesub \ {\isacharparenleft}{\kern0pt}X\ \isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub f\isactrlesub \ X{\isacharcomma}{\kern0pt}\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ f\ X{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{obtain}\isamarkupfalse%
\ h\ \isakeyword{where}\isanewline
\ \ \ \ h{\isacharunderscore}{\kern0pt}type{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}h\ {\isasymin}\isactrlsub c\ X\isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub f\isactrlesub X{\isachardoublequoteclose}\ \isakeyword{and}\ h{\isacharunderscore}{\kern0pt}eq{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ f\ X\ {\isasymcirc}\isactrlsub c\ h\ {\isacharequal}{\kern0pt}\ {\isasymlangle}x{\isacharcomma}{\kern0pt}y{\isasymrangle}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}meson\ factors{\isacharunderscore}{\kern0pt}through{\isacharunderscore}{\kern0pt}def{\isadigit{2}}\ relative{\isacharunderscore}{\kern0pt}member{\isacharunderscore}{\kern0pt}def{\isadigit{2}}{\isacharparenright}{\kern0pt}\isanewline
\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ left{\isacharunderscore}{\kern0pt}eq{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj\ X\ f\ f\ X\ {\isasymcirc}\isactrlsub c\ h\ {\isacharequal}{\kern0pt}\ x{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{unfolding}\isamarkupfalse%
\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}def\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharcomma}{\kern0pt}\ smt\ {\isacharparenleft}{\kern0pt}z{\isadigit{3}}{\isacharparenright}{\kern0pt}\ assms{\isacharparenleft}{\kern0pt}{\isadigit{1}}{\isacharparenright}{\kern0pt}\ comp{\isacharunderscore}{\kern0pt}associative{\isadigit{2}}\ h{\isacharunderscore}{\kern0pt}eq\ h{\isacharunderscore}{\kern0pt}type\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}cfunc{\isacharunderscore}{\kern0pt}prod\ y{\isacharunderscore}{\kern0pt}type{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ right{\isacharunderscore}{\kern0pt}eq{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj\ X\ f\ f\ X\ {\isasymcirc}\isactrlsub c\ h\ {\isacharequal}{\kern0pt}\ y{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{unfolding}\isamarkupfalse%
\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}def\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharcomma}{\kern0pt}\ metis\ {\isacharparenleft}{\kern0pt}full{\isacharunderscore}{\kern0pt}types{\isacharparenright}{\kern0pt}\ a{\isadigit{3}}\ comp{\isacharunderscore}{\kern0pt}associative{\isadigit{2}}\ h{\isacharunderscore}{\kern0pt}eq\ h{\isacharunderscore}{\kern0pt}type\ relative{\isacharunderscore}{\kern0pt}member{\isacharunderscore}{\kern0pt}def{\isadigit{2}}\ right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}cfunc{\isacharunderscore}{\kern0pt}prod\ x{\isacharunderscore}{\kern0pt}type{\isacharparenright}{\kern0pt}\isanewline
\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}g\ {\isasymcirc}\isactrlsub c\ x\ {\isacharequal}{\kern0pt}\ g\ {\isasymcirc}\isactrlsub c\ y{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\kern0pt}{\isadigit{1}}{\isacharcomma}{\kern0pt}{\isadigit{2}}{\isacharcomma}{\kern0pt}{\isadigit{5}}{\isacharparenright}{\kern0pt}\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ comp{\isacharunderscore}{\kern0pt}associative\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}type\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}type\ h{\isacharunderscore}{\kern0pt}type\ left{\isacharunderscore}{\kern0pt}eq\ right{\isacharunderscore}{\kern0pt}eq\ \isacommand{by}\isamarkupfalse%
\ fastforce\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ kernel{\isacharunderscore}{\kern0pt}pair{\isacharunderscore}{\kern0pt}subset{\isacharcolon}{\kern0pt}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}f{\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Y{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isacharparenleft}{\kern0pt}X\ \isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub f\isactrlesub \ X{\isacharcomma}{\kern0pt}\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ f\ X{\isacharparenright}{\kern0pt}\ {\isasymsubseteq}\isactrlsub c\ X\ {\isasymtimes}\isactrlsub c\ X{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism{\isacharunderscore}{\kern0pt}monomorphism\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism{\isacharunderscore}{\kern0pt}type\ subobject{\isacharunderscore}{\kern0pt}of{\isacharunderscore}{\kern0pt}def{\isadigit{2}}\ \isacommand{by}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\begin{isamarkuptext}%
The three lemmas below correspond to Exercise 2.1.44 in Halvorson.%
\end{isamarkuptext}\isamarkuptrue%
\isacommand{lemma}\isamarkupfalse%
\ kern{\isacharunderscore}{\kern0pt}pair{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}iso{\isacharunderscore}{\kern0pt}TFAE{\isadigit{1}}{\isacharcolon}{\kern0pt}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}f{\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Y{\isachardoublequoteclose}\ {\isachardoublequoteopen}monomorphism\ f{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isacharparenleft}{\kern0pt}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj\ X\ f\ f\ X{\isacharparenright}{\kern0pt}\ {\isacharequal}{\kern0pt}\ {\isacharparenleft}{\kern0pt}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj\ X\ f\ f\ X{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}cases\ {\isachardoublequoteopen}{\isasymexists}x{\isachardot}{\kern0pt}\ x{\isasymin}\isactrlsub c\ X\isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub f\isactrlesub X{\isachardoublequoteclose}{\isacharcomma}{\kern0pt}\ auto{\isacharparenright}{\kern0pt}\isanewline
\ \ \isacommand{fix}\isamarkupfalse%
\ x\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ x{\isacharunderscore}{\kern0pt}type{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}x{\isasymin}\isactrlsub c\ X\isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub f\isactrlesub X{\isachardoublequoteclose}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharparenleft}{\kern0pt}f\ {\isasymcirc}\isactrlsub c\ {\isacharparenleft}{\kern0pt}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj\ X\ f\ f\ X{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isasymcirc}\isactrlsub c\ x\ {\isacharequal}{\kern0pt}\ {\isacharparenleft}{\kern0pt}f{\isasymcirc}\isactrlsub c\ {\isacharparenleft}{\kern0pt}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj\ X\ f\ f\ X{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isasymcirc}\isactrlsub c\ x{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ comp{\isacharunderscore}{\kern0pt}associative\ equalizer{\isacharunderscore}{\kern0pt}def\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism{\isacharunderscore}{\kern0pt}equalizer\isanewline
\ \ \ \ \isacommand{unfolding}\isamarkupfalse%
\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}def\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}def\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharcomma}{\kern0pt}\ smt\ {\isacharparenleft}{\kern0pt}verit{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}f\ {\isasymcirc}\isactrlsub c\ {\isacharparenleft}{\kern0pt}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj\ X\ f\ f\ X{\isacharparenright}{\kern0pt}\ {\isacharequal}{\kern0pt}\ f{\isasymcirc}\isactrlsub c\ {\isacharparenleft}{\kern0pt}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj\ X\ f\ f\ X{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}is{\isacharunderscore}{\kern0pt}pullback\ is{\isacharunderscore}{\kern0pt}pullback{\isacharunderscore}{\kern0pt}def\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharparenleft}{\kern0pt}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj\ X\ f\ f\ X{\isacharparenright}{\kern0pt}\ {\isacharequal}{\kern0pt}\ {\isacharparenleft}{\kern0pt}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj\ X\ f\ f\ X{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}type\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}type\ monomorphism{\isacharunderscore}{\kern0pt}def\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymforall}x{\isachardot}{\kern0pt}\ {\isasymnot}\ x\ {\isasymin}\isactrlsub c\ X\ \isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub f\isactrlesub \ X{\isachardoublequoteclose}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj\ X\ f\ f\ X\ {\isacharequal}{\kern0pt}\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj\ X\ f\ f\ X{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}type\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}type\ one{\isacharunderscore}{\kern0pt}separator\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ kern{\isacharunderscore}{\kern0pt}pair{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}iso{\isacharunderscore}{\kern0pt}TFAE{\isadigit{2}}{\isacharcolon}{\kern0pt}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}f{\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Y{\isachardoublequoteclose}\ {\isachardoublequoteopen}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj\ X\ f\ f\ X\ {\isacharequal}{\kern0pt}\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj\ X\ f\ f\ X{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}monomorphism\ f\ {\isasymand}\ isomorphism\ {\isacharparenleft}{\kern0pt}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj\ X\ f\ f\ X{\isacharparenright}{\kern0pt}\ {\isasymand}\ isomorphism\ {\isacharparenleft}{\kern0pt}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj\ X\ f\ f\ X{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\isanewline
\isacommand{proof}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}injective\ f{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{unfolding}\isamarkupfalse%
\ injective{\isacharunderscore}{\kern0pt}def\isanewline
\ \ \isacommand{proof}\isamarkupfalse%
\ auto\isanewline
\ \ \ \ \isacommand{fix}\isamarkupfalse%
\ x\ y\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ x{\isacharunderscore}{\kern0pt}type{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}x\ {\isasymin}\isactrlsub c\ domain\ f{\isachardoublequoteclose}\ \isakeyword{and}\ y{\isacharunderscore}{\kern0pt}type{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}y\ {\isasymin}\isactrlsub c\ domain\ f{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ x{\isacharunderscore}{\kern0pt}type{\isadigit{2}}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}x\ {\isasymin}\isactrlsub c\ X{\isachardoublequoteclose}\ \isakeyword{and}\ y{\isacharunderscore}{\kern0pt}type{\isadigit{2}}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}y\ {\isasymin}\isactrlsub c\ X{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\kern0pt}{\isadigit{1}}{\isacharparenright}{\kern0pt}\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\isanewline
\ \ \ \ \isacommand{have}\isamarkupfalse%
\ x{\isacharunderscore}{\kern0pt}y{\isacharunderscore}{\kern0pt}type{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}{\isasymlangle}x{\isacharcomma}{\kern0pt}y{\isasymrangle}\ {\isacharcolon}{\kern0pt}\ one\ {\isasymrightarrow}\ X\ {\isasymtimes}\isactrlsub c\ X{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ x{\isacharunderscore}{\kern0pt}type{\isadigit{2}}\ y{\isacharunderscore}{\kern0pt}type{\isadigit{2}}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \isacommand{have}\isamarkupfalse%
\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}type{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ f\ X\ {\isacharcolon}{\kern0pt}\ X\ \isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub f\isactrlesub \ X\ {\isasymrightarrow}\ X\ {\isasymtimes}\isactrlsub c\ X{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ typecheck{\isacharunderscore}{\kern0pt}cfuncs\isanewline
\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}f\ {\isasymcirc}\isactrlsub c\ x\ {\isacharequal}{\kern0pt}\ f\ {\isasymcirc}\isactrlsub c\ y{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ factorsthru{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}{\isasymlangle}x{\isacharcomma}{\kern0pt}y{\isasymrangle}\ factorsthru\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ f\ X{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\kern0pt}{\isadigit{1}}{\isacharparenright}{\kern0pt}\ pair{\isacharunderscore}{\kern0pt}factorsthru{\isacharunderscore}{\kern0pt}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ x{\isacharunderscore}{\kern0pt}type{\isadigit{2}}\ y{\isacharunderscore}{\kern0pt}type{\isadigit{2}}\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{obtain}\isamarkupfalse%
\ xy\ \isakeyword{where}\ xy{\isacharunderscore}{\kern0pt}assms{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}xy\ {\isacharcolon}{\kern0pt}\ one\ {\isasymrightarrow}\ X\ \isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub f\isactrlesub \ X{\isachardoublequoteclose}\ {\isachardoublequoteopen}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ f\ X\ {\isasymcirc}\isactrlsub c\ xy\ {\isacharequal}{\kern0pt}\ {\isasymlangle}x{\isacharcomma}{\kern0pt}y{\isasymrangle}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ factors{\isacharunderscore}{\kern0pt}through{\isacharunderscore}{\kern0pt}def{\isadigit{2}}\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}type\ x{\isacharunderscore}{\kern0pt}y{\isacharunderscore}{\kern0pt}type\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\isanewline
\ \ \ \ \isacommand{have}\isamarkupfalse%
\ left{\isacharunderscore}{\kern0pt}proj{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj\ X\ f\ f\ X\ {\isasymcirc}\isactrlsub c\ xy\ {\isacharequal}{\kern0pt}\ x{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{unfolding}\isamarkupfalse%
\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}def\ \isacommand{using}\isamarkupfalse%
\ assms\ xy{\isacharunderscore}{\kern0pt}assms\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharcomma}{\kern0pt}\ metis\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ comp{\isacharunderscore}{\kern0pt}associative\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}cfunc{\isacharunderscore}{\kern0pt}prod\ x{\isacharunderscore}{\kern0pt}type{\isadigit{2}}\ xy{\isacharunderscore}{\kern0pt}assms{\isacharparenleft}{\kern0pt}{\isadigit{2}}{\isacharparenright}{\kern0pt}\ y{\isacharunderscore}{\kern0pt}type{\isadigit{2}}{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \isacommand{have}\isamarkupfalse%
\ right{\isacharunderscore}{\kern0pt}proj{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj\ X\ f\ f\ X\ {\isasymcirc}\isactrlsub c\ xy\ {\isacharequal}{\kern0pt}\ y{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{unfolding}\isamarkupfalse%
\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}def\ \isacommand{using}\isamarkupfalse%
\ assms\ xy{\isacharunderscore}{\kern0pt}assms\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharcomma}{\kern0pt}\ metis\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ comp{\isacharunderscore}{\kern0pt}associative\ right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}cfunc{\isacharunderscore}{\kern0pt}prod\ x{\isacharunderscore}{\kern0pt}type{\isadigit{2}}\ xy{\isacharunderscore}{\kern0pt}assms{\isacharparenleft}{\kern0pt}{\isadigit{2}}{\isacharparenright}{\kern0pt}\ y{\isacharunderscore}{\kern0pt}type{\isadigit{2}}{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \ \ \isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}x\ {\isacharequal}{\kern0pt}\ y{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\kern0pt}{\isadigit{2}}{\isacharparenright}{\kern0pt}\ left{\isacharunderscore}{\kern0pt}proj\ right{\isacharunderscore}{\kern0pt}proj\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}monomorphism\ f{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ injective{\isacharunderscore}{\kern0pt}imp{\isacharunderscore}{\kern0pt}monomorphism\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}diagonal\ X\ factorsthru\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ f\ X{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\kern0pt}{\isadigit{1}}{\isacharparenright}{\kern0pt}\ diagonal{\isacharunderscore}{\kern0pt}def\ id{\isacharunderscore}{\kern0pt}type\ pair{\isacharunderscore}{\kern0pt}factorsthru{\isacharunderscore}{\kern0pt}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ \isacommand{by}\isamarkupfalse%
\ fastforce\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{obtain}\isamarkupfalse%
\ xx\ \isakeyword{where}\ xx{\isacharunderscore}{\kern0pt}assms{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}xx\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ X\ \isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub f\isactrlesub \ X{\isachardoublequoteclose}\ {\isachardoublequoteopen}diagonal\ X\ {\isacharequal}{\kern0pt}\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ f\ X\ {\isasymcirc}\isactrlsub c\ xx{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\kern0pt}{\isadigit{1}}{\isacharparenright}{\kern0pt}\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ diagonal{\isacharunderscore}{\kern0pt}type\ factors{\isacharunderscore}{\kern0pt}through{\isacharunderscore}{\kern0pt}def\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism{\isacharunderscore}{\kern0pt}type\ \isacommand{by}\isamarkupfalse%
\ fastforce\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ eq{\isadigit{1}}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj\ X\ f\ f\ X\ {\isasymcirc}\isactrlsub c\ xx\ {\isacharequal}{\kern0pt}\ id\ X{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}smt\ assms{\isacharparenleft}{\kern0pt}{\isadigit{1}}{\isacharparenright}{\kern0pt}\ comp{\isacharunderscore}{\kern0pt}associative{\isadigit{2}}\ diagonal{\isacharunderscore}{\kern0pt}def\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism{\isacharunderscore}{\kern0pt}type\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}def\ id{\isacharunderscore}{\kern0pt}type\ right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}cfunc{\isacharunderscore}{\kern0pt}prod\ right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}type\ xx{\isacharunderscore}{\kern0pt}assms{\isacharparenright}{\kern0pt}\isanewline
\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ eq{\isadigit{2}}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}xx\ {\isasymcirc}\isactrlsub c\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj\ X\ f\ f\ X\ {\isacharequal}{\kern0pt}\ id\ {\isacharparenleft}{\kern0pt}X\ \isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub f\isactrlesub \ X{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}rule\ one{\isacharunderscore}{\kern0pt}separator{\isacharbrackleft}{\kern0pt}\isakeyword{where}\ X{\isacharequal}{\kern0pt}{\isachardoublequoteopen}X\ \isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub f\isactrlesub \ X{\isachardoublequoteclose}{\isacharcomma}{\kern0pt}\ \isakeyword{where}\ Y{\isacharequal}{\kern0pt}{\isachardoublequoteopen}X\ \isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub f\isactrlesub \ X{\isachardoublequoteclose}{\isacharbrackright}{\kern0pt}{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}xx\ {\isasymcirc}\isactrlsub c\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj\ X\ f\ f\ X\ {\isacharcolon}{\kern0pt}\ X\ \isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub f\isactrlesub \ X\ {\isasymrightarrow}\ X\ \isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub f\isactrlesub \ X{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\kern0pt}{\isadigit{1}}{\isacharparenright}{\kern0pt}\ comp{\isacharunderscore}{\kern0pt}type\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}type\ xx{\isacharunderscore}{\kern0pt}assms\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}id\isactrlsub c\ {\isacharparenleft}{\kern0pt}X\ \isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub f\isactrlesub \ X{\isacharparenright}{\kern0pt}\ {\isacharcolon}{\kern0pt}\ X\ \isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub f\isactrlesub \ X\ {\isasymrightarrow}\ X\ \isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub f\isactrlesub \ X{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}simp\ add{\isacharcolon}{\kern0pt}\ id{\isacharunderscore}{\kern0pt}type{\isacharparenright}{\kern0pt}\isanewline
\ \ \isacommand{next}\isamarkupfalse%
\isanewline
\ \ \ \ \isacommand{fix}\isamarkupfalse%
\ x\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ x{\isacharunderscore}{\kern0pt}type{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}x\ {\isasymin}\isactrlsub c\ X\ \isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub f\isactrlesub \ X{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{obtain}\isamarkupfalse%
\ a\ \isakeyword{where}\ a{\isacharunderscore}{\kern0pt}assms{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}{\isasymlangle}a{\isacharcomma}{\kern0pt}a{\isasymrangle}\ {\isacharequal}{\kern0pt}\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ f\ X\ {\isasymcirc}\isactrlsub c\ x{\isachardoublequoteclose}\ {\isachardoublequoteopen}a\ {\isasymin}\isactrlsub c\ X{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}smt\ assms\ cfunc{\isacharunderscore}{\kern0pt}prod{\isacharunderscore}{\kern0pt}comp\ cfunc{\isacharunderscore}{\kern0pt}prod{\isacharunderscore}{\kern0pt}unique\ comp{\isacharunderscore}{\kern0pt}type\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}def\isanewline
\ \ \ \ \ \ \ \ \ \ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism{\isacharunderscore}{\kern0pt}type\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}def\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}type{\isacharparenright}{\kern0pt}\isanewline
\isanewline
\ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharparenleft}{\kern0pt}xx\ {\isasymcirc}\isactrlsub c\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj\ X\ f\ f\ X{\isacharparenright}{\kern0pt}\ {\isasymcirc}\isactrlsub c\ x\ {\isacharequal}{\kern0pt}\ xx\ {\isasymcirc}\isactrlsub c\ right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ X\ {\isasymcirc}\isactrlsub c\ {\isasymlangle}a{\isacharcomma}{\kern0pt}a{\isasymrangle}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ xx{\isacharunderscore}{\kern0pt}assms\ x{\isacharunderscore}{\kern0pt}type\ a{\isacharunderscore}{\kern0pt}assms\ assms\ comp{\isacharunderscore}{\kern0pt}associative{\isadigit{2}}\isanewline
\ \ \ \ \ \ \isacommand{unfolding}\isamarkupfalse%
\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}def\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharcomma}{\kern0pt}\ auto{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \isacommand{also}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isachardot}{\kern0pt}{\isachardot}{\kern0pt}{\isachardot}{\kern0pt}\ {\isacharequal}{\kern0pt}\ xx\ {\isasymcirc}\isactrlsub c\ a{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ a{\isacharunderscore}{\kern0pt}assms{\isacharparenleft}{\kern0pt}{\isadigit{2}}{\isacharparenright}{\kern0pt}\ right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}cfunc{\isacharunderscore}{\kern0pt}prod\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \ \ \isacommand{also}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isachardot}{\kern0pt}{\isachardot}{\kern0pt}{\isachardot}{\kern0pt}\ {\isacharequal}{\kern0pt}\ x{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharminus}{\kern0pt}\isanewline
\ \ \ \ \ \ \isacommand{have}\isamarkupfalse%
\ f{\isadigit{2}}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}{\isasymforall}c{\isachardot}{\kern0pt}\ c\ {\isacharcolon}{\kern0pt}\ one\ {\isasymrightarrow}\ X\ {\isasymlongrightarrow}\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ f\ X\ {\isasymcirc}\isactrlsub c\ xx\ {\isasymcirc}\isactrlsub c\ c\ {\isacharequal}{\kern0pt}\ diagonal\ X\ {\isasymcirc}\isactrlsub c\ c{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{proof}\isamarkupfalse%
\ auto\isanewline
\ \ \ \ \ \ \ \ \isacommand{fix}\isamarkupfalse%
\ c\isanewline
\ \ \ \ \ \ \ \ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}c\ {\isasymin}\isactrlsub c\ X{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ f\ X\ {\isasymcirc}\isactrlsub c\ xx\ {\isasymcirc}\isactrlsub c\ c\ {\isacharequal}{\kern0pt}\ diagonal\ X\ {\isasymcirc}\isactrlsub c\ c{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ xx{\isacharunderscore}{\kern0pt}assms\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharcomma}{\kern0pt}\ simp\ add{\isacharcolon}{\kern0pt}\ comp{\isacharunderscore}{\kern0pt}associative{\isadigit{2}}\ xx{\isacharunderscore}{\kern0pt}assms{\isacharparenleft}{\kern0pt}{\isadigit{2}}{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\ \ \ \ \ \ \isacommand{have}\isamarkupfalse%
\ f{\isadigit{4}}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}xx\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ codomain\ xx{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ xx{\isacharunderscore}{\kern0pt}assms\ \isacommand{by}\isamarkupfalse%
\ presburger\isanewline
\ \ \ \ \ \ \isacommand{have}\isamarkupfalse%
\ f{\isadigit{5}}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}diagonal\ X\ {\isasymcirc}\isactrlsub c\ a\ {\isacharequal}{\kern0pt}\ {\isasymlangle}a{\isacharcomma}{\kern0pt}a{\isasymrangle}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ a{\isacharunderscore}{\kern0pt}assms\ diag{\isacharunderscore}{\kern0pt}on{\isacharunderscore}{\kern0pt}elements\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \ \ \ \ \isacommand{have}\isamarkupfalse%
\ f{\isadigit{6}}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}codomain\ {\isacharparenleft}{\kern0pt}xx\ {\isasymcirc}\isactrlsub c\ a{\isacharparenright}{\kern0pt}\ {\isacharequal}{\kern0pt}\ codomain\ xx{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ f{\isadigit{4}}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}meson\ a{\isacharunderscore}{\kern0pt}assms\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ comp{\isacharunderscore}{\kern0pt}type{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ f{\isadigit{9}}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}x\ {\isacharcolon}{\kern0pt}\ domain\ x\ {\isasymrightarrow}\ codomain\ xx{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ x{\isacharunderscore}{\kern0pt}type\ xx{\isacharunderscore}{\kern0pt}assms\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \ \ \ \ \isacommand{have}\isamarkupfalse%
\ f{\isadigit{1}}{\isadigit{0}}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}{\isasymforall}c\ ca{\isachardot}{\kern0pt}\ domain\ {\isacharparenleft}{\kern0pt}ca\ {\isasymcirc}\isactrlsub c\ a{\isacharparenright}{\kern0pt}\ {\isacharequal}{\kern0pt}\ one\ {\isasymor}\ {\isasymnot}\ ca\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ c{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}meson\ a{\isacharunderscore}{\kern0pt}assms\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ comp{\isacharunderscore}{\kern0pt}type{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}domain\ {\isasymlangle}a{\isacharcomma}{\kern0pt}a{\isasymrangle}\ {\isacharequal}{\kern0pt}\ one{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ diagonal{\isacharunderscore}{\kern0pt}type\ f{\isadigit{5}}\ \isacommand{by}\isamarkupfalse%
\ force\isanewline
\ \ \ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ f{\isadigit{1}}{\isadigit{1}}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}domain\ x\ {\isacharequal}{\kern0pt}\ one{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ x{\isacharunderscore}{\kern0pt}type\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}xx\ {\isasymcirc}\isactrlsub c\ a\ {\isasymin}\isactrlsub c\ codomain\ xx{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ a{\isacharunderscore}{\kern0pt}assms\ comp{\isacharunderscore}{\kern0pt}type\ f{\isadigit{4}}\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}{\kern0pt}thesis\isanewline
\ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ f{\isadigit{1}}{\isadigit{1}}\ f{\isadigit{9}}\ f{\isadigit{5}}\ f{\isadigit{2}}\ a{\isacharunderscore}{\kern0pt}assms\ assms{\isacharparenleft}{\kern0pt}{\isadigit{1}}{\isacharparenright}{\kern0pt}\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism{\isacharunderscore}{\kern0pt}monomorphism\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism{\isacharunderscore}{\kern0pt}type\ monomorphism{\isacharunderscore}{\kern0pt}def\ x{\isacharunderscore}{\kern0pt}type\isanewline
\ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\ \ \ \ \isacommand{also}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isachardot}{\kern0pt}{\isachardot}{\kern0pt}{\isachardot}{\kern0pt}\ {\isacharequal}{\kern0pt}\ id\isactrlsub c\ {\isacharparenleft}{\kern0pt}X\ \isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub f\isactrlesub \ X{\isacharparenright}{\kern0pt}\ {\isasymcirc}\isactrlsub c\ x{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}metis\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ id{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}unit\ x{\isacharunderscore}{\kern0pt}type{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharparenleft}{\kern0pt}xx\ {\isasymcirc}\isactrlsub c\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj\ X\ f\ f\ X{\isacharparenright}{\kern0pt}\ {\isasymcirc}\isactrlsub c\ x\ {\isacharequal}{\kern0pt}\ id\isactrlsub c\ {\isacharparenleft}{\kern0pt}X\ \isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub f\isactrlesub \ X{\isacharparenright}{\kern0pt}\ {\isasymcirc}\isactrlsub c\ x{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ calculation\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\ \isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}isomorphism\ {\isacharparenleft}{\kern0pt}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj\ X\ f\ f\ X{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{unfolding}\isamarkupfalse%
\ isomorphism{\isacharunderscore}{\kern0pt}def\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\kern0pt}{\isadigit{1}}{\isacharparenright}{\kern0pt}\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ eq{\isadigit{1}}\ eq{\isadigit{2}}\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}type\ xx{\isacharunderscore}{\kern0pt}assms{\isacharparenleft}{\kern0pt}{\isadigit{1}}{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}rule{\isacharunderscore}{\kern0pt}tac\ x{\isacharequal}{\kern0pt}xx\ \isakeyword{in}\ exI{\isacharcomma}{\kern0pt}\ auto{\isacharparenright}{\kern0pt}\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ kern{\isacharunderscore}{\kern0pt}pair{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}iso{\isacharunderscore}{\kern0pt}TFAE{\isadigit{3}}{\isacharcolon}{\kern0pt}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}f{\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Y{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}isomorphism\ {\isacharparenleft}{\kern0pt}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj\ X\ f\ f\ X{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ {\isachardoublequoteopen}isomorphism\ {\isacharparenleft}{\kern0pt}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj\ X\ f\ f\ X{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj\ X\ f\ f\ X\ {\isacharequal}{\kern0pt}\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj\ X\ f\ f\ X{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}{\kern0pt}\isanewline
\ \ \isacommand{obtain}\isamarkupfalse%
\ q{\isadigit{0}}\ \isakeyword{where}\ \isanewline
\ \ \ \ q{\isadigit{0}}{\isacharunderscore}{\kern0pt}assms{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}q{\isadigit{0}}\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ X\ \isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub f\isactrlesub \ X{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ {\isachardoublequoteopen}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj\ X\ f\ f\ X\ {\isasymcirc}\isactrlsub c\ q{\isadigit{0}}\ {\isacharequal}{\kern0pt}\ id\ X{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ {\isachardoublequoteopen}q{\isadigit{0}}\ {\isasymcirc}\isactrlsub c\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj\ X\ f\ f\ X\ {\isacharequal}{\kern0pt}\ id\ {\isacharparenleft}{\kern0pt}X\ \isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub f\isactrlesub \ X{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\kern0pt}{\isadigit{1}}{\isacharcomma}{\kern0pt}{\isadigit{2}}{\isacharparenright}{\kern0pt}\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ isomorphism{\isacharunderscore}{\kern0pt}def\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharcomma}{\kern0pt}\ force{\isacharparenright}{\kern0pt}\isanewline
\isanewline
\ \ \isacommand{obtain}\isamarkupfalse%
\ q{\isadigit{1}}\ \isakeyword{where}\ \isanewline
\ \ \ \ q{\isadigit{1}}{\isacharunderscore}{\kern0pt}assms{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}q{\isadigit{1}}\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ X\ \isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub f\isactrlesub \ X{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ {\isachardoublequoteopen}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj\ X\ f\ f\ X\ {\isasymcirc}\isactrlsub c\ q{\isadigit{1}}\ {\isacharequal}{\kern0pt}\ id\ X{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ {\isachardoublequoteopen}q{\isadigit{1}}\ {\isasymcirc}\isactrlsub c\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj\ X\ f\ f\ X\ {\isacharequal}{\kern0pt}\ id\ {\isacharparenleft}{\kern0pt}X\ \isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub f\isactrlesub \ X{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\kern0pt}{\isadigit{1}}{\isacharcomma}{\kern0pt}{\isadigit{3}}{\isacharparenright}{\kern0pt}\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ isomorphism{\isacharunderscore}{\kern0pt}def\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharcomma}{\kern0pt}\ force{\isacharparenright}{\kern0pt}\isanewline
\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymAnd}x{\isachardot}{\kern0pt}\ x\ {\isasymin}\isactrlsub c\ domain\ f\ {\isasymLongrightarrow}\ q{\isadigit{0}}\ {\isasymcirc}\isactrlsub c\ x\ {\isacharequal}{\kern0pt}\ q{\isadigit{1}}\ {\isasymcirc}\isactrlsub c\ x{\isachardoublequoteclose}\isanewline
\ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharminus}{\kern0pt}\isanewline
\ \ \ \ \isacommand{fix}\isamarkupfalse%
\ x\ \isanewline
\ \ \ \ \isacommand{have}\isamarkupfalse%
\ fxfx{\isacharcolon}{\kern0pt}\ \ {\isachardoublequoteopen}f{\isasymcirc}\isactrlsub c\ x\ {\isacharequal}{\kern0pt}\ f{\isasymcirc}\isactrlsub c\ x{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ x{\isacharunderscore}{\kern0pt}type{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}x\ {\isasymin}\isactrlsub c\ domain\ f{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{have}\isamarkupfalse%
\ factorsthru{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}{\isasymlangle}x{\isacharcomma}{\kern0pt}x{\isasymrangle}\ factorsthru\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ f\ X{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\kern0pt}{\isadigit{1}}{\isacharparenright}{\kern0pt}\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ fxfx\ pair{\isacharunderscore}{\kern0pt}factorsthru{\isacharunderscore}{\kern0pt}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ x{\isacharunderscore}{\kern0pt}type\ \ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{obtain}\isamarkupfalse%
\ xx\ \isakeyword{where}\ xx{\isacharunderscore}{\kern0pt}assms{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}xx\ {\isacharcolon}{\kern0pt}\ one\ {\isasymrightarrow}\ X\ \isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub f\isactrlesub \ X{\isachardoublequoteclose}\ {\isachardoublequoteopen}{\isasymlangle}x{\isacharcomma}{\kern0pt}x{\isasymrangle}\ {\isacharequal}{\kern0pt}\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ f\ X\ {\isasymcirc}\isactrlsub c\ xx{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}smt\ assms{\isacharparenleft}{\kern0pt}{\isadigit{1}}{\isacharparenright}{\kern0pt}\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ diag{\isacharunderscore}{\kern0pt}on{\isacharunderscore}{\kern0pt}elements\ diagonal{\isacharunderscore}{\kern0pt}type\ domain{\isacharunderscore}{\kern0pt}comp\ factors{\isacharunderscore}{\kern0pt}through{\isacharunderscore}{\kern0pt}def\ factorsthru\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism{\isacharunderscore}{\kern0pt}type\ x{\isacharunderscore}{\kern0pt}type{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \ \ \isanewline
\ \ \ \ \isacommand{have}\isamarkupfalse%
\ projection{\isacharunderscore}{\kern0pt}prop{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}q{\isadigit{0}}\ {\isasymcirc}\isactrlsub c\ {\isacharparenleft}{\kern0pt}{\isacharparenleft}{\kern0pt}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj\ X\ f\ f\ X{\isacharparenright}{\kern0pt}{\isasymcirc}\isactrlsub c\ xx{\isacharparenright}{\kern0pt}\ {\isacharequal}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ q{\isadigit{1}}\ {\isasymcirc}\isactrlsub c\ {\isacharparenleft}{\kern0pt}{\isacharparenleft}{\kern0pt}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj\ X\ f\ f\ X{\isacharparenright}{\kern0pt}{\isasymcirc}\isactrlsub c\ xx{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ q{\isadigit{0}}{\isacharunderscore}{\kern0pt}assms\ q{\isadigit{1}}{\isacharunderscore}{\kern0pt}assms\ xx{\isacharunderscore}{\kern0pt}assms\ assms\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharcomma}{\kern0pt}\ simp\ add{\isacharcolon}{\kern0pt}\ comp{\isacharunderscore}{\kern0pt}associative{\isadigit{2}}{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ fun{\isacharunderscore}{\kern0pt}fact{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}x\ {\isacharequal}{\kern0pt}\ {\isacharparenleft}{\kern0pt}{\isacharparenleft}{\kern0pt}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj\ X\ f\ f\ X{\isacharparenright}{\kern0pt}\ {\isasymcirc}\isactrlsub c\ q{\isadigit{1}}{\isacharparenright}{\kern0pt}{\isasymcirc}\isactrlsub c\ {\isacharparenleft}{\kern0pt}{\isacharparenleft}{\kern0pt}{\isacharparenleft}{\kern0pt}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj\ X\ f\ f\ X{\isacharparenright}{\kern0pt}{\isasymcirc}\isactrlsub c\ xx{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}smt\ assms{\isacharparenleft}{\kern0pt}{\isadigit{1}}{\isacharparenright}{\kern0pt}\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ comp{\isacharunderscore}{\kern0pt}associative{\isadigit{2}}\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}def\isanewline
\ \ \ \ \ \ \ \ \ \ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}type\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism{\isacharunderscore}{\kern0pt}type\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}def\isanewline
\ \ \ \ \ \ \ \ \ \ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}type\ id{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}unit{\isadigit{2}}\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}cfunc{\isacharunderscore}{\kern0pt}prod\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}type\isanewline
\ \ \ \ \ \ \ \ \ \ q{\isadigit{1}}{\isacharunderscore}{\kern0pt}assms\ right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}cfunc{\isacharunderscore}{\kern0pt}prod\ right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}type\ x{\isacharunderscore}{\kern0pt}type\ xx{\isacharunderscore}{\kern0pt}assms{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}q{\isadigit{1}}\ \ {\isasymcirc}\isactrlsub c\ {\isacharparenleft}{\kern0pt}{\isacharparenleft}{\kern0pt}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj\ X\ f\ f\ X{\isacharparenright}{\kern0pt}{\isasymcirc}\isactrlsub c\ xx{\isacharparenright}{\kern0pt}\ {\isacharequal}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ q{\isadigit{0}}\ \ {\isasymcirc}\isactrlsub c\ {\isacharparenleft}{\kern0pt}{\isacharparenleft}{\kern0pt}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj\ X\ f\ f\ X{\isacharparenright}{\kern0pt}{\isasymcirc}\isactrlsub c\ xx{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ q{\isadigit{0}}{\isacharunderscore}{\kern0pt}assms\ q{\isadigit{1}}{\isacharunderscore}{\kern0pt}assms\ xx{\isacharunderscore}{\kern0pt}assms\ assms\ \isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharcomma}{\kern0pt}\ smt\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ comp{\isacharunderscore}{\kern0pt}associative{\isadigit{2}}\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}def\isanewline
\ \ \ \ \ \ \ \ \ \ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism{\isacharunderscore}{\kern0pt}type\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}def\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}cfunc{\isacharunderscore}{\kern0pt}prod\isanewline
\ \ \ \ \ \ \ \ \ \ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}type\ projection{\isacharunderscore}{\kern0pt}prop\ right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}cfunc{\isacharunderscore}{\kern0pt}prod\ right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}type\ x{\isacharunderscore}{\kern0pt}type\ xx{\isacharunderscore}{\kern0pt}assms{\isacharparenleft}{\kern0pt}{\isadigit{2}}{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}q{\isadigit{0}}\ {\isasymcirc}\isactrlsub c\ x\ {\isacharequal}{\kern0pt}\ q{\isadigit{1}}\ {\isasymcirc}\isactrlsub c\ x{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}smt\ assms{\isacharparenleft}{\kern0pt}{\isadigit{1}}{\isacharparenright}{\kern0pt}\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ codomain{\isacharunderscore}{\kern0pt}comp\ comp{\isacharunderscore}{\kern0pt}associative\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}type\isanewline
\ \ \ \ \ \ \ \ \ \ fun{\isacharunderscore}{\kern0pt}fact\ id{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}unit{\isadigit{2}}\ q{\isadigit{0}}{\isacharunderscore}{\kern0pt}assms\ q{\isadigit{1}}{\isacharunderscore}{\kern0pt}assms\ xx{\isacharunderscore}{\kern0pt}assms{\isacharparenright}{\kern0pt}\isanewline
\ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}q{\isadigit{0}}\ {\isacharequal}{\kern0pt}\ q{\isadigit{1}}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}metis\ assms{\isacharparenleft}{\kern0pt}{\isadigit{1}}{\isacharparenright}{\kern0pt}\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ one{\isacharunderscore}{\kern0pt}separator{\isacharunderscore}{\kern0pt}contrapos\ q{\isadigit{0}}{\isacharunderscore}{\kern0pt}assms{\isacharparenleft}{\kern0pt}{\isadigit{1}}{\isacharparenright}{\kern0pt}\ q{\isadigit{1}}{\isacharunderscore}{\kern0pt}assms{\isacharparenleft}{\kern0pt}{\isadigit{1}}{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj\ X\ f\ f\ X\ {\isacharequal}{\kern0pt}\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj\ X\ f\ f\ X{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}smt\ assms{\isacharparenleft}{\kern0pt}{\isadigit{1}}{\isacharparenright}{\kern0pt}\ comp{\isacharunderscore}{\kern0pt}associative{\isadigit{2}}\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}type\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}type\isanewline
\ \ \ \ \ \ \ \ id{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}unit{\isadigit{2}}\ id{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}unit{\isadigit{2}}\ q{\isadigit{0}}{\isacharunderscore}{\kern0pt}assms\ q{\isadigit{1}}{\isacharunderscore}{\kern0pt}assms{\isacharparenright}{\kern0pt}\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ terminal{\isacharunderscore}{\kern0pt}fib{\isacharunderscore}{\kern0pt}prod{\isacharunderscore}{\kern0pt}iso{\isacharcolon}{\kern0pt}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}terminal{\isacharunderscore}{\kern0pt}object{\isacharparenleft}{\kern0pt}T{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ f{\isacharunderscore}{\kern0pt}type{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}f\ {\isacharcolon}{\kern0pt}\ Y\ {\isasymrightarrow}\ T{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{assumes}\ g{\isacharunderscore}{\kern0pt}type{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}g\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ T{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isacharparenleft}{\kern0pt}X\ \isactrlbsub g\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub f\isactrlesub \ Y{\isacharparenright}{\kern0pt}\ {\isasymcong}\ X\ {\isasymtimes}\isactrlsub c\ Y{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}{\kern0pt}\ \isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharparenleft}{\kern0pt}is{\isacharunderscore}{\kern0pt}pullback\ {\isacharparenleft}{\kern0pt}X\ \isactrlbsub g\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub f\isactrlesub \ Y{\isacharparenright}{\kern0pt}\ Y\ X\ T\ {\isacharparenleft}{\kern0pt}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj\ X\ g\ f\ Y{\isacharparenright}{\kern0pt}\ f\ {\isacharparenleft}{\kern0pt}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj\ X\ g\ f\ Y{\isacharparenright}{\kern0pt}\ g{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ pullback{\isacharunderscore}{\kern0pt}iff{\isacharunderscore}{\kern0pt}product\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}is{\isacharunderscore}{\kern0pt}pullback\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharcomma}{\kern0pt}\ blast{\isacharparenright}{\kern0pt}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharparenleft}{\kern0pt}is{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}prod\ {\isacharparenleft}{\kern0pt}X\ \isactrlbsub g\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub f\isactrlesub \ Y{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj\ X\ g\ f\ Y{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj\ X\ g\ f\ Y{\isacharparenright}{\kern0pt}\ \ X\ Y{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}meson\ one{\isacharunderscore}{\kern0pt}terminal{\isacharunderscore}{\kern0pt}object\ pullback{\isacharunderscore}{\kern0pt}iff{\isacharunderscore}{\kern0pt}product\ terminal{\isacharunderscore}{\kern0pt}func{\isacharunderscore}{\kern0pt}type{\isacharparenright}{\kern0pt}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}{\kern0pt}thesis\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}metis\ canonical{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}prod{\isacharunderscore}{\kern0pt}is{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}prod\ cart{\isacharunderscore}{\kern0pt}prods{\isacharunderscore}{\kern0pt}isomorphic\ fst{\isacharunderscore}{\kern0pt}conv\ is{\isacharunderscore}{\kern0pt}isomorphic{\isacharunderscore}{\kern0pt}def\ snd{\isacharunderscore}{\kern0pt}conv{\isacharparenright}{\kern0pt}\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
%
\isadelimtheory
\isanewline
%
\endisadelimtheory
%
\isatagtheory
\isacommand{end}\isamarkupfalse%
%
\endisatagtheory
{\isafoldtheory}%
%
\isadelimtheory
%
\endisadelimtheory
%
\end{isabellebody}%
\endinput
%:%file=~/ETCS/HOL-ETCS/Equalizer.thy%:%
%:%10=1%:%
%:%11=1%:%
%:%12=2%:%
%:%13=3%:%
%:%27=5%:%
%:%31=7%:%
%:%41=9%:%
%:%42=9%:%
%:%43=10%:%
%:%45=12%:%
%:%46=13%:%
%:%47=14%:%
%:%48=14%:%
%:%49=15%:%
%:%50=16%:%
%:%51=17%:%
%:%54=18%:%
%:%58=18%:%
%:%59=18%:%
%:%60=18%:%
%:%61=18%:%
%:%66=18%:%
%:%69=19%:%
%:%70=20%:%
%:%71=20%:%
%:%72=21%:%
%:%73=22%:%
%:%74=23%:%
%:%77=24%:%
%:%81=24%:%
%:%82=24%:%
%:%83=24%:%
%:%88=24%:%
%:%91=25%:%
%:%92=26%:%
%:%93=26%:%
%:%94=27%:%
%:%95=28%:%
%:%96=29%:%
%:%97=30%:%
%:%100=31%:%
%:%104=31%:%
%:%105=31%:%
%:%106=31%:%
%:%115=33%:%
%:%117=34%:%
%:%118=34%:%
%:%119=35%:%
%:%120=36%:%
%:%121=37%:%
%:%122=37%:%
%:%123=38%:%
%:%124=39%:%
%:%131=40%:%
%:%132=40%:%
%:%133=41%:%
%:%134=41%:%
%:%135=42%:%
%:%136=42%:%
%:%137=42%:%
%:%138=43%:%
%:%139=43%:%
%:%140=43%:%
%:%141=44%:%
%:%142=44%:%
%:%143=45%:%
%:%144=45%:%
%:%145=46%:%
%:%146=46%:%
%:%147=47%:%
%:%148=47%:%
%:%149=48%:%
%:%150=48%:%
%:%151=49%:%
%:%152=49%:%
%:%153=50%:%
%:%154=50%:%
%:%155=51%:%
%:%156=51%:%
%:%157=52%:%
%:%158=53%:%
%:%159=53%:%
%:%160=54%:%
%:%161=54%:%
%:%162=54%:%
%:%163=55%:%
%:%164=56%:%
%:%165=56%:%
%:%166=57%:%
%:%167=57%:%
%:%168=58%:%
%:%169=59%:%
%:%170=59%:%
%:%171=60%:%
%:%172=61%:%
%:%173=61%:%
%:%174=61%:%
%:%175=62%:%
%:%176=62%:%
%:%177=63%:%
%:%187=65%:%
%:%189=66%:%
%:%190=66%:%
%:%191=67%:%
%:%192=68%:%
%:%199=69%:%
%:%200=69%:%
%:%201=70%:%
%:%202=70%:%
%:%203=71%:%
%:%204=71%:%
%:%205=71%:%
%:%206=72%:%
%:%207=72%:%
%:%208=73%:%
%:%209=73%:%
%:%210=73%:%
%:%211=74%:%
%:%212=75%:%
%:%213=75%:%
%:%214=76%:%
%:%215=76%:%
%:%216=76%:%
%:%217=76%:%
%:%218=77%:%
%:%219=78%:%
%:%220=78%:%
%:%221=79%:%
%:%222=79%:%
%:%223=80%:%
%:%224=80%:%
%:%225=81%:%
%:%226=81%:%
%:%227=82%:%
%:%228=83%:%
%:%229=83%:%
%:%230=84%:%
%:%231=84%:%
%:%232=84%:%
%:%233=85%:%
%:%234=86%:%
%:%235=86%:%
%:%236=87%:%
%:%237=87%:%
%:%238=87%:%
%:%239=88%:%
%:%240=88%:%
%:%241=88%:%
%:%242=89%:%
%:%243=89%:%
%:%244=89%:%
%:%245=90%:%
%:%246=91%:%
%:%247=91%:%
%:%248=92%:%
%:%249=92%:%
%:%250=93%:%
%:%251=93%:%
%:%252=93%:%
%:%253=94%:%
%:%254=94%:%
%:%255=94%:%
%:%256=95%:%
%:%257=96%:%
%:%258=96%:%
%:%259=97%:%
%:%260=97%:%
%:%261=97%:%
%:%262=98%:%
%:%268=98%:%
%:%271=99%:%
%:%272=100%:%
%:%273=100%:%
%:%274=101%:%
%:%275=102%:%
%:%276=103%:%
%:%277=104%:%
%:%278=105%:%
%:%279=106%:%
%:%280=107%:%
%:%287=108%:%
%:%288=108%:%
%:%289=109%:%
%:%290=109%:%
%:%291=110%:%
%:%292=110%:%
%:%293=110%:%
%:%294=111%:%
%:%295=112%:%
%:%296=112%:%
%:%297=113%:%
%:%298=113%:%
%:%299=113%:%
%:%300=114%:%
%:%301=114%:%
%:%302=115%:%
%:%303=115%:%
%:%304=116%:%
%:%305=116%:%
%:%306=117%:%
%:%307=117%:%
%:%308=118%:%
%:%309=118%:%
%:%310=119%:%
%:%311=119%:%
%:%312=120%:%
%:%313=120%:%
%:%314=120%:%
%:%315=121%:%
%:%316=121%:%
%:%317=121%:%
%:%318=122%:%
%:%319=122%:%
%:%320=123%:%
%:%321=123%:%
%:%322=123%:%
%:%323=124%:%
%:%324=124%:%
%:%325=124%:%
%:%326=125%:%
%:%327=125%:%
%:%328=126%:%
%:%329=126%:%
%:%330=127%:%
%:%331=127%:%
%:%332=128%:%
%:%333=128%:%
%:%334=129%:%
%:%335=129%:%
%:%336=130%:%
%:%337=130%:%
%:%338=131%:%
%:%339=131%:%
%:%340=132%:%
%:%341=132%:%
%:%342=132%:%
%:%343=133%:%
%:%344=133%:%
%:%345=134%:%
%:%346=134%:%
%:%347=135%:%
%:%348=135%:%
%:%349=135%:%
%:%350=136%:%
%:%351=136%:%
%:%352=137%:%
%:%362=139%:%
%:%364=140%:%
%:%365=140%:%
%:%366=141%:%
%:%369=142%:%
%:%373=142%:%
%:%374=142%:%
%:%375=143%:%
%:%376=143%:%
%:%377=144%:%
%:%378=144%:%
%:%379=145%:%
%:%380=145%:%
%:%381=146%:%
%:%382=146%:%
%:%383=147%:%
%:%384=147%:%
%:%385=148%:%
%:%386=148%:%
%:%387=149%:%
%:%388=149%:%
%:%389=150%:%
%:%390=150%:%
%:%391=151%:%
%:%392=151%:%
%:%393=152%:%
%:%394=152%:%
%:%395=153%:%
%:%396=153%:%
%:%397=154%:%
%:%398=154%:%
%:%399=154%:%
%:%400=155%:%
%:%401=155%:%
%:%402=155%:%
%:%403=156%:%
%:%404=157%:%
%:%405=157%:%
%:%406=157%:%
%:%407=158%:%
%:%408=159%:%
%:%409=159%:%
%:%410=159%:%
%:%411=160%:%
%:%412=160%:%
%:%413=161%:%
%:%423=163%:%
%:%425=164%:%
%:%426=164%:%
%:%427=165%:%
%:%430=168%:%
%:%432=169%:%
%:%433=169%:%
%:%434=170%:%
%:%435=171%:%
%:%442=172%:%
%:%443=172%:%
%:%444=173%:%
%:%445=173%:%
%:%446=174%:%
%:%447=175%:%
%:%448=176%:%
%:%449=176%:%
%:%450=176%:%
%:%451=177%:%
%:%452=177%:%
%:%453=177%:%
%:%454=178%:%
%:%455=178%:%
%:%456=178%:%
%:%457=179%:%
%:%458=179%:%
%:%459=179%:%
%:%460=180%:%
%:%461=180%:%
%:%462=180%:%
%:%463=181%:%
%:%464=181%:%
%:%465=181%:%
%:%466=182%:%
%:%467=182%:%
%:%468=183%:%
%:%469=183%:%
%:%470=183%:%
%:%471=184%:%
%:%472=184%:%
%:%473=185%:%
%:%474=185%:%
%:%475=185%:%
%:%476=186%:%
%:%477=186%:%
%:%478=187%:%
%:%479=187%:%
%:%480=187%:%
%:%481=188%:%
%:%482=188%:%
%:%483=189%:%
%:%484=189%:%
%:%485=189%:%
%:%486=190%:%
%:%487=190%:%
%:%488=190%:%
%:%489=191%:%
%:%490=191%:%
%:%491=191%:%
%:%492=192%:%
%:%493=192%:%
%:%494=193%:%
%:%509=195%:%
%:%521=197%:%
%:%523=198%:%
%:%524=198%:%
%:%525=199%:%
%:%526=200%:%
%:%527=201%:%
%:%528=201%:%
%:%529=202%:%
%:%530=203%:%
%:%533=204%:%
%:%537=204%:%
%:%538=204%:%
%:%539=204%:%
%:%540=204%:%
%:%549=206%:%
%:%551=207%:%
%:%552=207%:%
%:%553=208%:%
%:%554=209%:%
%:%561=210%:%
%:%562=210%:%
%:%563=211%:%
%:%564=211%:%
%:%565=212%:%
%:%566=212%:%
%:%567=212%:%
%:%568=213%:%
%:%569=213%:%
%:%570=213%:%
%:%571=214%:%
%:%572=214%:%
%:%573=215%:%
%:%574=215%:%
%:%575=216%:%
%:%576=216%:%
%:%577=216%:%
%:%578=217%:%
%:%579=217%:%
%:%580=218%:%
%:%581=218%:%
%:%582=219%:%
%:%592=221%:%
%:%594=222%:%
%:%595=222%:%
%:%596=223%:%
%:%597=224%:%
%:%598=225%:%
%:%599=225%:%
%:%600=226%:%
%:%603=227%:%
%:%607=227%:%
%:%608=227%:%
%:%613=227%:%
%:%616=228%:%
%:%617=229%:%
%:%618=229%:%
%:%619=230%:%
%:%621=232%:%
%:%622=233%:%
%:%623=234%:%
%:%624=234%:%
%:%625=235%:%
%:%626=236%:%
%:%629=237%:%
%:%633=237%:%
%:%634=237%:%
%:%635=237%:%
%:%640=237%:%
%:%643=238%:%
%:%644=239%:%
%:%645=239%:%
%:%648=240%:%
%:%652=240%:%
%:%653=240%:%
%:%654=241%:%
%:%655=241%:%
%:%656=241%:%
%:%665=243%:%
%:%667=244%:%
%:%668=244%:%
%:%669=245%:%
%:%670=246%:%
%:%671=247%:%
%:%672=247%:%
%:%673=248%:%
%:%676=249%:%
%:%680=249%:%
%:%681=249%:%
%:%682=249%:%
%:%691=251%:%
%:%693=252%:%
%:%694=252%:%
%:%695=253%:%
%:%696=254%:%
%:%699=255%:%
%:%703=255%:%
%:%704=255%:%
%:%705=255%:%
%:%706=256%:%
%:%707=256%:%
%:%708=257%:%
%:%709=257%:%
%:%710=258%:%
%:%711=258%:%
%:%712=259%:%
%:%713=259%:%
%:%714=260%:%
%:%715=260%:%
%:%716=261%:%
%:%717=261%:%
%:%718=262%:%
%:%719=262%:%
%:%720=263%:%
%:%721=263%:%
%:%722=264%:%
%:%723=265%:%
%:%724=265%:%
%:%725=266%:%
%:%726=266%:%
%:%727=266%:%
%:%728=267%:%
%:%729=267%:%
%:%730=267%:%
%:%731=268%:%
%:%732=268%:%
%:%733=269%:%
%:%734=269%:%
%:%735=270%:%
%:%736=270%:%
%:%737=271%:%
%:%752=273%:%
%:%764=275%:%
%:%766=276%:%
%:%767=276%:%
%:%768=277%:%
%:%771=280%:%
%:%772=281%:%
%:%773=282%:%
%:%774=282%:%
%:%775=283%:%
%:%776=284%:%
%:%777=285%:%
%:%778=286%:%
%:%785=287%:%
%:%786=287%:%
%:%787=288%:%
%:%788=288%:%
%:%789=289%:%
%:%790=289%:%
%:%791=290%:%
%:%792=290%:%
%:%793=290%:%
%:%794=291%:%
%:%795=291%:%
%:%796=292%:%
%:%797=292%:%
%:%798=292%:%
%:%799=293%:%
%:%800=293%:%
%:%801=294%:%
%:%802=294%:%
%:%803=295%:%
%:%804=295%:%
%:%805=296%:%
%:%806=296%:%
%:%807=296%:%
%:%808=297%:%
%:%809=297%:%
%:%810=298%:%
%:%811=298%:%
%:%812=298%:%
%:%813=299%:%
%:%814=299%:%
%:%818=303%:%
%:%819=304%:%
%:%820=304%:%
%:%821=305%:%
%:%822=305%:%
%:%823=306%:%
%:%824=306%:%
%:%825=307%:%
%:%826=307%:%
%:%827=308%:%
%:%828=308%:%
%:%829=309%:%
%:%830=309%:%
%:%831=309%:%
%:%832=310%:%
%:%833=310%:%
%:%834=310%:%
%:%835=311%:%
%:%836=312%:%
%:%837=312%:%
%:%838=313%:%
%:%839=313%:%
%:%840=313%:%
%:%841=314%:%
%:%842=315%:%
%:%843=315%:%
%:%844=316%:%
%:%845=316%:%
%:%846=317%:%
%:%847=317%:%
%:%848=318%:%
%:%849=318%:%
%:%850=319%:%
%:%851=319%:%
%:%852=320%:%
%:%853=320%:%
%:%854=320%:%
%:%855=321%:%
%:%856=321%:%
%:%857=322%:%
%:%858=322%:%
%:%859=323%:%
%:%860=323%:%
%:%861=324%:%
%:%862=324%:%
%:%863=325%:%
%:%864=325%:%
%:%865=325%:%
%:%866=326%:%
%:%867=326%:%
%:%868=327%:%
%:%869=327%:%
%:%870=327%:%
%:%871=328%:%
%:%872=328%:%
%:%875=331%:%
%:%876=332%:%
%:%877=332%:%
%:%878=332%:%
%:%879=333%:%
%:%880=333%:%
%:%881=334%:%
%:%896=336%:%
%:%908=338%:%
%:%910=339%:%
%:%911=339%:%
%:%912=340%:%
%:%913=341%:%
%:%914=342%:%
%:%915=343%:%
%:%916=343%:%
%:%917=344%:%
%:%918=345%:%
%:%925=346%:%
%:%926=346%:%
%:%927=347%:%
%:%928=347%:%
%:%929=348%:%
%:%930=348%:%
%:%931=349%:%
%:%932=349%:%
%:%933=349%:%
%:%934=350%:%
%:%935=351%:%
%:%936=351%:%
%:%937=351%:%
%:%938=352%:%
%:%939=352%:%
%:%940=352%:%
%:%941=353%:%
%:%942=353%:%
%:%943=353%:%
%:%944=354%:%
%:%950=354%:%
%:%953=355%:%
%:%954=356%:%
%:%955=356%:%
%:%956=357%:%
%:%957=358%:%
%:%958=359%:%
%:%959=360%:%
%:%960=360%:%
%:%961=361%:%
%:%962=362%:%
%:%969=363%:%
%:%970=363%:%
%:%971=364%:%
%:%972=364%:%
%:%973=365%:%
%:%974=365%:%
%:%975=365%:%
%:%976=366%:%
%:%977=366%:%
%:%978=366%:%
%:%979=367%:%
%:%980=368%:%
%:%981=368%:%
%:%982=368%:%
%:%983=368%:%
%:%984=369%:%
%:%985=369%:%
%:%986=369%:%
%:%987=370%:%
%:%988=370%:%
%:%989=370%:%
%:%990=371%:%
%:%996=371%:%
%:%999=372%:%
%:%1000=373%:%
%:%1001=373%:%
%:%1002=374%:%
%:%1003=375%:%
%:%1006=376%:%
%:%1010=376%:%
%:%1011=376%:%
%:%1012=376%:%
%:%1017=376%:%
%:%1020=377%:%
%:%1021=378%:%
%:%1022=378%:%
%:%1023=379%:%
%:%1024=380%:%
%:%1025=381%:%
%:%1028=382%:%
%:%1032=382%:%
%:%1033=382%:%
%:%1034=383%:%
%:%1035=383%:%
%:%1040=383%:%
%:%1043=384%:%
%:%1044=385%:%
%:%1045=385%:%
%:%1046=386%:%
%:%1047=387%:%
%:%1050=388%:%
%:%1054=388%:%
%:%1055=388%:%
%:%1056=388%:%
%:%1065=390%:%
%:%1067=391%:%
%:%1068=391%:%
%:%1069=392%:%
%:%1070=393%:%
%:%1073=394%:%
%:%1077=394%:%
%:%1078=394%:%
%:%1079=395%:%
%:%1080=395%:%
%:%1081=396%:%
%:%1082=396%:%
%:%1083=397%:%
%:%1084=397%:%
%:%1085=398%:%
%:%1086=398%:%
%:%1087=399%:%
%:%1088=399%:%
%:%1089=400%:%
%:%1090=401%:%
%:%1091=401%:%
%:%1092=401%:%
%:%1093=402%:%
%:%1094=403%:%
%:%1095=403%:%
%:%1096=404%:%
%:%1097=404%:%
%:%1098=404%:%
%:%1099=405%:%
%:%1100=406%:%
%:%1101=406%:%
%:%1102=407%:%
%:%1103=407%:%
%:%1104=408%:%
%:%1105=408%:%
%:%1106=408%:%
%:%1107=409%:%
%:%1108=410%:%
%:%1109=410%:%
%:%1110=410%:%
%:%1111=411%:%
%:%1112=411%:%
%:%1113=411%:%
%:%1114=412%:%
%:%1115=412%:%
%:%1116=413%:%
%:%1117=413%:%
%:%1118=414%:%
%:%1119=414%:%
%:%1120=414%:%
%:%1121=415%:%
%:%1122=415%:%
%:%1123=416%:%
%:%1124=416%:%
%:%1125=417%:%
%:%1131=417%:%
%:%1134=418%:%
%:%1135=419%:%
%:%1136=419%:%
%:%1137=420%:%
%:%1138=421%:%
%:%1139=422%:%
%:%1140=422%:%
%:%1141=423%:%
%:%1142=424%:%
%:%1145=425%:%
%:%1149=425%:%
%:%1150=425%:%
%:%1151=425%:%
%:%1152=425%:%
%:%1157=425%:%
%:%1160=426%:%
%:%1161=427%:%
%:%1162=427%:%
%:%1163=428%:%
%:%1164=429%:%
%:%1167=430%:%
%:%1171=430%:%
%:%1172=430%:%
%:%1173=430%:%
%:%1178=430%:%
%:%1181=431%:%
%:%1182=432%:%
%:%1183=432%:%
%:%1184=433%:%
%:%1185=434%:%
%:%1188=435%:%
%:%1192=435%:%
%:%1193=435%:%
%:%1194=435%:%
%:%1199=435%:%
%:%1202=436%:%
%:%1203=437%:%
%:%1204=437%:%
%:%1205=438%:%
%:%1206=439%:%
%:%1209=440%:%
%:%1213=440%:%
%:%1214=440%:%
%:%1215=441%:%
%:%1216=441%:%
%:%1217=442%:%
%:%1218=442%:%
%:%1223=442%:%
%:%1226=443%:%
%:%1227=444%:%
%:%1228=444%:%
%:%1229=445%:%
%:%1230=446%:%
%:%1232=448%:%
%:%1235=449%:%
%:%1239=449%:%
%:%1240=449%:%
%:%1241=449%:%
%:%1242=450%:%
%:%1243=450%:%
%:%1244=451%:%
%:%1245=451%:%
%:%1246=452%:%
%:%1247=452%:%
%:%1248=453%:%
%:%1249=453%:%
%:%1250=454%:%
%:%1251=454%:%
%:%1252=455%:%
%:%1253=455%:%
%:%1254=455%:%
%:%1255=456%:%
%:%1256=457%:%
%:%1257=457%:%
%:%1258=458%:%
%:%1259=459%:%
%:%1260=459%:%
%:%1261=459%:%
%:%1262=460%:%
%:%1263=460%:%
%:%1264=461%:%
%:%1265=461%:%
%:%1266=462%:%
%:%1267=462%:%
%:%1268=463%:%
%:%1269=463%:%
%:%1270=464%:%
%:%1271=465%:%
%:%1272=465%:%
%:%1273=466%:%
%:%1274=466%:%
%:%1275=466%:%
%:%1276=467%:%
%:%1277=467%:%
%:%1278=467%:%
%:%1280=469%:%
%:%1281=470%:%
%:%1282=470%:%
%:%1283=470%:%
%:%1284=470%:%
%:%1285=471%:%
%:%1286=471%:%
%:%1287=471%:%
%:%1289=473%:%
%:%1290=474%:%
%:%1291=474%:%
%:%1292=475%:%
%:%1293=475%:%
%:%1294=475%:%
%:%1295=476%:%
%:%1296=476%:%
%:%1297=477%:%
%:%1298=477%:%
%:%1299=478%:%
%:%1300=479%:%
%:%1301=479%:%
%:%1302=479%:%
%:%1304=481%:%
%:%1305=482%:%
%:%1306=482%:%
%:%1307=483%:%
%:%1308=483%:%
%:%1309=484%:%
%:%1310=484%:%
%:%1311=485%:%
%:%1312=485%:%
%:%1313=486%:%
%:%1314=487%:%
%:%1315=487%:%
%:%1316=488%:%
%:%1317=488%:%
%:%1318=489%:%
%:%1319=489%:%
%:%1320=490%:%
%:%1321=491%:%
%:%1322=491%:%
%:%1323=492%:%
%:%1324=492%:%
%:%1325=493%:%
%:%1326=493%:%
%:%1327=494%:%
%:%1328=494%:%
%:%1329=495%:%
%:%1330=495%:%
%:%1331=496%:%
%:%1332=496%:%
%:%1333=497%:%
%:%1334=497%:%
%:%1335=498%:%
%:%1336=498%:%
%:%1337=499%:%
%:%1338=499%:%
%:%1339=500%:%
%:%1340=501%:%
%:%1341=501%:%
%:%1342=501%:%
%:%1343=502%:%
%:%1344=502%:%
%:%1345=503%:%
%:%1346=503%:%
%:%1347=504%:%
%:%1357=506%:%
%:%1359=507%:%
%:%1360=507%:%
%:%1361=508%:%
%:%1362=509%:%
%:%1369=510%:%
%:%1370=510%:%
%:%1371=511%:%
%:%1372=511%:%
%:%1373=512%:%
%:%1374=512%:%
%:%1375=512%:%
%:%1376=512%:%
%:%1377=513%:%
%:%1378=514%:%
%:%1379=514%:%
%:%1380=515%:%
%:%1381=515%:%
%:%1382=515%:%
%:%1383=516%:%
%:%1384=517%:%
%:%1385=517%:%
%:%1386=517%:%
%:%1387=518%:%
%:%1388=518%:%
%:%1389=518%:%
%:%1390=519%:%
%:%1391=519%:%
%:%1392=519%:%
%:%1393=520%:%
%:%1394=520%:%
%:%1395=520%:%
%:%1396=521%:%
%:%1397=521%:%
%:%1398=521%:%
%:%1399=522%:%
%:%1400=522%:%
%:%1401=522%:%
%:%1402=523%:%
%:%1403=523%:%
%:%1404=523%:%
%:%1405=524%:%
%:%1406=524%:%
%:%1407=524%:%
%:%1408=525%:%
%:%1409=525%:%
%:%1410=525%:%
%:%1411=526%:%
%:%1412=526%:%
%:%1413=526%:%
%:%1414=527%:%
%:%1415=527%:%
%:%1416=527%:%
%:%1417=528%:%
%:%1418=528%:%
%:%1419=529%:%
%:%1420=530%:%
%:%1421=530%:%
%:%1422=530%:%
%:%1423=531%:%
%:%1424=531%:%
%:%1425=531%:%
%:%1426=531%:%
%:%1427=532%:%
%:%1428=532%:%
%:%1429=533%:%
%:%1430=533%:%
%:%1431=534%:%
%:%1432=534%:%
%:%1433=534%:%
%:%1434=534%:%
%:%1435=535%:%
%:%1436=536%:%
%:%1437=536%:%
%:%1438=537%:%
%:%1439=537%:%
%:%1440=537%:%
%:%1441=538%:%
%:%1442=538%:%
%:%1443=538%:%
%:%1444=539%:%
%:%1445=539%:%
%:%1446=539%:%
%:%1447=540%:%
%:%1448=540%:%
%:%1449=541%:%
%:%1450=541%:%
%:%1451=541%:%
%:%1452=542%:%
%:%1453=542%:%
%:%1454=542%:%
%:%1456=544%:%
%:%1457=545%:%
%:%1458=545%:%
%:%1459=545%:%
%:%1460=545%:%
%:%1461=546%:%
%:%1462=546%:%
%:%1463=546%:%
%:%1464=547%:%
%:%1465=547%:%
%:%1466=547%:%
%:%1467=548%:%
%:%1468=548%:%
%:%1469=548%:%
%:%1470=549%:%
%:%1471=549%:%
%:%1472=549%:%
%:%1473=550%:%
%:%1474=550%:%
%:%1475=551%:%
%:%1490=553%:%
%:%1502=555%:%
%:%1504=556%:%
%:%1505=556%:%
%:%1506=557%:%
%:%1507=558%:%
%:%1508=559%:%
%:%1509=560%:%
%:%1510=560%:%
%:%1511=561%:%
%:%1512=562%:%
%:%1519=563%:%
%:%1520=563%:%
%:%1521=564%:%
%:%1522=564%:%
%:%1523=565%:%
%:%1524=565%:%
%:%1525=565%:%
%:%1526=566%:%
%:%1527=566%:%
%:%1528=566%:%
%:%1529=567%:%
%:%1530=568%:%
%:%1531=568%:%
%:%1532=568%:%
%:%1533=569%:%
%:%1534=569%:%
%:%1535=569%:%
%:%1536=570%:%
%:%1537=571%:%
%:%1538=571%:%
%:%1539=571%:%
%:%1540=572%:%
%:%1541=572%:%
%:%1542=572%:%
%:%1543=573%:%
%:%1544=573%:%
%:%1545=574%:%
%:%1551=574%:%
%:%1554=575%:%
%:%1555=576%:%
%:%1556=576%:%
%:%1557=577%:%
%:%1558=578%:%
%:%1559=579%:%
%:%1560=580%:%
%:%1561=580%:%
%:%1562=581%:%
%:%1563=582%:%
%:%1570=583%:%
%:%1571=583%:%
%:%1572=584%:%
%:%1573=584%:%
%:%1574=585%:%
%:%1575=586%:%
%:%1576=586%:%
%:%1577=586%:%
%:%1578=587%:%
%:%1579=587%:%
%:%1580=587%:%
%:%1581=588%:%
%:%1582=589%:%
%:%1583=589%:%
%:%1584=589%:%
%:%1585=590%:%
%:%1586=590%:%
%:%1587=590%:%
%:%1588=591%:%
%:%1589=591%:%
%:%1590=592%:%
%:%1596=592%:%
%:%1599=593%:%
%:%1600=594%:%
%:%1601=594%:%
%:%1602=595%:%
%:%1603=596%:%
%:%1606=597%:%
%:%1610=597%:%
%:%1611=597%:%
%:%1612=597%:%
%:%1617=597%:%
%:%1620=598%:%
%:%1621=599%:%
%:%1622=599%:%
%:%1623=600%:%
%:%1624=601%:%
%:%1627=602%:%
%:%1631=602%:%
%:%1632=602%:%
%:%1633=602%:%
%:%1638=602%:%
%:%1641=603%:%
%:%1642=604%:%
%:%1643=604%:%
%:%1644=605%:%
%:%1645=606%:%
%:%1646=607%:%
%:%1647=607%:%
%:%1648=608%:%
%:%1649=609%:%
%:%1652=610%:%
%:%1656=610%:%
%:%1657=610%:%
%:%1662=610%:%
%:%1665=611%:%
%:%1666=612%:%
%:%1667=612%:%
%:%1668=613%:%
%:%1669=614%:%
%:%1670=615%:%
%:%1671=615%:%
%:%1672=616%:%
%:%1673=617%:%
%:%1676=618%:%
%:%1680=618%:%
%:%1681=618%:%
%:%1686=618%:%
%:%1689=619%:%
%:%1690=620%:%
%:%1691=620%:%
%:%1692=621%:%
%:%1693=622%:%
%:%1696=623%:%
%:%1700=623%:%
%:%1701=623%:%
%:%1702=624%:%
%:%1703=624%:%
%:%1704=625%:%
%:%1705=625%:%
%:%1706=626%:%
%:%1707=626%:%
%:%1708=626%:%
%:%1709=627%:%
%:%1710=628%:%
%:%1711=628%:%
%:%1712=629%:%
%:%1713=629%:%
%:%1714=629%:%
%:%1715=630%:%
%:%1716=630%:%
%:%1717=630%:%
%:%1718=631%:%
%:%1719=631%:%
%:%1720=631%:%
%:%1721=632%:%
%:%1722=632%:%
%:%1723=632%:%
%:%1724=633%:%
%:%1725=633%:%
%:%1726=633%:%
%:%1727=634%:%
%:%1728=635%:%
%:%1729=635%:%
%:%1730=636%:%
%:%1736=636%:%
%:%1739=637%:%
%:%1740=638%:%
%:%1741=638%:%
%:%1742=639%:%
%:%1743=640%:%
%:%1746=641%:%
%:%1750=641%:%
%:%1751=641%:%
%:%1752=642%:%
%:%1753=642%:%
%:%1754=643%:%
%:%1755=643%:%
%:%1756=644%:%
%:%1757=644%:%
%:%1758=645%:%
%:%1759=645%:%
%:%1760=646%:%
%:%1761=646%:%
%:%1762=647%:%
%:%1763=647%:%
%:%1764=648%:%
%:%1765=648%:%
%:%1766=649%:%
%:%1767=649%:%
%:%1768=650%:%
%:%1769=650%:%
%:%1770=651%:%
%:%1771=651%:%
%:%1772=652%:%
%:%1773=653%:%
%:%1774=653%:%
%:%1775=654%:%
%:%1776=654%:%
%:%1777=654%:%
%:%1778=655%:%
%:%1779=655%:%
%:%1780=655%:%
%:%1781=656%:%
%:%1782=656%:%
%:%1783=657%:%
%:%1784=657%:%
%:%1785=657%:%
%:%1786=658%:%
%:%1787=659%:%
%:%1788=659%:%
%:%1789=660%:%
%:%1790=660%:%
%:%1791=661%:%
%:%1792=661%:%
%:%1793=662%:%
%:%1794=662%:%
%:%1795=663%:%
%:%1796=664%:%
%:%1797=664%:%
%:%1798=665%:%
%:%1799=666%:%
%:%1800=666%:%
%:%1801=667%:%
%:%1802=667%:%
%:%1803=668%:%
%:%1804=669%:%
%:%1805=669%:%
%:%1806=670%:%
%:%1807=671%:%
%:%1808=671%:%
%:%1809=672%:%
%:%1810=672%:%
%:%1811=673%:%
%:%1812=673%:%
%:%1813=674%:%
%:%1814=674%:%
%:%1815=675%:%
%:%1816=675%:%
%:%1817=676%:%
%:%1818=676%:%
%:%1819=677%:%
%:%1820=677%:%
%:%1821=678%:%
%:%1822=678%:%
%:%1823=678%:%
%:%1824=679%:%
%:%1825=680%:%
%:%1826=680%:%
%:%1827=680%:%
%:%1828=681%:%
%:%1829=681%:%
%:%1830=682%:%
%:%1831=682%:%
%:%1832=683%:%
%:%1833=683%:%
%:%1834=683%:%
%:%1835=684%:%
%:%1836=685%:%
%:%1837=685%:%
%:%1838=685%:%
%:%1839=686%:%
%:%1840=686%:%
%:%1841=687%:%
%:%1842=688%:%
%:%1843=688%:%
%:%1844=689%:%
%:%1845=689%:%
%:%1846=689%:%
%:%1847=690%:%
%:%1848=691%:%
%:%1849=691%:%
%:%1850=692%:%
%:%1851=692%:%
%:%1852=693%:%
%:%1853=693%:%
%:%1854=694%:%
%:%1855=694%:%
%:%1856=694%:%
%:%1857=695%:%
%:%1858=695%:%
%:%1859=696%:%
%:%1860=696%:%
%:%1861=697%:%
%:%1862=697%:%
%:%1863=698%:%
%:%1869=698%:%
%:%1872=699%:%
%:%1873=700%:%
%:%1874=700%:%
%:%1875=701%:%
%:%1876=702%:%
%:%1879=703%:%
%:%1883=703%:%
%:%1884=703%:%
%:%1885=704%:%
%:%1886=704%:%
%:%1887=704%:%
%:%1892=704%:%
%:%1895=705%:%
%:%1896=706%:%
%:%1897=706%:%
%:%1898=707%:%
%:%1899=708%:%
%:%1906=709%:%
%:%1907=709%:%
%:%1908=710%:%
%:%1909=710%:%
%:%1910=711%:%
%:%1911=711%:%
%:%1912=711%:%
%:%1913=712%:%
%:%1914=713%:%
%:%1915=713%:%
%:%1916=714%:%
%:%1917=714%:%
%:%1918=714%:%
%:%1919=715%:%
%:%1920=716%:%
%:%1921=716%:%
%:%1922=717%:%
%:%1923=717%:%
%:%1924=718%:%
%:%1925=718%:%
%:%1926=719%:%
%:%1927=719%:%
%:%1928=720%:%
%:%1929=721%:%
%:%1930=721%:%
%:%1931=722%:%
%:%1932=722%:%
%:%1933=723%:%
%:%1934=723%:%
%:%1935=724%:%
%:%1936=724%:%
%:%1937=725%:%
%:%1938=726%:%
%:%1939=726%:%
%:%1940=727%:%
%:%1941=727%:%
%:%1942=727%:%
%:%1943=728%:%
%:%1944=728%:%
%:%1945=728%:%
%:%1946=729%:%
%:%1947=729%:%
%:%1948=729%:%
%:%1949=730%:%
%:%1950=730%:%
%:%1951=731%:%
%:%1952=731%:%
%:%1953=732%:%
%:%1954=732%:%
%:%1955=733%:%
%:%1956=733%:%
%:%1957=734%:%
%:%1958=734%:%
%:%1959=735%:%
%:%1960=735%:%
%:%1961=736%:%
%:%1962=736%:%
%:%1963=736%:%
%:%1964=737%:%
%:%1965=737%:%
%:%1966=738%:%
%:%1967=738%:%
%:%1968=738%:%
%:%1969=739%:%
%:%1970=739%:%
%:%1971=740%:%
%:%1972=740%:%
%:%1973=740%:%
%:%1974=741%:%
%:%1975=742%:%
%:%1976=742%:%
%:%1979=745%:%
%:%1980=746%:%
%:%1981=746%:%
%:%1982=746%:%
%:%1983=746%:%
%:%1984=747%:%
%:%1985=748%:%
%:%1986=748%:%
%:%1987=749%:%
%:%1988=750%:%
%:%1989=750%:%
%:%1990=750%:%
%:%1991=751%:%
%:%1992=751%:%
%:%1993=752%:%
%:%1994=753%:%
%:%1995=753%:%
%:%1996=754%:%
%:%1997=754%:%
%:%1998=755%:%
%:%1999=755%:%
%:%2000=755%:%
%:%2001=756%:%
%:%2002=757%:%
%:%2003=757%:%
%:%2004=758%:%
%:%2005=758%:%
%:%2006=759%:%
%:%2007=759%:%
%:%2008=759%:%
%:%2009=760%:%
%:%2010=761%:%
%:%2011=761%:%
%:%2012=762%:%
%:%2013=762%:%
%:%2014=763%:%
%:%2015=763%:%
%:%2016=763%:%
%:%2017=764%:%
%:%2018=765%:%
%:%2019=765%:%
%:%2020=766%:%
%:%2021=766%:%
%:%2022=766%:%
%:%2023=767%:%
%:%2024=767%:%
%:%2025=768%:%
%:%2026=768%:%
%:%2027=769%:%
%:%2033=769%:%
%:%2036=770%:%
%:%2037=771%:%
%:%2038=771%:%
%:%2039=772%:%
%:%2040=773%:%
%:%2041=774%:%
%:%2048=775%:%
%:%2049=775%:%
%:%2050=776%:%
%:%2051=776%:%
%:%2052=777%:%
%:%2053=777%:%
%:%2054=778%:%
%:%2055=778%:%
%:%2056=779%:%
%:%2057=779%:%
%:%2058=780%:%
%:%2059=780%:%
%:%2060=780%:%
%:%2061=781%:%
%:%2062=782%:%
%:%2063=782%:%
%:%2064=783%:%
%:%2065=784%:%
%:%2066=784%:%
%:%2067=785%:%
%:%2068=785%:%
%:%2069=786%:%
%:%2070=786%:%
%:%2071=787%:%
%:%2072=788%:%
%:%2073=788%:%
%:%2074=789%:%
%:%2075=789%:%
%:%2076=790%:%
%:%2077=790%:%
%:%2078=791%:%
%:%2079=792%:%
%:%2080=792%:%
%:%2081=792%:%
%:%2082=793%:%
%:%2083=793%:%
%:%2084=793%:%
%:%2085=794%:%
%:%2091=794%:%
%:%2094=795%:%
%:%2095=796%:%
%:%2096=796%:%
%:%2097=797%:%
%:%2098=798%:%
%:%2101=799%:%
%:%2105=799%:%
%:%2106=799%:%
%:%2107=799%:%
%:%2116=801%:%
%:%2118=802%:%
%:%2119=802%:%
%:%2120=803%:%
%:%2121=804%:%
%:%2128=805%:%
%:%2129=805%:%
%:%2130=806%:%
%:%2131=806%:%
%:%2132=807%:%
%:%2133=807%:%
%:%2134=808%:%
%:%2135=808%:%
%:%2136=808%:%
%:%2137=809%:%
%:%2138=809%:%
%:%2139=810%:%
%:%2140=810%:%
%:%2141=811%:%
%:%2142=811%:%
%:%2143=812%:%
%:%2144=812%:%
%:%2145=812%:%
%:%2146=813%:%
%:%2147=813%:%
%:%2148=813%:%
%:%2149=814%:%
%:%2150=814%:%
%:%2151=814%:%
%:%2152=815%:%
%:%2153=815%:%
%:%2154=815%:%
%:%2155=816%:%
%:%2156=816%:%
%:%2157=817%:%
%:%2158=817%:%
%:%2159=818%:%
%:%2160=818%:%
%:%2161=818%:%
%:%2162=819%:%
%:%2163=819%:%
%:%2164=819%:%
%:%2165=820%:%
%:%2171=820%:%
%:%2174=821%:%
%:%2175=822%:%
%:%2176=822%:%
%:%2177=823%:%
%:%2178=824%:%
%:%2181=825%:%
%:%2185=825%:%
%:%2186=825%:%
%:%2187=826%:%
%:%2188=826%:%
%:%2189=827%:%
%:%2190=827%:%
%:%2191=828%:%
%:%2192=828%:%
%:%2193=829%:%
%:%2194=829%:%
%:%2195=830%:%
%:%2196=830%:%
%:%2197=831%:%
%:%2198=831%:%
%:%2199=832%:%
%:%2200=832%:%
%:%2201=832%:%
%:%2202=833%:%
%:%2203=833%:%
%:%2204=833%:%
%:%2205=834%:%
%:%2206=835%:%
%:%2207=835%:%
%:%2208=836%:%
%:%2209=836%:%
%:%2210=836%:%
%:%2211=837%:%
%:%2212=837%:%
%:%2213=838%:%
%:%2214=838%:%
%:%2215=838%:%
%:%2216=839%:%
%:%2217=840%:%
%:%2218=840%:%
%:%2219=841%:%
%:%2220=841%:%
%:%2221=841%:%
%:%2222=842%:%
%:%2223=842%:%
%:%2224=842%:%
%:%2225=843%:%
%:%2226=843%:%
%:%2227=843%:%
%:%2228=844%:%
%:%2229=844%:%
%:%2230=844%:%
%:%2231=845%:%
%:%2232=846%:%
%:%2233=846%:%
%:%2234=847%:%
%:%2235=847%:%
%:%2236=847%:%
%:%2237=848%:%
%:%2238=848%:%
%:%2239=849%:%
%:%2240=849%:%
%:%2241=850%:%
%:%2242=850%:%
%:%2243=850%:%
%:%2244=851%:%
%:%2245=851%:%
%:%2246=852%:%
%:%2247=853%:%
%:%2248=853%:%
%:%2249=854%:%
%:%2250=854%:%
%:%2251=854%:%
%:%2252=855%:%
%:%2253=855%:%
%:%2254=856%:%
%:%2255=856%:%
%:%2256=856%:%
%:%2257=857%:%
%:%2258=857%:%
%:%2259=857%:%
%:%2260=858%:%
%:%2261=858%:%
%:%2262=859%:%
%:%2263=859%:%
%:%2264=860%:%
%:%2265=860%:%
%:%2266=860%:%
%:%2267=861%:%
%:%2268=861%:%
%:%2269=861%:%
%:%2270=862%:%
%:%2271=862%:%
%:%2272=862%:%
%:%2273=863%:%
%:%2274=863%:%
%:%2275=864%:%
%:%2276=864%:%
%:%2277=865%:%
%:%2278=866%:%
%:%2279=866%:%
%:%2280=867%:%
%:%2281=867%:%
%:%2282=868%:%
%:%2283=868%:%
%:%2284=869%:%
%:%2285=869%:%
%:%2286=869%:%
%:%2287=870%:%
%:%2288=870%:%
%:%2289=871%:%
%:%2290=871%:%
%:%2291=872%:%
%:%2292=872%:%
%:%2293=873%:%
%:%2294=873%:%
%:%2295=874%:%
%:%2296=874%:%
%:%2297=875%:%
%:%2298=875%:%
%:%2299=875%:%
%:%2300=876%:%
%:%2301=876%:%
%:%2302=877%:%
%:%2303=878%:%
%:%2304=879%:%
%:%2305=879%:%
%:%2306=880%:%
%:%2307=880%:%
%:%2308=881%:%
%:%2309=881%:%
%:%2310=882%:%
%:%2311=882%:%
%:%2312=883%:%
%:%2313=883%:%
%:%2314=883%:%
%:%2315=884%:%
%:%2316=884%:%
%:%2317=884%:%
%:%2318=885%:%
%:%2319=885%:%
%:%2320=885%:%
%:%2321=886%:%
%:%2322=886%:%
%:%2323=887%:%
%:%2324=887%:%
%:%2325=888%:%
%:%2326=888%:%
%:%2327=889%:%
%:%2328=889%:%
%:%2329=890%:%
%:%2330=890%:%
%:%2331=891%:%
%:%2332=891%:%
%:%2333=891%:%
%:%2334=892%:%
%:%2335=892%:%
%:%2336=892%:%
%:%2337=893%:%
%:%2338=893%:%
%:%2339=894%:%
%:%2340=894%:%
%:%2341=895%:%
%:%2342=895%:%
%:%2343=895%:%
%:%2344=896%:%
%:%2345=896%:%
%:%2346=897%:%
%:%2347=897%:%
%:%2348=897%:%
%:%2349=898%:%
%:%2350=898%:%
%:%2351=899%:%
%:%2352=899%:%
%:%2353=899%:%
%:%2354=900%:%
%:%2355=900%:%
%:%2356=900%:%
%:%2357=901%:%
%:%2358=901%:%
%:%2359=901%:%
%:%2360=902%:%
%:%2361=902%:%
%:%2362=903%:%
%:%2363=903%:%
%:%2364=904%:%
%:%2365=904%:%
%:%2366=904%:%
%:%2367=905%:%
%:%2368=905%:%
%:%2369=905%:%
%:%2370=906%:%
%:%2371=906%:%
%:%2372=906%:%
%:%2373=907%:%
%:%2374=907%:%
%:%2375=907%:%
%:%2376=908%:%
%:%2377=908%:%
%:%2378=909%:%
%:%2379=909%:%
%:%2380=909%:%
%:%2381=910%:%
%:%2382=910%:%
%:%2383=910%:%
%:%2384=911%:%
%:%2385=911%:%
%:%2386=912%:%
%:%2387=913%:%
%:%2388=913%:%
%:%2389=914%:%
%:%2390=914%:%
%:%2391=915%:%
%:%2392=915%:%
%:%2393=915%:%
%:%2394=916%:%
%:%2395=916%:%
%:%2396=917%:%
%:%2397=917%:%
%:%2398=917%:%
%:%2399=918%:%
%:%2400=918%:%
%:%2401=918%:%
%:%2402=919%:%
%:%2403=919%:%
%:%2404=920%:%
%:%2405=921%:%
%:%2406=921%:%
%:%2407=922%:%
%:%2408=922%:%
%:%2409=923%:%
%:%2410=923%:%
%:%2411=924%:%
%:%2412=924%:%
%:%2413=925%:%
%:%2419=925%:%
%:%2422=926%:%
%:%2423=927%:%
%:%2424=927%:%
%:%2425=928%:%
%:%2426=929%:%
%:%2427=930%:%
%:%2434=931%:%
%:%2435=931%:%
%:%2436=932%:%
%:%2437=932%:%
%:%2438=933%:%
%:%2439=934%:%
%:%2440=935%:%
%:%2441=936%:%
%:%2442=936%:%
%:%2443=936%:%
%:%2444=937%:%
%:%2445=938%:%
%:%2446=938%:%
%:%2447=939%:%
%:%2448=940%:%
%:%2449=941%:%
%:%2450=942%:%
%:%2451=942%:%
%:%2452=942%:%
%:%2453=943%:%
%:%2454=944%:%
%:%2455=944%:%
%:%2456=945%:%
%:%2457=945%:%
%:%2458=946%:%
%:%2459=946%:%
%:%2460=947%:%
%:%2461=947%:%
%:%2462=948%:%
%:%2463=948%:%
%:%2464=949%:%
%:%2465=949%:%
%:%2466=950%:%
%:%2467=950%:%
%:%2468=951%:%
%:%2469=951%:%
%:%2470=951%:%
%:%2471=952%:%
%:%2472=952%:%
%:%2473=952%:%
%:%2474=953%:%
%:%2475=953%:%
%:%2476=954%:%
%:%2477=955%:%
%:%2478=955%:%
%:%2479=956%:%
%:%2480=957%:%
%:%2481=957%:%
%:%2482=957%:%
%:%2483=958%:%
%:%2484=958%:%
%:%2485=958%:%
%:%2486=959%:%
%:%2487=959%:%
%:%2488=960%:%
%:%2489=961%:%
%:%2490=962%:%
%:%2491=963%:%
%:%2492=963%:%
%:%2493=963%:%
%:%2494=964%:%
%:%2495=965%:%
%:%2496=965%:%
%:%2497=966%:%
%:%2498=966%:%
%:%2499=967%:%
%:%2500=968%:%
%:%2501=969%:%
%:%2502=969%:%
%:%2503=969%:%
%:%2504=970%:%
%:%2505=971%:%
%:%2506=971%:%
%:%2507=972%:%
%:%2508=973%:%
%:%2509=973%:%
%:%2510=974%:%
%:%2511=974%:%
%:%2512=974%:%
%:%2513=975%:%
%:%2514=975%:%
%:%2515=976%:%
%:%2516=976%:%
%:%2517=976%:%
%:%2518=977%:%
%:%2519=977%:%
%:%2520=978%:%
%:%2521=979%:%
%:%2527=979%:%
%:%2530=980%:%
%:%2531=981%:%
%:%2532=981%:%
%:%2533=982%:%
%:%2534=983%:%
%:%2535=984%:%
%:%2536=985%:%
%:%2543=986%:%
%:%2544=986%:%
%:%2545=987%:%
%:%2546=987%:%
%:%2547=988%:%
%:%2548=988%:%
%:%2549=988%:%
%:%2550=989%:%
%:%2551=989%:%
%:%2552=989%:%
%:%2553=990%:%
%:%2554=990%:%
%:%2555=990%:%
%:%2556=991%:%
%:%2557=991%:%
%:%2558=991%:%
%:%2559=992%:%
%:%2560=992%:%
%:%2561=992%:%
%:%2562=993%:%
%:%2568=993%:%
%:%2573=994%:%
%:%2578=995%:%
