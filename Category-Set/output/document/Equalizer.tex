%
\begin{isabellebody}%
\setisabellecontext{Equalizer}%
%
\isadelimdocument
%
\endisadelimdocument
%
\isatagdocument
%
\isamarkupsection{Equalizers and Subobjects%
}
\isamarkuptrue%
%
\endisatagdocument
{\isafolddocument}%
%
\isadelimdocument
%
\endisadelimdocument
%
\isadelimtheory
%
\endisadelimtheory
%
\isatagtheory
\isacommand{theory}\isamarkupfalse%
\ Equalizer\isanewline
\ \ \isakeyword{imports}\ Terminal\isanewline
\isakeyword{begin}%
\endisatagtheory
{\isafoldtheory}%
%
\isadelimtheory
%
\endisadelimtheory
%
\isadelimdocument
%
\endisadelimdocument
%
\isatagdocument
%
\isamarkupsubsection{Equalizers%
}
\isamarkuptrue%
%
\endisatagdocument
{\isafolddocument}%
%
\isadelimdocument
%
\endisadelimdocument
\isacommand{definition}\isamarkupfalse%
\ equalizer\ {\isacharcolon}{\kern0pt}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}cset\ {\isasymRightarrow}\ cfunc\ {\isasymRightarrow}\ cfunc\ {\isasymRightarrow}\ cfunc\ {\isasymRightarrow}\ bool{\isachardoublequoteclose}\ \isakeyword{where}\isanewline
\ \ {\isachardoublequoteopen}equalizer\ E\ m\ f\ g\ {\isasymlongleftrightarrow}\ {\isacharparenleft}{\kern0pt}{\isasymexists}\ X\ Y{\isachardot}{\kern0pt}\ {\isacharparenleft}{\kern0pt}f\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Y{\isacharparenright}{\kern0pt}\ {\isasymand}\ {\isacharparenleft}{\kern0pt}g\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Y{\isacharparenright}{\kern0pt}\ {\isasymand}\ {\isacharparenleft}{\kern0pt}m\ {\isacharcolon}{\kern0pt}\ E\ {\isasymrightarrow}\ X{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ {\isasymand}\ {\isacharparenleft}{\kern0pt}f\ {\isasymcirc}\isactrlsub c\ m\ {\isacharequal}{\kern0pt}\ g\ {\isasymcirc}\isactrlsub c\ m{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ {\isasymand}\ {\isacharparenleft}{\kern0pt}{\isasymforall}\ h\ F{\isachardot}{\kern0pt}\ {\isacharparenleft}{\kern0pt}{\isacharparenleft}{\kern0pt}h\ {\isacharcolon}{\kern0pt}\ F\ {\isasymrightarrow}\ X{\isacharparenright}{\kern0pt}\ {\isasymand}\ {\isacharparenleft}{\kern0pt}f\ {\isasymcirc}\isactrlsub c\ h\ {\isacharequal}{\kern0pt}\ g\ {\isasymcirc}\isactrlsub c\ h{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}\ {\isasymlongrightarrow}\ {\isacharparenleft}{\kern0pt}{\isasymexists}{\isacharbang}{\kern0pt}\ k{\isachardot}{\kern0pt}\ {\isacharparenleft}{\kern0pt}k\ {\isacharcolon}{\kern0pt}\ F\ {\isasymrightarrow}\ E{\isacharparenright}{\kern0pt}\ {\isasymand}\ m\ {\isasymcirc}\isactrlsub c\ k\ {\isacharequal}{\kern0pt}\ h{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ equalizer{\isacharunderscore}{\kern0pt}def{\isadigit{2}}{\isacharcolon}{\kern0pt}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}f\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Y{\isachardoublequoteclose}\ {\isachardoublequoteopen}g\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Y{\isachardoublequoteclose}\ {\isachardoublequoteopen}m\ {\isacharcolon}{\kern0pt}\ E\ {\isasymrightarrow}\ X{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}equalizer\ E\ m\ f\ g\ {\isasymlongleftrightarrow}\ {\isacharparenleft}{\kern0pt}{\isacharparenleft}{\kern0pt}f\ {\isasymcirc}\isactrlsub c\ m\ {\isacharequal}{\kern0pt}\ g\ {\isasymcirc}\isactrlsub c\ m{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ {\isasymand}\ {\isacharparenleft}{\kern0pt}{\isasymforall}\ h\ F{\isachardot}{\kern0pt}\ {\isacharparenleft}{\kern0pt}{\isacharparenleft}{\kern0pt}h\ {\isacharcolon}{\kern0pt}\ F\ {\isasymrightarrow}\ X{\isacharparenright}{\kern0pt}\ {\isasymand}\ {\isacharparenleft}{\kern0pt}f\ {\isasymcirc}\isactrlsub c\ h\ {\isacharequal}{\kern0pt}\ g\ {\isasymcirc}\isactrlsub c\ h{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}\ {\isasymlongrightarrow}\ {\isacharparenleft}{\kern0pt}{\isasymexists}{\isacharbang}{\kern0pt}\ k{\isachardot}{\kern0pt}\ {\isacharparenleft}{\kern0pt}k\ {\isacharcolon}{\kern0pt}\ F\ {\isasymrightarrow}\ E{\isacharparenright}{\kern0pt}\ {\isasymand}\ m\ {\isasymcirc}\isactrlsub c\ k\ {\isacharequal}{\kern0pt}\ h{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{unfolding}\isamarkupfalse%
\ equalizer{\isacharunderscore}{\kern0pt}def\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}auto\ simp\ add{\isacharcolon}{\kern0pt}\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def{\isacharparenright}{\kern0pt}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ equalizer{\isacharunderscore}{\kern0pt}eq{\isacharcolon}{\kern0pt}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}f\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Y{\isachardoublequoteclose}\ {\isachardoublequoteopen}g\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Y{\isachardoublequoteclose}\ {\isachardoublequoteopen}m\ {\isacharcolon}{\kern0pt}\ E\ {\isasymrightarrow}\ X{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}equalizer\ E\ m\ f\ g{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}f\ {\isasymcirc}\isactrlsub c\ m\ {\isacharequal}{\kern0pt}\ g\ {\isasymcirc}\isactrlsub c\ m{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ equalizer{\isacharunderscore}{\kern0pt}def{\isadigit{2}}\ \isacommand{by}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ similar{\isacharunderscore}{\kern0pt}equalizers{\isacharcolon}{\kern0pt}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}f\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Y{\isachardoublequoteclose}\ {\isachardoublequoteopen}g\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Y{\isachardoublequoteclose}\ {\isachardoublequoteopen}m\ {\isacharcolon}{\kern0pt}\ E\ {\isasymrightarrow}\ X{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}equalizer\ E\ m\ f\ g{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}h\ {\isacharcolon}{\kern0pt}\ F\ {\isasymrightarrow}\ X{\isachardoublequoteclose}\ {\isachardoublequoteopen}f\ {\isasymcirc}\isactrlsub c\ h\ {\isacharequal}{\kern0pt}\ g\ {\isasymcirc}\isactrlsub c\ h{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isasymexists}{\isacharbang}{\kern0pt}\ k{\isachardot}{\kern0pt}\ k\ {\isacharcolon}{\kern0pt}\ F\ {\isasymrightarrow}\ E\ {\isasymand}\ m\ {\isasymcirc}\isactrlsub c\ k\ {\isacharequal}{\kern0pt}\ h{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ equalizer{\isacharunderscore}{\kern0pt}def{\isadigit{2}}\ \isacommand{by}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\begin{isamarkuptext}%
The definition above and the axiomatization below correspond to Axiom 4 (Equalizers) in Halvorson.%
\end{isamarkuptext}\isamarkuptrue%
\isacommand{axiomatization}\isamarkupfalse%
\ \isakeyword{where}\isanewline
\ \ equalizer{\isacharunderscore}{\kern0pt}exists{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}f\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Y\ {\isasymLongrightarrow}\ g\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Y\ {\isasymLongrightarrow}\ {\isasymexists}\ E\ m{\isachardot}{\kern0pt}\ equalizer\ E\ m\ f\ g{\isachardoublequoteclose}\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ equalizer{\isacharunderscore}{\kern0pt}exists{\isadigit{2}}{\isacharcolon}{\kern0pt}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}f\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Y{\isachardoublequoteclose}\ {\isachardoublequoteopen}g\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Y{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isasymexists}\ E\ m{\isachardot}{\kern0pt}\ m\ {\isacharcolon}{\kern0pt}\ E\ {\isasymrightarrow}\ X\ {\isasymand}\ f\ {\isasymcirc}\isactrlsub c\ m\ {\isacharequal}{\kern0pt}\ g\ {\isasymcirc}\isactrlsub c\ m\ {\isasymand}\ {\isacharparenleft}{\kern0pt}{\isasymforall}\ h\ F{\isachardot}{\kern0pt}\ {\isacharparenleft}{\kern0pt}{\isacharparenleft}{\kern0pt}h\ {\isacharcolon}{\kern0pt}\ F\ {\isasymrightarrow}\ X{\isacharparenright}{\kern0pt}\ {\isasymand}\ {\isacharparenleft}{\kern0pt}f\ {\isasymcirc}\isactrlsub c\ h\ {\isacharequal}{\kern0pt}\ g\ {\isasymcirc}\isactrlsub c\ h{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}\ {\isasymlongrightarrow}\ {\isacharparenleft}{\kern0pt}{\isasymexists}{\isacharbang}{\kern0pt}\ k{\isachardot}{\kern0pt}\ {\isacharparenleft}{\kern0pt}k\ {\isacharcolon}{\kern0pt}\ F\ {\isasymrightarrow}\ E{\isacharparenright}{\kern0pt}\ {\isasymand}\ m\ {\isasymcirc}\isactrlsub c\ k\ {\isacharequal}{\kern0pt}\ h{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}{\kern0pt}\isanewline
\ \ \isacommand{obtain}\isamarkupfalse%
\ E\ m\ \isakeyword{where}\ {\isachardoublequoteopen}equalizer\ E\ m\ f\ g{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ equalizer{\isacharunderscore}{\kern0pt}exists\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}{\kern0pt}thesis\isanewline
\ \ \ \ \isacommand{unfolding}\isamarkupfalse%
\ equalizer{\isacharunderscore}{\kern0pt}def\isanewline
\ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}rule{\isacharunderscore}{\kern0pt}tac\ x{\isacharequal}{\kern0pt}{\isachardoublequoteopen}E{\isachardoublequoteclose}\ \isakeyword{in}\ exI{\isacharcomma}{\kern0pt}\ rule{\isacharunderscore}{\kern0pt}tac\ x{\isacharequal}{\kern0pt}{\isachardoublequoteopen}m{\isachardoublequoteclose}\ \isakeyword{in}\ exI{\isacharcomma}{\kern0pt}\ safe{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \isacommand{fix}\isamarkupfalse%
\ X{\isacharprime}{\kern0pt}\ Y{\isacharprime}{\kern0pt}\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ f{\isacharunderscore}{\kern0pt}type{\isadigit{2}}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}f\ {\isacharcolon}{\kern0pt}\ X{\isacharprime}{\kern0pt}\ {\isasymrightarrow}\ Y{\isacharprime}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ g{\isacharunderscore}{\kern0pt}type{\isadigit{2}}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}g\ {\isacharcolon}{\kern0pt}\ X{\isacharprime}{\kern0pt}\ {\isasymrightarrow}\ Y{\isacharprime}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ m{\isacharunderscore}{\kern0pt}type{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}m\ {\isacharcolon}{\kern0pt}\ E\ {\isasymrightarrow}\ X{\isacharprime}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ fm{\isacharunderscore}{\kern0pt}eq{\isacharunderscore}{\kern0pt}gm{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}f\ {\isasymcirc}\isactrlsub c\ m\ {\isacharequal}{\kern0pt}\ g\ {\isasymcirc}\isactrlsub c\ m{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ equalizer{\isacharunderscore}{\kern0pt}unique{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}{\isasymforall}h\ F{\isachardot}{\kern0pt}\ h\ {\isacharcolon}{\kern0pt}\ F\ {\isasymrightarrow}\ X{\isacharprime}{\kern0pt}\ {\isasymand}\ f\ {\isasymcirc}\isactrlsub c\ h\ {\isacharequal}{\kern0pt}\ g\ {\isasymcirc}\isactrlsub c\ h\ {\isasymlongrightarrow}\ {\isacharparenleft}{\kern0pt}{\isasymexists}{\isacharbang}{\kern0pt}k{\isachardot}{\kern0pt}\ k\ {\isacharcolon}{\kern0pt}\ F\ {\isasymrightarrow}\ E\ {\isasymand}\ m\ {\isasymcirc}\isactrlsub c\ k\ {\isacharequal}{\kern0pt}\ h{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ m{\isacharunderscore}{\kern0pt}type{\isadigit{2}}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}m\ {\isacharcolon}{\kern0pt}\ E\ {\isasymrightarrow}\ X{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\kern0pt}{\isadigit{2}}{\isacharparenright}{\kern0pt}\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ g{\isacharunderscore}{\kern0pt}type{\isadigit{2}}\ m{\isacharunderscore}{\kern0pt}type\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymAnd}\ h\ F{\isachardot}{\kern0pt}\ h\ {\isacharcolon}{\kern0pt}\ F\ {\isasymrightarrow}\ X\ {\isasymLongrightarrow}\ f\ {\isasymcirc}\isactrlsub c\ h\ {\isacharequal}{\kern0pt}\ g\ {\isasymcirc}\isactrlsub c\ h\ {\isasymLongrightarrow}\ {\isasymexists}k{\isachardot}{\kern0pt}\ k\ {\isacharcolon}{\kern0pt}\ F\ {\isasymrightarrow}\ E\ {\isasymand}\ m\ {\isasymcirc}\isactrlsub c\ k\ {\isacharequal}{\kern0pt}\ h{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}metis\ m{\isacharunderscore}{\kern0pt}type{\isadigit{2}}\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ equalizer{\isacharunderscore}{\kern0pt}unique\ m{\isacharunderscore}{\kern0pt}type{\isacharparenright}{\kern0pt}\isanewline
\isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymAnd}\ F\ k\ y{\isachardot}{\kern0pt}\ m\ {\isasymcirc}\isactrlsub c\ k\ {\isacharcolon}{\kern0pt}\ F\ {\isasymrightarrow}\ X\ {\isasymLongrightarrow}\ f\ {\isasymcirc}\isactrlsub c\ m\ {\isasymcirc}\isactrlsub c\ k\ {\isacharequal}{\kern0pt}\ g\ {\isasymcirc}\isactrlsub c\ m\ {\isasymcirc}\isactrlsub c\ k\ {\isasymLongrightarrow}\ k\ {\isacharcolon}{\kern0pt}\ F\ {\isasymrightarrow}\ E\ {\isasymLongrightarrow}\ y\ {\isacharcolon}{\kern0pt}\ F\ {\isasymrightarrow}\ E\isanewline
\ \ \ \ \ \ \ \ {\isasymLongrightarrow}\ m\ {\isasymcirc}\isactrlsub c\ y\ {\isacharequal}{\kern0pt}\ m\ {\isasymcirc}\isactrlsub c\ k\ {\isasymLongrightarrow}\ k\ {\isacharequal}{\kern0pt}\ y{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ comp{\isacharunderscore}{\kern0pt}type\ equalizer{\isacharunderscore}{\kern0pt}unique\ m{\isacharunderscore}{\kern0pt}type\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\begin{isamarkuptext}%
The lemma below corresponds to Exercise 2.1.31 in Halvorson.%
\end{isamarkuptext}\isamarkuptrue%
\isacommand{lemma}\isamarkupfalse%
\ equalizers{\isacharunderscore}{\kern0pt}isomorphic{\isacharcolon}{\kern0pt}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}equalizer\ E\ m\ f\ g{\isachardoublequoteclose}\ {\isachardoublequoteopen}equalizer\ E{\isacharprime}{\kern0pt}\ m{\isacharprime}{\kern0pt}\ f\ g{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isasymexists}\ k{\isachardot}{\kern0pt}\ k\ {\isacharcolon}{\kern0pt}\ E\ {\isasymrightarrow}\ E{\isacharprime}{\kern0pt}\ {\isasymand}\ isomorphism\ k\ {\isasymand}\ m\ {\isacharequal}{\kern0pt}\ m{\isacharprime}{\kern0pt}\ {\isasymcirc}\isactrlsub c\ k{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}{\kern0pt}\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ fm{\isacharunderscore}{\kern0pt}eq{\isacharunderscore}{\kern0pt}gm{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}f\ {\isasymcirc}\isactrlsub c\ m\ {\isacharequal}{\kern0pt}\ g\ {\isasymcirc}\isactrlsub c\ m{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\kern0pt}{\isadigit{1}}{\isacharparenright}{\kern0pt}\ equalizer{\isacharunderscore}{\kern0pt}def\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ fm{\isacharprime}{\kern0pt}{\isacharunderscore}{\kern0pt}eq{\isacharunderscore}{\kern0pt}gm{\isacharprime}{\kern0pt}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}f\ {\isasymcirc}\isactrlsub c\ m{\isacharprime}{\kern0pt}\ {\isacharequal}{\kern0pt}\ g\ {\isasymcirc}\isactrlsub c\ m{\isacharprime}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\kern0pt}{\isadigit{2}}{\isacharparenright}{\kern0pt}\ equalizer{\isacharunderscore}{\kern0pt}def\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\isanewline
\ \ \isacommand{obtain}\isamarkupfalse%
\ X\ Y\ \isakeyword{where}\ f{\isacharunderscore}{\kern0pt}type{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}f\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Y{\isachardoublequoteclose}\ \isakeyword{and}\ g{\isacharunderscore}{\kern0pt}type{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}g\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Y{\isachardoublequoteclose}\ \isakeyword{and}\ m{\isacharunderscore}{\kern0pt}type{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}m\ {\isacharcolon}{\kern0pt}\ E\ {\isasymrightarrow}\ X{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\kern0pt}{\isadigit{1}}{\isacharparenright}{\kern0pt}\ \isacommand{unfolding}\isamarkupfalse%
\ equalizer{\isacharunderscore}{\kern0pt}def\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\isanewline
\ \ \isacommand{obtain}\isamarkupfalse%
\ k\ \isakeyword{where}\ k{\isacharunderscore}{\kern0pt}type{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}k\ {\isacharcolon}{\kern0pt}\ E{\isacharprime}{\kern0pt}\ {\isasymrightarrow}\ E{\isachardoublequoteclose}\ \isakeyword{and}\ mk{\isacharunderscore}{\kern0pt}eq{\isacharunderscore}{\kern0pt}m{\isacharprime}{\kern0pt}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}m\ {\isasymcirc}\isactrlsub c\ k\ {\isacharequal}{\kern0pt}\ m{\isacharprime}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}metis\ assms\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ equalizer{\isacharunderscore}{\kern0pt}def{\isacharparenright}{\kern0pt}\isanewline
\ \ \isacommand{obtain}\isamarkupfalse%
\ k{\isacharprime}{\kern0pt}\ \isakeyword{where}\ k{\isacharprime}{\kern0pt}{\isacharunderscore}{\kern0pt}type{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}k{\isacharprime}{\kern0pt}\ {\isacharcolon}{\kern0pt}\ E\ {\isasymrightarrow}\ E{\isacharprime}{\kern0pt}{\isachardoublequoteclose}\ \isakeyword{and}\ m{\isacharprime}{\kern0pt}k{\isacharunderscore}{\kern0pt}eq{\isacharunderscore}{\kern0pt}m{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}m{\isacharprime}{\kern0pt}\ {\isasymcirc}\isactrlsub c\ k{\isacharprime}{\kern0pt}\ {\isacharequal}{\kern0pt}\ m{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}metis\ assms\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ equalizer{\isacharunderscore}{\kern0pt}def{\isacharparenright}{\kern0pt}\isanewline
\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}f\ {\isasymcirc}\isactrlsub c\ m\ {\isasymcirc}\isactrlsub c\ k\ {\isasymcirc}\isactrlsub c\ k{\isacharprime}{\kern0pt}\ {\isacharequal}{\kern0pt}\ g\ {\isasymcirc}\isactrlsub c\ m\ {\isasymcirc}\isactrlsub c\ k\ {\isasymcirc}\isactrlsub c\ k{\isacharprime}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ comp{\isacharunderscore}{\kern0pt}associative{\isadigit{2}}\ m{\isacharunderscore}{\kern0pt}type\ fm{\isacharunderscore}{\kern0pt}eq{\isacharunderscore}{\kern0pt}gm\ k{\isacharprime}{\kern0pt}{\isacharunderscore}{\kern0pt}type\ k{\isacharunderscore}{\kern0pt}type\ m{\isacharprime}{\kern0pt}k{\isacharunderscore}{\kern0pt}eq{\isacharunderscore}{\kern0pt}m\ mk{\isacharunderscore}{\kern0pt}eq{\isacharunderscore}{\kern0pt}m{\isacharprime}{\kern0pt}\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}k\ {\isasymcirc}\isactrlsub c\ k{\isacharprime}{\kern0pt}\ {\isacharcolon}{\kern0pt}\ E\ {\isasymrightarrow}\ E\ {\isasymand}\ m\ {\isasymcirc}\isactrlsub c\ k\ {\isasymcirc}\isactrlsub c\ k{\isacharprime}{\kern0pt}\ {\isacharequal}{\kern0pt}\ m{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ comp{\isacharunderscore}{\kern0pt}associative{\isadigit{2}}\ comp{\isacharunderscore}{\kern0pt}type\ k{\isacharprime}{\kern0pt}{\isacharunderscore}{\kern0pt}type\ k{\isacharunderscore}{\kern0pt}type\ m{\isacharunderscore}{\kern0pt}type\ m{\isacharprime}{\kern0pt}k{\isacharunderscore}{\kern0pt}eq{\isacharunderscore}{\kern0pt}m\ mk{\isacharunderscore}{\kern0pt}eq{\isacharunderscore}{\kern0pt}m{\isacharprime}{\kern0pt}\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ kk{\isacharprime}{\kern0pt}{\isacharunderscore}{\kern0pt}eq{\isacharunderscore}{\kern0pt}id{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}k\ {\isasymcirc}\isactrlsub c\ k{\isacharprime}{\kern0pt}\ {\isacharequal}{\kern0pt}\ id\ E{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\kern0pt}{\isadigit{1}}{\isacharparenright}{\kern0pt}\ equalizer{\isacharunderscore}{\kern0pt}def\ id{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}unit{\isadigit{2}}\ id{\isacharunderscore}{\kern0pt}type\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}k{\isacharprime}{\kern0pt}\ {\isasymcirc}\isactrlsub c\ k\ {\isacharcolon}{\kern0pt}\ E{\isacharprime}{\kern0pt}\ {\isasymrightarrow}\ E{\isacharprime}{\kern0pt}\ {\isasymand}\ m{\isacharprime}{\kern0pt}\ {\isasymcirc}\isactrlsub c\ k{\isacharprime}{\kern0pt}\ {\isasymcirc}\isactrlsub c\ k\ {\isacharequal}{\kern0pt}\ m{\isacharprime}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}smt\ comp{\isacharunderscore}{\kern0pt}associative{\isadigit{2}}\ comp{\isacharunderscore}{\kern0pt}type\ k{\isacharprime}{\kern0pt}{\isacharunderscore}{\kern0pt}type\ k{\isacharunderscore}{\kern0pt}type\ m{\isacharprime}{\kern0pt}k{\isacharunderscore}{\kern0pt}eq{\isacharunderscore}{\kern0pt}m\ m{\isacharunderscore}{\kern0pt}type\ mk{\isacharunderscore}{\kern0pt}eq{\isacharunderscore}{\kern0pt}m{\isacharprime}{\kern0pt}{\isacharparenright}{\kern0pt}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ k{\isacharprime}{\kern0pt}k{\isacharunderscore}{\kern0pt}eq{\isacharunderscore}{\kern0pt}id{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}k{\isacharprime}{\kern0pt}\ {\isasymcirc}\isactrlsub c\ k\ {\isacharequal}{\kern0pt}\ id\ E{\isacharprime}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\kern0pt}{\isadigit{2}}{\isacharparenright}{\kern0pt}\ equalizer{\isacharunderscore}{\kern0pt}def\ id{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}unit{\isadigit{2}}\ id{\isacharunderscore}{\kern0pt}type\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymexists}k{\isachardot}{\kern0pt}\ k\ {\isacharcolon}{\kern0pt}\ E\ {\isasymrightarrow}\ E{\isacharprime}{\kern0pt}\ {\isasymand}\ isomorphism\ k\ {\isasymand}\ m\ {\isacharequal}{\kern0pt}\ m{\isacharprime}{\kern0pt}\ {\isasymcirc}\isactrlsub c\ k{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ isomorphism{\isacharunderscore}{\kern0pt}def\ k{\isacharprime}{\kern0pt}{\isacharunderscore}{\kern0pt}type\ k{\isacharprime}{\kern0pt}k{\isacharunderscore}{\kern0pt}eq{\isacharunderscore}{\kern0pt}id\ k{\isacharunderscore}{\kern0pt}type\ kk{\isacharprime}{\kern0pt}{\isacharunderscore}{\kern0pt}eq{\isacharunderscore}{\kern0pt}id\ m{\isacharprime}{\kern0pt}k{\isacharunderscore}{\kern0pt}eq{\isacharunderscore}{\kern0pt}m\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}rule{\isacharunderscore}{\kern0pt}tac\ x{\isacharequal}{\kern0pt}{\isachardoublequoteopen}k{\isacharprime}{\kern0pt}{\isachardoublequoteclose}\ \isakeyword{in}\ exI{\isacharcomma}{\kern0pt}\ auto{\isacharparenright}{\kern0pt}\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ isomorphic{\isacharunderscore}{\kern0pt}to{\isacharunderscore}{\kern0pt}equalizer{\isacharunderscore}{\kern0pt}is{\isacharunderscore}{\kern0pt}equalizer{\isacharcolon}{\kern0pt}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}{\isasymphi}{\isacharcolon}{\kern0pt}\ E{\isacharprime}{\kern0pt}\ {\isasymrightarrow}\ E{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}isomorphism\ {\isasymphi}{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}equalizer\ E\ m\ f\ g{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}f\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Y{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}g\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Y{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}m\ {\isacharcolon}{\kern0pt}\ E\ {\isasymrightarrow}\ X{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ \ \ {\isachardoublequoteopen}equalizer\ E{\isacharprime}{\kern0pt}\ {\isacharparenleft}{\kern0pt}m\ {\isasymcirc}\isactrlsub c\ {\isasymphi}{\isacharparenright}{\kern0pt}\ f\ g{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}{\kern0pt}\ \isanewline
\ \ \isacommand{obtain}\isamarkupfalse%
\ {\isasymphi}{\isacharunderscore}{\kern0pt}inv\ \isakeyword{where}\ {\isasymphi}{\isacharunderscore}{\kern0pt}inv{\isacharunderscore}{\kern0pt}type{\isacharbrackleft}{\kern0pt}type{\isacharunderscore}{\kern0pt}rule{\isacharbrackright}{\kern0pt}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}{\isasymphi}{\isacharunderscore}{\kern0pt}inv\ {\isacharcolon}{\kern0pt}\ E\ {\isasymrightarrow}\ E{\isacharprime}{\kern0pt}{\isachardoublequoteclose}\ \isakeyword{and}\ {\isasymphi}{\isacharunderscore}{\kern0pt}inv{\isacharunderscore}{\kern0pt}{\isasymphi}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}{\isasymphi}{\isacharunderscore}{\kern0pt}inv\ {\isasymcirc}\isactrlsub c\ {\isasymphi}\ {\isacharequal}{\kern0pt}\ id{\isacharparenleft}{\kern0pt}E{\isacharprime}{\kern0pt}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isakeyword{and}\ {\isasymphi}{\isasymphi}{\isacharunderscore}{\kern0pt}inv{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}{\isasymphi}\ {\isasymcirc}\isactrlsub c\ {\isasymphi}{\isacharunderscore}{\kern0pt}inv\ {\isacharequal}{\kern0pt}\ id{\isacharparenleft}{\kern0pt}E{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\kern0pt}{\isadigit{1}}{\isacharcomma}{\kern0pt}{\isadigit{2}}{\isacharparenright}{\kern0pt}\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ isomorphism{\isacharunderscore}{\kern0pt}def\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ equalizes{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}f\ {\isasymcirc}\isactrlsub c\ m\ {\isasymcirc}\isactrlsub c\ {\isasymphi}\ {\isacharequal}{\kern0pt}\ g\ {\isasymcirc}\isactrlsub c\ m\ {\isasymcirc}\isactrlsub c\ {\isasymphi}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ comp{\isacharunderscore}{\kern0pt}associative{\isadigit{2}}\ equalizer{\isacharunderscore}{\kern0pt}def\ \isacommand{by}\isamarkupfalse%
\ force\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymforall}h\ F{\isachardot}{\kern0pt}\ h\ {\isacharcolon}{\kern0pt}\ F\ {\isasymrightarrow}\ X\ {\isasymand}\ f\ {\isasymcirc}\isactrlsub c\ h\ {\isacharequal}{\kern0pt}\ g\ {\isasymcirc}\isactrlsub c\ h\ {\isasymlongrightarrow}\ {\isacharparenleft}{\kern0pt}{\isasymexists}{\isacharbang}{\kern0pt}k{\isachardot}{\kern0pt}\ k\ {\isacharcolon}{\kern0pt}\ F\ {\isasymrightarrow}\ E{\isacharprime}{\kern0pt}\ {\isasymand}\ {\isacharparenleft}{\kern0pt}m\ {\isasymcirc}\isactrlsub c\ {\isasymphi}{\isacharparenright}{\kern0pt}\ {\isasymcirc}\isactrlsub c\ k\ {\isacharequal}{\kern0pt}\ h{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \isacommand{proof}\isamarkupfalse%
{\isacharparenleft}{\kern0pt}safe{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \isacommand{fix}\isamarkupfalse%
\ h\ F\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ h{\isacharunderscore}{\kern0pt}type{\isacharbrackleft}{\kern0pt}type{\isacharunderscore}{\kern0pt}rule{\isacharbrackright}{\kern0pt}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}h\ {\isacharcolon}{\kern0pt}\ F\ {\isasymrightarrow}\ X{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ h{\isacharunderscore}{\kern0pt}equalizes{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}f\ {\isasymcirc}\isactrlsub c\ h\ {\isacharequal}{\kern0pt}\ g\ {\isasymcirc}\isactrlsub c\ h{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{have}\isamarkupfalse%
\ k{\isacharunderscore}{\kern0pt}exists{\isacharunderscore}{\kern0pt}uniquely{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}{\isasymexists}{\isacharbang}{\kern0pt}\ k{\isachardot}{\kern0pt}\ k{\isacharcolon}{\kern0pt}\ F\ \ {\isasymrightarrow}\ E\ {\isasymand}\ m\ {\isasymcirc}\isactrlsub c\ k\ {\isacharequal}{\kern0pt}\ h{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ equalizer{\isacharunderscore}{\kern0pt}def{\isadigit{2}}\ h{\isacharunderscore}{\kern0pt}equalizes\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharcomma}{\kern0pt}\ auto{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{obtain}\isamarkupfalse%
\ k\ \isakeyword{where}\ k{\isacharunderscore}{\kern0pt}type{\isacharbrackleft}{\kern0pt}type{\isacharunderscore}{\kern0pt}rule{\isacharbrackright}{\kern0pt}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}k{\isacharcolon}{\kern0pt}\ F\ \ {\isasymrightarrow}\ E{\isachardoublequoteclose}\ \isakeyword{and}\ k{\isacharunderscore}{\kern0pt}def{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}m\ {\isasymcirc}\isactrlsub c\ k\ {\isacharequal}{\kern0pt}\ h{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymexists}k{\isachardot}{\kern0pt}\ k\ {\isacharcolon}{\kern0pt}\ F\ {\isasymrightarrow}\ E{\isacharprime}{\kern0pt}\ {\isasymand}\ {\isacharparenleft}{\kern0pt}m\ {\isasymcirc}\isactrlsub c\ {\isasymphi}{\isacharparenright}{\kern0pt}\ {\isasymcirc}\isactrlsub c\ k\ {\isacharequal}{\kern0pt}\ h{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharcomma}{\kern0pt}\ smt\ {\isacharparenleft}{\kern0pt}z{\isadigit{3}}{\isacharparenright}{\kern0pt}\ {\isasymphi}{\isasymphi}{\isacharunderscore}{\kern0pt}inv\ {\isasymphi}{\isacharunderscore}{\kern0pt}inv{\isacharunderscore}{\kern0pt}type\ comp{\isacharunderscore}{\kern0pt}associative{\isadigit{2}}\ comp{\isacharunderscore}{\kern0pt}type\ id{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}unit{\isadigit{2}}\ k{\isacharunderscore}{\kern0pt}exists{\isacharunderscore}{\kern0pt}uniquely{\isacharparenright}{\kern0pt}\isanewline
\ \ \isacommand{next}\isamarkupfalse%
\isanewline
\ \ \ \ \isacommand{fix}\isamarkupfalse%
\ F\ k\ y\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharparenleft}{\kern0pt}m\ {\isasymcirc}\isactrlsub c\ {\isasymphi}{\isacharparenright}{\kern0pt}\ {\isasymcirc}\isactrlsub c\ k\ {\isacharcolon}{\kern0pt}\ F\ {\isasymrightarrow}\ X{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}f\ {\isasymcirc}\isactrlsub c\ {\isacharparenleft}{\kern0pt}m\ {\isasymcirc}\isactrlsub c\ {\isasymphi}{\isacharparenright}{\kern0pt}\ {\isasymcirc}\isactrlsub c\ k\ {\isacharequal}{\kern0pt}\ g\ {\isasymcirc}\isactrlsub c\ {\isacharparenleft}{\kern0pt}m\ {\isasymcirc}\isactrlsub c\ {\isasymphi}{\isacharparenright}{\kern0pt}\ {\isasymcirc}\isactrlsub c\ k{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ k{\isacharunderscore}{\kern0pt}type{\isacharbrackleft}{\kern0pt}type{\isacharunderscore}{\kern0pt}rule{\isacharbrackright}{\kern0pt}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}k\ {\isacharcolon}{\kern0pt}\ F\ {\isasymrightarrow}\ E{\isacharprime}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ y{\isacharunderscore}{\kern0pt}type{\isacharbrackleft}{\kern0pt}type{\isacharunderscore}{\kern0pt}rule{\isacharbrackright}{\kern0pt}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}y\ {\isacharcolon}{\kern0pt}\ F\ {\isasymrightarrow}\ E{\isacharprime}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharparenleft}{\kern0pt}m\ {\isasymcirc}\isactrlsub c\ {\isasymphi}{\isacharparenright}{\kern0pt}\ {\isasymcirc}\isactrlsub c\ y\ {\isacharequal}{\kern0pt}\ {\isacharparenleft}{\kern0pt}m\ {\isasymcirc}\isactrlsub c\ {\isasymphi}{\isacharparenright}{\kern0pt}\ {\isasymcirc}\isactrlsub c\ k{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}k\ {\isacharequal}{\kern0pt}\ y{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharcomma}{\kern0pt}\ smt\ {\isacharparenleft}{\kern0pt}verit{\isacharcomma}{\kern0pt}\ ccfv{\isacharunderscore}{\kern0pt}threshold{\isacharparenright}{\kern0pt}\ assms{\isacharparenleft}{\kern0pt}{\isadigit{1}}{\isacharcomma}{\kern0pt}{\isadigit{2}}{\isacharcomma}{\kern0pt}{\isadigit{3}}{\isacharparenright}{\kern0pt}\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ comp{\isacharunderscore}{\kern0pt}associative\ comp{\isacharunderscore}{\kern0pt}type\ equalizer{\isacharunderscore}{\kern0pt}def\ id{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}unit{\isadigit{2}}\ isomorphism{\isacharunderscore}{\kern0pt}def{\isacharparenright}{\kern0pt}\isanewline
\ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}{\kern0pt}thesis\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}smt\ {\isacharparenleft}{\kern0pt}verit{\isacharcomma}{\kern0pt}\ best{\isacharparenright}{\kern0pt}\ assms{\isacharparenleft}{\kern0pt}{\isadigit{1}}{\isacharcomma}{\kern0pt}{\isadigit{4}}{\isacharcomma}{\kern0pt}{\isadigit{5}}{\isacharcomma}{\kern0pt}{\isadigit{6}}{\isacharparenright}{\kern0pt}\ comp{\isacharunderscore}{\kern0pt}type\ equalizer{\isacharunderscore}{\kern0pt}def\ equalizes{\isacharparenright}{\kern0pt}\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\begin{isamarkuptext}%
The lemma below corresponds to Exercise 2.1.34 in Halvorson.%
\end{isamarkuptext}\isamarkuptrue%
\isacommand{lemma}\isamarkupfalse%
\ equalizer{\isacharunderscore}{\kern0pt}is{\isacharunderscore}{\kern0pt}monomorphism{\isacharcolon}{\kern0pt}\isanewline
\ \ {\isachardoublequoteopen}equalizer\ E\ m\ f\ g\ {\isasymLongrightarrow}\ \ monomorphism{\isacharparenleft}{\kern0pt}m{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{unfolding}\isamarkupfalse%
\ equalizer{\isacharunderscore}{\kern0pt}def\ monomorphism{\isacharunderscore}{\kern0pt}def\isanewline
\isacommand{proof}\isamarkupfalse%
\ clarify\isanewline
\ \ \isacommand{fix}\isamarkupfalse%
\ h{\isadigit{1}}\ h{\isadigit{2}}\ X\ Y\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ f{\isacharunderscore}{\kern0pt}type{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}f\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Y{\isachardoublequoteclose}\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ g{\isacharunderscore}{\kern0pt}type{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}g\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Y{\isachardoublequoteclose}\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ m{\isacharunderscore}{\kern0pt}type{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}m\ {\isacharcolon}{\kern0pt}\ E\ {\isasymrightarrow}\ X{\isachardoublequoteclose}\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ fm{\isacharunderscore}{\kern0pt}gm{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}f\ {\isasymcirc}\isactrlsub c\ m\ {\isacharequal}{\kern0pt}\ g\ {\isasymcirc}\isactrlsub c\ m{\isachardoublequoteclose}\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ uniqueness{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}{\isasymforall}h\ F{\isachardot}{\kern0pt}\ h\ {\isacharcolon}{\kern0pt}\ F\ {\isasymrightarrow}\ X\ {\isasymand}\ f\ {\isasymcirc}\isactrlsub c\ h\ {\isacharequal}{\kern0pt}\ g\ {\isasymcirc}\isactrlsub c\ h\ {\isasymlongrightarrow}\ {\isacharparenleft}{\kern0pt}{\isasymexists}{\isacharbang}{\kern0pt}k{\isachardot}{\kern0pt}\ k\ {\isacharcolon}{\kern0pt}\ F\ {\isasymrightarrow}\ E\ {\isasymand}\ m\ {\isasymcirc}\isactrlsub c\ k\ {\isacharequal}{\kern0pt}\ h{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ relation{\isacharunderscore}{\kern0pt}ga{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}codomain\ h{\isadigit{1}}\ {\isacharequal}{\kern0pt}\ domain\ m{\isachardoublequoteclose}\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ relation{\isacharunderscore}{\kern0pt}h{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}codomain\ h{\isadigit{2}}\ {\isacharequal}{\kern0pt}\ domain\ m{\isachardoublequoteclose}\ \isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ m{\isacharunderscore}{\kern0pt}ga{\isacharunderscore}{\kern0pt}mh{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}m\ {\isasymcirc}\isactrlsub c\ h{\isadigit{1}}\ {\isacharequal}{\kern0pt}\ m\ {\isasymcirc}\isactrlsub c\ h{\isadigit{2}}{\isachardoublequoteclose}\ \ \ \isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ \ {\isachardoublequoteopen}f\ {\isasymcirc}\isactrlsub c\ m\ {\isasymcirc}\isactrlsub c\ h{\isadigit{1}}\ {\isacharequal}{\kern0pt}\ \ g\ {\isasymcirc}\isactrlsub c\ m\ {\isasymcirc}\isactrlsub c\ h{\isadigit{2}}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ comp{\isacharunderscore}{\kern0pt}associative\ f{\isacharunderscore}{\kern0pt}type\ fm{\isacharunderscore}{\kern0pt}gm\ g{\isacharunderscore}{\kern0pt}type\ m{\isacharunderscore}{\kern0pt}ga{\isacharunderscore}{\kern0pt}mh\ m{\isacharunderscore}{\kern0pt}type\ relation{\isacharunderscore}{\kern0pt}h\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{obtain}\isamarkupfalse%
\ z\ \isakeyword{where}\ {\isachardoublequoteopen}z{\isacharcolon}{\kern0pt}\ domain{\isacharparenleft}{\kern0pt}h{\isadigit{1}}{\isacharparenright}{\kern0pt}\ {\isasymrightarrow}\ E\ {\isasymand}\ m\ {\isasymcirc}\isactrlsub c\ z\ {\isacharequal}{\kern0pt}\ m\ {\isasymcirc}\isactrlsub c\ h{\isadigit{1}}\ {\isasymand}\ \isanewline
\ \ \ \ {\isacharparenleft}{\kern0pt}{\isasymforall}\ j{\isachardot}{\kern0pt}\ j{\isacharcolon}{\kern0pt}domain{\isacharparenleft}{\kern0pt}h{\isadigit{1}}{\isacharparenright}{\kern0pt}\ {\isasymrightarrow}\ E\ {\isasymand}\ \ m\ {\isasymcirc}\isactrlsub c\ j\ {\isacharequal}{\kern0pt}\ m\ {\isasymcirc}\isactrlsub c\ h{\isadigit{1}}\ {\isasymlongrightarrow}\ j\ {\isacharequal}{\kern0pt}\ z{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ uniqueness\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}erule{\isacharunderscore}{\kern0pt}tac\ x{\isacharequal}{\kern0pt}{\isachardoublequoteopen}m\ {\isasymcirc}\isactrlsub c\ h{\isadigit{1}}{\isachardoublequoteclose}\ \isakeyword{in}\ allE{\isacharcomma}{\kern0pt}\ erule{\isacharunderscore}{\kern0pt}tac\ x{\isacharequal}{\kern0pt}{\isachardoublequoteopen}domain{\isacharparenleft}{\kern0pt}h{\isadigit{1}}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isakeyword{in}\ allE{\isacharcomma}{\kern0pt}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ smt\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ codomain{\isacharunderscore}{\kern0pt}comp\ domain{\isacharunderscore}{\kern0pt}comp\ m{\isacharunderscore}{\kern0pt}ga{\isacharunderscore}{\kern0pt}mh\ m{\isacharunderscore}{\kern0pt}type\ relation{\isacharunderscore}{\kern0pt}ga{\isacharparenright}{\kern0pt}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}h{\isadigit{1}}\ {\isacharequal}{\kern0pt}\ h{\isadigit{2}}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}metis\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ domain{\isacharunderscore}{\kern0pt}comp\ m{\isacharunderscore}{\kern0pt}ga{\isacharunderscore}{\kern0pt}mh\ m{\isacharunderscore}{\kern0pt}type\ relation{\isacharunderscore}{\kern0pt}ga\ relation{\isacharunderscore}{\kern0pt}h{\isacharparenright}{\kern0pt}\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\begin{isamarkuptext}%
The definition below corresponds to Definition 2.1.35 in Halvorson.%
\end{isamarkuptext}\isamarkuptrue%
\isacommand{definition}\isamarkupfalse%
\ regular{\isacharunderscore}{\kern0pt}monomorphism\ {\isacharcolon}{\kern0pt}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}cfunc\ {\isasymRightarrow}\ bool{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{where}\ {\isachardoublequoteopen}regular{\isacharunderscore}{\kern0pt}monomorphism\ f\ \ {\isasymlongleftrightarrow}\ \ \isanewline
\ \ \ \ \ \ \ \ \ \ {\isacharparenleft}{\kern0pt}{\isasymexists}\ g\ h{\isachardot}{\kern0pt}\ domain\ g\ {\isacharequal}{\kern0pt}\ codomain\ f\ {\isasymand}\ domain\ h\ {\isacharequal}{\kern0pt}\ codomain\ f\ {\isasymand}\ equalizer\ {\isacharparenleft}{\kern0pt}domain\ f{\isacharparenright}{\kern0pt}\ f\ g\ h{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}%
\begin{isamarkuptext}%
The lemma below corresponds to Exercise 2.1.36 in Halvorson.%
\end{isamarkuptext}\isamarkuptrue%
\isacommand{lemma}\isamarkupfalse%
\ epi{\isacharunderscore}{\kern0pt}regmon{\isacharunderscore}{\kern0pt}is{\isacharunderscore}{\kern0pt}iso{\isacharcolon}{\kern0pt}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}epimorphism\ f{\isachardoublequoteclose}\ {\isachardoublequoteopen}regular{\isacharunderscore}{\kern0pt}monomorphism\ f{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}isomorphism\ f{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}{\kern0pt}\isanewline
\ \ \isacommand{obtain}\isamarkupfalse%
\ g\ h\ \isakeyword{where}\ g{\isacharunderscore}{\kern0pt}type{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}domain\ g\ {\isacharequal}{\kern0pt}\ codomain\ f{\isachardoublequoteclose}\ \isakeyword{and}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ h{\isacharunderscore}{\kern0pt}type{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}domain\ h\ {\isacharequal}{\kern0pt}\ codomain\ f{\isachardoublequoteclose}\ \isakeyword{and}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ f{\isacharunderscore}{\kern0pt}equalizer{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}equalizer\ {\isacharparenleft}{\kern0pt}domain\ f{\isacharparenright}{\kern0pt}\ f\ g\ h{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\kern0pt}{\isadigit{2}}{\isacharparenright}{\kern0pt}\ regular{\isacharunderscore}{\kern0pt}monomorphism{\isacharunderscore}{\kern0pt}def\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}g\ {\isasymcirc}\isactrlsub c\ f\ {\isacharequal}{\kern0pt}\ h\ {\isasymcirc}\isactrlsub c\ f{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ equalizer{\isacharunderscore}{\kern0pt}def\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}g\ {\isacharequal}{\kern0pt}\ h{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\kern0pt}{\isadigit{1}}{\isacharparenright}{\kern0pt}\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ epimorphism{\isacharunderscore}{\kern0pt}def\ equalizer{\isacharunderscore}{\kern0pt}def\ f{\isacharunderscore}{\kern0pt}equalizer\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}g\ {\isasymcirc}\isactrlsub c\ id{\isacharparenleft}{\kern0pt}codomain\ f{\isacharparenright}{\kern0pt}\ {\isacharequal}{\kern0pt}\ h\ {\isasymcirc}\isactrlsub c\ id{\isacharparenleft}{\kern0pt}codomain\ f{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{obtain}\isamarkupfalse%
\ k\ \isakeyword{where}\ k{\isacharunderscore}{\kern0pt}type{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}f\ {\isasymcirc}\isactrlsub c\ k\ {\isacharequal}{\kern0pt}\ id{\isacharparenleft}{\kern0pt}codomain{\isacharparenleft}{\kern0pt}f{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}\ {\isasymand}\ codomain\ k\ {\isacharequal}{\kern0pt}\ domain\ f{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}metis\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ equalizer{\isacharunderscore}{\kern0pt}def\ f{\isacharunderscore}{\kern0pt}equalizer\ id{\isacharunderscore}{\kern0pt}type{\isacharparenright}{\kern0pt}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}f\ {\isasymcirc}\isactrlsub c\ id{\isacharparenleft}{\kern0pt}domain{\isacharparenleft}{\kern0pt}f{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}\ {\isacharequal}{\kern0pt}\ f\ {\isasymcirc}\isactrlsub c\ {\isacharparenleft}{\kern0pt}k\ {\isasymcirc}\isactrlsub c\ f{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}metis\ comp{\isacharunderscore}{\kern0pt}associative\ domain{\isacharunderscore}{\kern0pt}comp\ id{\isacharunderscore}{\kern0pt}domain\ id{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}unit\ id{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}unit{\isacharparenright}{\kern0pt}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}monomorphism\ f\ {\isasymLongrightarrow}\ k\ {\isasymcirc}\isactrlsub c\ f\ {\isacharequal}{\kern0pt}\ id{\isacharparenleft}{\kern0pt}domain\ f{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}metis\ {\isacharparenleft}{\kern0pt}mono{\isacharunderscore}{\kern0pt}tags{\isacharparenright}{\kern0pt}\ codomain{\isacharunderscore}{\kern0pt}comp\ domain{\isacharunderscore}{\kern0pt}comp\ id{\isacharunderscore}{\kern0pt}codomain\ id{\isacharunderscore}{\kern0pt}domain\ k{\isacharunderscore}{\kern0pt}type\ monomorphism{\isacharunderscore}{\kern0pt}def{\isacharparenright}{\kern0pt}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}k\ {\isasymcirc}\isactrlsub c\ f\ {\isacharequal}{\kern0pt}\ id{\isacharparenleft}{\kern0pt}domain\ f{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ equalizer{\isacharunderscore}{\kern0pt}is{\isacharunderscore}{\kern0pt}monomorphism\ f{\isacharunderscore}{\kern0pt}equalizer\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}isomorphism\ f{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}metis\ domain{\isacharunderscore}{\kern0pt}comp\ id{\isacharunderscore}{\kern0pt}domain\ isomorphism{\isacharunderscore}{\kern0pt}def\ k{\isacharunderscore}{\kern0pt}type{\isacharparenright}{\kern0pt}\ \ \isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\isadelimdocument
%
\endisadelimdocument
%
\isatagdocument
%
\isamarkupsubsection{Subobjects%
}
\isamarkuptrue%
%
\endisatagdocument
{\isafolddocument}%
%
\isadelimdocument
%
\endisadelimdocument
%
\begin{isamarkuptext}%
The definition below corresponds to Definition 2.1.32 in Halvorson.%
\end{isamarkuptext}\isamarkuptrue%
\isacommand{definition}\isamarkupfalse%
\ factors{\isacharunderscore}{\kern0pt}through\ {\isacharcolon}{\kern0pt}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}cfunc\ \ {\isasymRightarrow}\ cfunc\ {\isasymRightarrow}\ bool{\isachardoublequoteclose}\ {\isacharparenleft}{\kern0pt}\isakeyword{infix}\ {\isachardoublequoteopen}factorsthru{\isachardoublequoteclose}\ {\isadigit{9}}{\isadigit{0}}{\isacharparenright}{\kern0pt}\isanewline
\ \ \isakeyword{where}\ {\isachardoublequoteopen}g\ factorsthru\ f\ {\isasymlongleftrightarrow}\ {\isacharparenleft}{\kern0pt}{\isasymexists}\ h{\isachardot}{\kern0pt}\ {\isacharparenleft}{\kern0pt}h{\isacharcolon}{\kern0pt}\ domain{\isacharparenleft}{\kern0pt}g{\isacharparenright}{\kern0pt}{\isasymrightarrow}\ domain{\isacharparenleft}{\kern0pt}f{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}\ {\isasymand}\ f\ {\isasymcirc}\isactrlsub c\ h\ {\isacharequal}{\kern0pt}\ g{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ factors{\isacharunderscore}{\kern0pt}through{\isacharunderscore}{\kern0pt}def{\isadigit{2}}{\isacharcolon}{\kern0pt}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}g\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Z{\isachardoublequoteclose}\ {\isachardoublequoteopen}f\ {\isacharcolon}{\kern0pt}\ Y\ {\isasymrightarrow}\ Z{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}g\ factorsthru\ f\ {\isasymlongleftrightarrow}\ {\isacharparenleft}{\kern0pt}{\isasymexists}\ h{\isachardot}{\kern0pt}\ h{\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Y\ {\isasymand}\ f\ {\isasymcirc}\isactrlsub c\ h\ {\isacharequal}{\kern0pt}\ g{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{unfolding}\isamarkupfalse%
\ factors{\isacharunderscore}{\kern0pt}through{\isacharunderscore}{\kern0pt}def\ \isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}simp\ add{\isacharcolon}{\kern0pt}\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def{\isacharparenright}{\kern0pt}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\begin{isamarkuptext}%
The lemma below corresponds to Exercise 2.1.33 in Halvorson.%
\end{isamarkuptext}\isamarkuptrue%
\isacommand{lemma}\isamarkupfalse%
\ xfactorthru{\isacharunderscore}{\kern0pt}equalizer{\isacharunderscore}{\kern0pt}iff{\isacharunderscore}{\kern0pt}fx{\isacharunderscore}{\kern0pt}eq{\isacharunderscore}{\kern0pt}gx{\isacharcolon}{\kern0pt}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}f{\isacharcolon}{\kern0pt}\ X{\isasymrightarrow}\ Y{\isachardoublequoteclose}\ {\isachardoublequoteopen}g{\isacharcolon}{\kern0pt}X\ {\isasymrightarrow}\ Y{\isachardoublequoteclose}\ {\isachardoublequoteopen}equalizer\ E\ m\ f\ g{\isachardoublequoteclose}\ {\isachardoublequoteopen}x{\isasymin}\isactrlsub c\ X{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}x\ factorsthru\ m\ {\isasymlongleftrightarrow}\ f\ {\isasymcirc}\isactrlsub c\ x\ {\isacharequal}{\kern0pt}\ g\ \ {\isasymcirc}\isactrlsub c\ x{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ safe\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ LHS{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}x\ factorsthru\ m{\isachardoublequoteclose}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}f\ {\isasymcirc}\isactrlsub c\ x\ {\isacharequal}{\kern0pt}\ g\ \ {\isasymcirc}\isactrlsub c\ x{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\kern0pt}{\isadigit{3}}{\isacharparenright}{\kern0pt}\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ comp{\isacharunderscore}{\kern0pt}associative\ equalizer{\isacharunderscore}{\kern0pt}def\ factors{\isacharunderscore}{\kern0pt}through{\isacharunderscore}{\kern0pt}def\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ RHS{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}f\ {\isasymcirc}\isactrlsub c\ x\ {\isacharequal}{\kern0pt}\ g\ \ {\isasymcirc}\isactrlsub c\ x{\isachardoublequoteclose}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}x\ factorsthru\ m{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{unfolding}\isamarkupfalse%
\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ factors{\isacharunderscore}{\kern0pt}through{\isacharunderscore}{\kern0pt}def\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}metis\ RHS\ assms{\isacharparenleft}{\kern0pt}{\isadigit{1}}{\isacharcomma}{\kern0pt}{\isadigit{3}}{\isacharcomma}{\kern0pt}{\isadigit{4}}{\isacharparenright}{\kern0pt}\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ equalizer{\isacharunderscore}{\kern0pt}def{\isacharparenright}{\kern0pt}\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\begin{isamarkuptext}%
The definition below corresponds to Definition 2.1.37 in Halvorson.%
\end{isamarkuptext}\isamarkuptrue%
\isacommand{definition}\isamarkupfalse%
\ subobject{\isacharunderscore}{\kern0pt}of\ {\isacharcolon}{\kern0pt}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}cset\ {\isasymtimes}\ cfunc\ {\isasymRightarrow}\ cset\ {\isasymRightarrow}\ bool{\isachardoublequoteclose}\ {\isacharparenleft}{\kern0pt}\isakeyword{infix}\ {\isachardoublequoteopen}{\isasymsubseteq}\isactrlsub c{\isachardoublequoteclose}\ {\isadigit{5}}{\isadigit{0}}{\isacharparenright}{\kern0pt}\isanewline
\ \ \isakeyword{where}\ {\isachardoublequoteopen}B\ {\isasymsubseteq}\isactrlsub c\ X\ {\isasymlongleftrightarrow}\ {\isacharparenleft}{\kern0pt}snd\ B\ {\isacharcolon}{\kern0pt}\ fst\ B\ {\isasymrightarrow}\ X\ {\isasymand}\ monomorphism\ {\isacharparenleft}{\kern0pt}snd\ B{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ subobject{\isacharunderscore}{\kern0pt}of{\isacharunderscore}{\kern0pt}def{\isadigit{2}}{\isacharcolon}{\kern0pt}\isanewline
\ \ {\isachardoublequoteopen}{\isacharparenleft}{\kern0pt}B{\isacharcomma}{\kern0pt}m{\isacharparenright}{\kern0pt}\ {\isasymsubseteq}\isactrlsub c\ X\ {\isacharequal}{\kern0pt}\ {\isacharparenleft}{\kern0pt}m\ {\isacharcolon}{\kern0pt}\ B\ {\isasymrightarrow}\ X\ {\isasymand}\ monomorphism\ m{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}simp\ add{\isacharcolon}{\kern0pt}\ subobject{\isacharunderscore}{\kern0pt}of{\isacharunderscore}{\kern0pt}def{\isacharparenright}{\kern0pt}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{definition}\isamarkupfalse%
\ relative{\isacharunderscore}{\kern0pt}subset\ {\isacharcolon}{\kern0pt}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}cset\ {\isasymtimes}\ cfunc\ {\isasymRightarrow}\ cset\ {\isasymRightarrow}\ cset\ {\isasymtimes}\ cfunc\ {\isasymRightarrow}\ bool{\isachardoublequoteclose}\ {\isacharparenleft}{\kern0pt}{\isachardoublequoteopen}{\isacharunderscore}{\kern0pt}{\isasymsubseteq}\isactrlbsub {\isacharunderscore}{\kern0pt}\isactrlesub {\isacharunderscore}{\kern0pt}{\isachardoublequoteclose}\ {\isacharbrackleft}{\kern0pt}{\isadigit{5}}{\isadigit{1}}{\isacharcomma}{\kern0pt}{\isadigit{5}}{\isadigit{0}}{\isacharcomma}{\kern0pt}{\isadigit{5}}{\isadigit{1}}{\isacharbrackright}{\kern0pt}{\isadigit{5}}{\isadigit{0}}{\isacharparenright}{\kern0pt}\isanewline
\ \ \isakeyword{where}\ {\isachardoublequoteopen}B\ {\isasymsubseteq}\isactrlbsub X\isactrlesub \ A\ \ {\isasymlongleftrightarrow}\ \isanewline
\ \ \ \ {\isacharparenleft}{\kern0pt}snd\ B\ {\isacharcolon}{\kern0pt}\ fst\ B\ {\isasymrightarrow}\ X\ {\isasymand}\ monomorphism\ {\isacharparenleft}{\kern0pt}snd\ B{\isacharparenright}{\kern0pt}\ {\isasymand}\ snd\ A\ {\isacharcolon}{\kern0pt}\ fst\ A\ {\isasymrightarrow}\ X\ {\isasymand}\ monomorphism\ {\isacharparenleft}{\kern0pt}snd\ A{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \ \ \ \ \ \ {\isasymand}\ {\isacharparenleft}{\kern0pt}{\isasymexists}\ k{\isachardot}{\kern0pt}\ k{\isacharcolon}{\kern0pt}\ fst\ B\ {\isasymrightarrow}\ fst\ A\ {\isasymand}\ snd\ A\ {\isasymcirc}\isactrlsub c\ k\ {\isacharequal}{\kern0pt}\ snd\ B{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ relative{\isacharunderscore}{\kern0pt}subset{\isacharunderscore}{\kern0pt}def{\isadigit{2}}{\isacharcolon}{\kern0pt}\ \isanewline
\ \ {\isachardoublequoteopen}{\isacharparenleft}{\kern0pt}B{\isacharcomma}{\kern0pt}m{\isacharparenright}{\kern0pt}\ {\isasymsubseteq}\isactrlbsub X\isactrlesub \ {\isacharparenleft}{\kern0pt}A{\isacharcomma}{\kern0pt}n{\isacharparenright}{\kern0pt}\ {\isacharequal}{\kern0pt}\ {\isacharparenleft}{\kern0pt}m\ {\isacharcolon}{\kern0pt}\ B\ {\isasymrightarrow}\ X\ {\isasymand}\ monomorphism\ m\ {\isasymand}\ n\ {\isacharcolon}{\kern0pt}\ A\ {\isasymrightarrow}\ X\ {\isasymand}\ monomorphism\ n\isanewline
\ \ \ \ \ \ \ \ \ \ {\isasymand}\ {\isacharparenleft}{\kern0pt}{\isasymexists}\ k{\isachardot}{\kern0pt}\ k{\isacharcolon}{\kern0pt}\ B\ {\isasymrightarrow}\ A\ {\isasymand}\ n\ {\isasymcirc}\isactrlsub c\ k\ {\isacharequal}{\kern0pt}\ m{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{unfolding}\isamarkupfalse%
\ relative{\isacharunderscore}{\kern0pt}subset{\isacharunderscore}{\kern0pt}def\ \isacommand{by}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ subobject{\isacharunderscore}{\kern0pt}is{\isacharunderscore}{\kern0pt}relative{\isacharunderscore}{\kern0pt}subset{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}{\isacharparenleft}{\kern0pt}B{\isacharcomma}{\kern0pt}m{\isacharparenright}{\kern0pt}\ {\isasymsubseteq}\isactrlsub c\ A\ {\isasymlongleftrightarrow}\ {\isacharparenleft}{\kern0pt}B{\isacharcomma}{\kern0pt}m{\isacharparenright}{\kern0pt}\ {\isasymsubseteq}\isactrlbsub A\isactrlesub \ {\isacharparenleft}{\kern0pt}A{\isacharcomma}{\kern0pt}\ id{\isacharparenleft}{\kern0pt}A{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{unfolding}\isamarkupfalse%
\ relative{\isacharunderscore}{\kern0pt}subset{\isacharunderscore}{\kern0pt}def{\isadigit{2}}\ subobject{\isacharunderscore}{\kern0pt}of{\isacharunderscore}{\kern0pt}def{\isadigit{2}}\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ id{\isacharunderscore}{\kern0pt}isomorphism\ id{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}unit\ id{\isacharunderscore}{\kern0pt}type\ iso{\isacharunderscore}{\kern0pt}imp{\isacharunderscore}{\kern0pt}epi{\isacharunderscore}{\kern0pt}and{\isacharunderscore}{\kern0pt}monic\ \isacommand{by}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\begin{isamarkuptext}%
The definition below corresponds to Definition 2.1.39 in Halvorson.%
\end{isamarkuptext}\isamarkuptrue%
\isacommand{definition}\isamarkupfalse%
\ relative{\isacharunderscore}{\kern0pt}member\ {\isacharcolon}{\kern0pt}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}cfunc\ {\isasymRightarrow}\ cset\ {\isasymRightarrow}\ cset\ {\isasymtimes}\ cfunc\ {\isasymRightarrow}\ bool{\isachardoublequoteclose}\ {\isacharparenleft}{\kern0pt}{\isachardoublequoteopen}{\isacharunderscore}{\kern0pt}\ {\isasymin}\isactrlbsub {\isacharunderscore}{\kern0pt}\isactrlesub \ {\isacharunderscore}{\kern0pt}{\isachardoublequoteclose}\ {\isacharbrackleft}{\kern0pt}{\isadigit{5}}{\isadigit{1}}{\isacharcomma}{\kern0pt}{\isadigit{5}}{\isadigit{0}}{\isacharcomma}{\kern0pt}{\isadigit{5}}{\isadigit{1}}{\isacharbrackright}{\kern0pt}{\isadigit{5}}{\isadigit{0}}{\isacharparenright}{\kern0pt}\ \isakeyword{where}\isanewline
\ \ {\isachardoublequoteopen}x\ {\isasymin}\isactrlbsub X\isactrlesub \ B\ {\isasymlongleftrightarrow}\ {\isacharparenleft}{\kern0pt}x\ {\isasymin}\isactrlsub c\ X\ {\isasymand}\ monomorphism\ {\isacharparenleft}{\kern0pt}snd\ B{\isacharparenright}{\kern0pt}\ {\isasymand}\ snd\ B\ {\isacharcolon}{\kern0pt}\ fst\ B\ {\isasymrightarrow}\ X\ {\isasymand}\ x\ factorsthru\ {\isacharparenleft}{\kern0pt}snd\ B{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ relative{\isacharunderscore}{\kern0pt}member{\isacharunderscore}{\kern0pt}def{\isadigit{2}}{\isacharcolon}{\kern0pt}\isanewline
\ \ {\isachardoublequoteopen}x\ {\isasymin}\isactrlbsub X\isactrlesub \ {\isacharparenleft}{\kern0pt}B{\isacharcomma}{\kern0pt}\ m{\isacharparenright}{\kern0pt}\ {\isacharequal}{\kern0pt}\ {\isacharparenleft}{\kern0pt}x\ {\isasymin}\isactrlsub c\ X\ {\isasymand}\ monomorphism\ m\ {\isasymand}\ m\ {\isacharcolon}{\kern0pt}\ B\ {\isasymrightarrow}\ X\ {\isasymand}\ x\ factorsthru\ m{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{unfolding}\isamarkupfalse%
\ relative{\isacharunderscore}{\kern0pt}member{\isacharunderscore}{\kern0pt}def\ \isacommand{by}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\begin{isamarkuptext}%
The lemma below corresponds to Proposition 2.1.40 in Halvorson.%
\end{isamarkuptext}\isamarkuptrue%
\isacommand{lemma}\isamarkupfalse%
\ relative{\isacharunderscore}{\kern0pt}subobject{\isacharunderscore}{\kern0pt}member{\isacharcolon}{\kern0pt}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}{\isacharparenleft}{\kern0pt}A{\isacharcomma}{\kern0pt}n{\isacharparenright}{\kern0pt}\ {\isasymsubseteq}\isactrlbsub X\isactrlesub \ {\isacharparenleft}{\kern0pt}B{\isacharcomma}{\kern0pt}m{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ {\isachardoublequoteopen}x\ {\isasymin}\isactrlsub c\ X{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}x\ {\isasymin}\isactrlbsub X\isactrlesub \ {\isacharparenleft}{\kern0pt}A{\isacharcomma}{\kern0pt}n{\isacharparenright}{\kern0pt}\ {\isasymLongrightarrow}\ x\ {\isasymin}\isactrlbsub X\isactrlesub \ {\isacharparenleft}{\kern0pt}B{\isacharcomma}{\kern0pt}m{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{unfolding}\isamarkupfalse%
\ relative{\isacharunderscore}{\kern0pt}member{\isacharunderscore}{\kern0pt}def{\isadigit{2}}\ relative{\isacharunderscore}{\kern0pt}subset{\isacharunderscore}{\kern0pt}def{\isadigit{2}}\isanewline
\isacommand{proof}\isamarkupfalse%
\ clarify\isanewline
\ \ \isacommand{fix}\isamarkupfalse%
\ k\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ m{\isacharunderscore}{\kern0pt}type{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}m\ {\isacharcolon}{\kern0pt}\ B\ {\isasymrightarrow}\ X{\isachardoublequoteclose}\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ k{\isacharunderscore}{\kern0pt}type{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}k\ {\isacharcolon}{\kern0pt}\ A\ {\isasymrightarrow}\ B{\isachardoublequoteclose}\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ m{\isacharunderscore}{\kern0pt}monomorphism{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}monomorphism\ m{\isachardoublequoteclose}\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ mk{\isacharunderscore}{\kern0pt}monomorphism{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}monomorphism\ {\isacharparenleft}{\kern0pt}m\ {\isasymcirc}\isactrlsub c\ k{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ n{\isacharunderscore}{\kern0pt}eq{\isacharunderscore}{\kern0pt}mk{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}n\ {\isacharequal}{\kern0pt}\ m\ {\isasymcirc}\isactrlsub c\ k{\isachardoublequoteclose}\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ factorsthru{\isacharunderscore}{\kern0pt}mk{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}x\ factorsthru\ {\isacharparenleft}{\kern0pt}m\ {\isasymcirc}\isactrlsub c\ k{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \isanewline
\ \ \isacommand{obtain}\isamarkupfalse%
\ a\ \isakeyword{where}\ a{\isacharunderscore}{\kern0pt}assms{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}a\ {\isasymin}\isactrlsub c\ A\ {\isasymand}\ {\isacharparenleft}{\kern0pt}m\ {\isasymcirc}\isactrlsub c\ k{\isacharparenright}{\kern0pt}\ {\isasymcirc}\isactrlsub c\ a\ {\isacharequal}{\kern0pt}\ x{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\kern0pt}{\isadigit{2}}{\isacharparenright}{\kern0pt}\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ domain{\isacharunderscore}{\kern0pt}comp\ factors{\isacharunderscore}{\kern0pt}through{\isacharunderscore}{\kern0pt}def\ factorsthru{\isacharunderscore}{\kern0pt}mk\ k{\isacharunderscore}{\kern0pt}type\ m{\isacharunderscore}{\kern0pt}type\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}x\ factorsthru\ m\ {\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{unfolding}\isamarkupfalse%
\ factors{\isacharunderscore}{\kern0pt}through{\isacharunderscore}{\kern0pt}def\ \isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ comp{\isacharunderscore}{\kern0pt}type\ k{\isacharunderscore}{\kern0pt}type\ m{\isacharunderscore}{\kern0pt}type\ comp{\isacharunderscore}{\kern0pt}associative\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}rule{\isacharunderscore}{\kern0pt}tac\ x{\isacharequal}{\kern0pt}{\isachardoublequoteopen}k\ {\isasymcirc}\isactrlsub c\ a{\isachardoublequoteclose}\ \isakeyword{in}\ exI{\isacharcomma}{\kern0pt}\ auto{\isacharparenright}{\kern0pt}\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\isadelimdocument
%
\endisadelimdocument
%
\isatagdocument
%
\isamarkupsubsection{Inverse Image%
}
\isamarkuptrue%
%
\endisatagdocument
{\isafolddocument}%
%
\isadelimdocument
%
\endisadelimdocument
%
\begin{isamarkuptext}%
The definition below corresponds to a definition given by a diagram between Definition 2.1.37 and Proposition 2.1.38 in Halvorson.%
\end{isamarkuptext}\isamarkuptrue%
\isacommand{definition}\isamarkupfalse%
\ inverse{\isacharunderscore}{\kern0pt}image\ {\isacharcolon}{\kern0pt}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}cfunc\ {\isasymRightarrow}\ cset\ {\isasymRightarrow}\ cfunc\ {\isasymRightarrow}\ cset{\isachardoublequoteclose}\ {\isacharparenleft}{\kern0pt}{\isachardoublequoteopen}{\isacharunderscore}{\kern0pt}\isactrlsup {\isacharminus}{\kern0pt}\isactrlsup {\isadigit{1}}{\isasymlparr}{\isacharunderscore}{\kern0pt}{\isasymrparr}\isactrlbsub {\isacharunderscore}{\kern0pt}\isactrlesub {\isachardoublequoteclose}\ {\isacharbrackleft}{\kern0pt}{\isadigit{1}}{\isadigit{0}}{\isadigit{1}}{\isacharcomma}{\kern0pt}{\isadigit{0}}{\isacharcomma}{\kern0pt}{\isadigit{0}}{\isacharbrackright}{\kern0pt}{\isadigit{1}}{\isadigit{0}}{\isadigit{0}}{\isacharparenright}{\kern0pt}\ \isakeyword{where}\isanewline
\ \ {\isachardoublequoteopen}inverse{\isacharunderscore}{\kern0pt}image\ f\ B\ m\ {\isacharequal}{\kern0pt}\ {\isacharparenleft}{\kern0pt}SOME\ A{\isachardot}{\kern0pt}\ {\isasymexists}\ X\ Y\ k{\isachardot}{\kern0pt}\ f\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Y\ {\isasymand}\ m\ {\isacharcolon}{\kern0pt}\ B\ {\isasymrightarrow}\ Y\ {\isasymand}\ monomorphism\ m\ {\isasymand}\isanewline
\ \ \ \ equalizer\ A\ k\ {\isacharparenleft}{\kern0pt}f\ {\isasymcirc}\isactrlsub c\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}m\ {\isasymcirc}\isactrlsub c\ right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}is{\isacharunderscore}{\kern0pt}equalizer{\isacharcolon}{\kern0pt}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}m\ {\isacharcolon}{\kern0pt}\ B\ {\isasymrightarrow}\ Y{\isachardoublequoteclose}\ {\isachardoublequoteopen}f\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Y{\isachardoublequoteclose}\ {\isachardoublequoteopen}monomorphism\ m{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isasymexists}k{\isachardot}{\kern0pt}\ equalizer\ {\isacharparenleft}{\kern0pt}f\isactrlsup {\isacharminus}{\kern0pt}\isactrlsup {\isadigit{1}}{\isasymlparr}B{\isasymrparr}\isactrlbsub m\isactrlesub {\isacharparenright}{\kern0pt}\ k\ {\isacharparenleft}{\kern0pt}f\ {\isasymcirc}\isactrlsub c\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}m\ {\isasymcirc}\isactrlsub c\ right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}{\kern0pt}\isanewline
\ \ \isacommand{obtain}\isamarkupfalse%
\ A\ k\ \isakeyword{where}\ {\isachardoublequoteopen}equalizer\ A\ k\ {\isacharparenleft}{\kern0pt}f\ {\isasymcirc}\isactrlsub c\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}m\ {\isasymcirc}\isactrlsub c\ right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}meson\ assms{\isacharparenleft}{\kern0pt}{\isadigit{1}}{\isacharcomma}{\kern0pt}{\isadigit{2}}{\isacharparenright}{\kern0pt}\ comp{\isacharunderscore}{\kern0pt}type\ equalizer{\isacharunderscore}{\kern0pt}exists\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}type\ right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}type{\isacharparenright}{\kern0pt}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymexists}k{\isachardot}{\kern0pt}\ equalizer\ {\isacharparenleft}{\kern0pt}inverse{\isacharunderscore}{\kern0pt}image\ f\ B\ m{\isacharparenright}{\kern0pt}\ k\ {\isacharparenleft}{\kern0pt}f\ {\isasymcirc}\isactrlsub c\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}m\ {\isasymcirc}\isactrlsub c\ right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{unfolding}\isamarkupfalse%
\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}def\ \isacommand{using}\isamarkupfalse%
\ assms\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}rule{\isacharunderscore}{\kern0pt}tac\ someI{\isadigit{2}}{\isacharunderscore}{\kern0pt}ex{\isacharcomma}{\kern0pt}\ auto{\isacharparenright}{\kern0pt}\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{definition}\isamarkupfalse%
\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ {\isacharcolon}{\kern0pt}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}cfunc\ {\isasymRightarrow}\ cset\ {\isasymRightarrow}\ cfunc\ {\isasymRightarrow}\ cfunc{\isachardoublequoteclose}\ \ \isakeyword{where}\isanewline
\ \ {\isachardoublequoteopen}inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ f\ B\ m\ {\isacharequal}{\kern0pt}\ {\isacharparenleft}{\kern0pt}SOME\ k{\isachardot}{\kern0pt}\ {\isasymexists}\ X\ Y{\isachardot}{\kern0pt}\ f\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Y\ {\isasymand}\ m\ {\isacharcolon}{\kern0pt}\ B\ {\isasymrightarrow}\ Y\ {\isasymand}\ monomorphism\ m\ {\isasymand}\isanewline
\ \ \ \ equalizer\ {\isacharparenleft}{\kern0pt}inverse{\isacharunderscore}{\kern0pt}image\ f\ B\ m{\isacharparenright}{\kern0pt}\ k\ {\isacharparenleft}{\kern0pt}f\ {\isasymcirc}\isactrlsub c\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}m\ {\isasymcirc}\isactrlsub c\ right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}is{\isacharunderscore}{\kern0pt}equalizer{\isadigit{2}}{\isacharcolon}{\kern0pt}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}m\ {\isacharcolon}{\kern0pt}\ B\ {\isasymrightarrow}\ Y{\isachardoublequoteclose}\ {\isachardoublequoteopen}f\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Y{\isachardoublequoteclose}\ {\isachardoublequoteopen}monomorphism\ m{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}equalizer\ {\isacharparenleft}{\kern0pt}inverse{\isacharunderscore}{\kern0pt}image\ f\ B\ m{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ f\ B\ m{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}f\ {\isasymcirc}\isactrlsub c\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}m\ {\isasymcirc}\isactrlsub c\ right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}{\kern0pt}\isanewline
\ \ \isacommand{obtain}\isamarkupfalse%
\ k\ \isakeyword{where}\ {\isachardoublequoteopen}equalizer\ {\isacharparenleft}{\kern0pt}inverse{\isacharunderscore}{\kern0pt}image\ f\ B\ m{\isacharparenright}{\kern0pt}\ k\ {\isacharparenleft}{\kern0pt}f\ {\isasymcirc}\isactrlsub c\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}m\ {\isasymcirc}\isactrlsub c\ right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}is{\isacharunderscore}{\kern0pt}equalizer\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymexists}\ X\ Y{\isachardot}{\kern0pt}\ f\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Y\ {\isasymand}\ m\ {\isacharcolon}{\kern0pt}\ B\ {\isasymrightarrow}\ Y\ {\isasymand}\ monomorphism\ m\ {\isasymand}\isanewline
\ \ \ \ equalizer\ {\isacharparenleft}{\kern0pt}inverse{\isacharunderscore}{\kern0pt}image\ f\ B\ m{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ f\ B\ m{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}f\ {\isasymcirc}\isactrlsub c\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}m\ {\isasymcirc}\isactrlsub c\ right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{unfolding}\isamarkupfalse%
\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping{\isacharunderscore}{\kern0pt}def\ \isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}rule{\isacharunderscore}{\kern0pt}tac\ someI{\isacharunderscore}{\kern0pt}ex{\isacharcomma}{\kern0pt}\ auto{\isacharparenright}{\kern0pt}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}equalizer\ {\isacharparenleft}{\kern0pt}inverse{\isacharunderscore}{\kern0pt}image\ f\ B\ m{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ f\ B\ m{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}f\ {\isasymcirc}\isactrlsub c\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}m\ {\isasymcirc}\isactrlsub c\ right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\kern0pt}{\isadigit{2}}{\isacharparenright}{\kern0pt}\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping{\isacharunderscore}{\kern0pt}type{\isacharbrackleft}{\kern0pt}type{\isacharunderscore}{\kern0pt}rule{\isacharbrackright}{\kern0pt}{\isacharcolon}{\kern0pt}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}m\ {\isacharcolon}{\kern0pt}\ B\ {\isasymrightarrow}\ Y{\isachardoublequoteclose}\ {\isachardoublequoteopen}f\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Y{\isachardoublequoteclose}\ {\isachardoublequoteopen}monomorphism\ m{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ f\ B\ m\ {\isacharcolon}{\kern0pt}\ {\isacharparenleft}{\kern0pt}inverse{\isacharunderscore}{\kern0pt}image\ f\ B\ m{\isacharparenright}{\kern0pt}\ {\isasymrightarrow}\ X\ {\isasymtimes}\isactrlsub c\ B{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ domain{\isacharunderscore}{\kern0pt}comp\ equalizer{\isacharunderscore}{\kern0pt}def\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}is{\isacharunderscore}{\kern0pt}equalizer{\isadigit{2}}\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}type\ \isacommand{by}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping{\isacharunderscore}{\kern0pt}eq{\isacharcolon}{\kern0pt}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}m\ {\isacharcolon}{\kern0pt}\ B\ {\isasymrightarrow}\ Y{\isachardoublequoteclose}\ {\isachardoublequoteopen}f\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Y{\isachardoublequoteclose}\ {\isachardoublequoteopen}monomorphism\ m{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}f\ {\isasymcirc}\isactrlsub c\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B\ {\isasymcirc}\isactrlsub c\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ f\ B\ m\isanewline
\ \ \ \ \ \ {\isacharequal}{\kern0pt}\ m\ {\isasymcirc}\isactrlsub c\ right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B\ {\isasymcirc}\isactrlsub c\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ f\ B\ m{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ comp{\isacharunderscore}{\kern0pt}associative\ equalizer{\isacharunderscore}{\kern0pt}def\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}is{\isacharunderscore}{\kern0pt}equalizer{\isadigit{2}}\isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharcomma}{\kern0pt}\ smt\ {\isacharparenleft}{\kern0pt}verit{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping{\isacharunderscore}{\kern0pt}monomorphism{\isacharcolon}{\kern0pt}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}m\ {\isacharcolon}{\kern0pt}\ B\ {\isasymrightarrow}\ Y{\isachardoublequoteclose}\ {\isachardoublequoteopen}f\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Y{\isachardoublequoteclose}\ {\isachardoublequoteopen}monomorphism\ m{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}monomorphism\ {\isacharparenleft}{\kern0pt}inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ f\ B\ m{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ equalizer{\isacharunderscore}{\kern0pt}is{\isacharunderscore}{\kern0pt}monomorphism\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}is{\isacharunderscore}{\kern0pt}equalizer{\isadigit{2}}\ \isacommand{by}\isamarkupfalse%
\ blast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\begin{isamarkuptext}%
The lemma below is the dual of Proposition 2.1.38 in Halvorson.%
\end{isamarkuptext}\isamarkuptrue%
\isacommand{lemma}\isamarkupfalse%
\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}monomorphism{\isacharcolon}{\kern0pt}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}m\ {\isacharcolon}{\kern0pt}\ B\ {\isasymrightarrow}\ Y{\isachardoublequoteclose}\ {\isachardoublequoteopen}f\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Y{\isachardoublequoteclose}\ {\isachardoublequoteopen}monomorphism\ m{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}monomorphism\ {\isacharparenleft}{\kern0pt}left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B\ {\isasymcirc}\isactrlsub c\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ f\ B\ m{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\isanewline
\isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharcomma}{\kern0pt}\ unfold\ monomorphism{\isacharunderscore}{\kern0pt}def{\isadigit{3}}{\isacharcomma}{\kern0pt}\ clarify{\isacharparenright}{\kern0pt}\isanewline
\ \ \isacommand{fix}\isamarkupfalse%
\ g\ h\ A\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ g{\isacharunderscore}{\kern0pt}type{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}g\ {\isacharcolon}{\kern0pt}\ A\ {\isasymrightarrow}\ {\isacharparenleft}{\kern0pt}f\isactrlsup {\isacharminus}{\kern0pt}\isactrlsup {\isadigit{1}}{\isasymlparr}B{\isasymrparr}\isactrlbsub m\isactrlesub {\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ h{\isacharunderscore}{\kern0pt}type{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}h\ {\isacharcolon}{\kern0pt}\ A\ {\isasymrightarrow}\ {\isacharparenleft}{\kern0pt}f\isactrlsup {\isacharminus}{\kern0pt}\isactrlsup {\isadigit{1}}{\isasymlparr}B{\isasymrparr}\isactrlbsub m\isactrlesub {\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ left{\isacharunderscore}{\kern0pt}eq{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}{\isacharparenleft}{\kern0pt}left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B\ {\isasymcirc}\isactrlsub c\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ f\ B\ m{\isacharparenright}{\kern0pt}\ {\isasymcirc}\isactrlsub c\ g\isanewline
\ \ \ \ {\isacharequal}{\kern0pt}\ {\isacharparenleft}{\kern0pt}left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B\ {\isasymcirc}\isactrlsub c\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ f\ B\ m{\isacharparenright}{\kern0pt}\ {\isasymcirc}\isactrlsub c\ h{\isachardoublequoteclose}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}f\ {\isasymcirc}\isactrlsub c\ {\isacharparenleft}{\kern0pt}left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B\ {\isasymcirc}\isactrlsub c\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ f\ B\ m{\isacharparenright}{\kern0pt}\ {\isasymcirc}\isactrlsub c\ g\isanewline
\ \ \ \ {\isacharequal}{\kern0pt}\ f\ {\isasymcirc}\isactrlsub c\ {\isacharparenleft}{\kern0pt}left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B\ {\isasymcirc}\isactrlsub c\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ f\ B\ m{\isacharparenright}{\kern0pt}\ {\isasymcirc}\isactrlsub c\ h{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}m\ {\isasymcirc}\isactrlsub c\ {\isacharparenleft}{\kern0pt}right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B\ {\isasymcirc}\isactrlsub c\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ f\ B\ m{\isacharparenright}{\kern0pt}\ {\isasymcirc}\isactrlsub c\ g\isanewline
\ \ \ \ {\isacharequal}{\kern0pt}\ m\ {\isasymcirc}\isactrlsub c\ {\isacharparenleft}{\kern0pt}right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B\ {\isasymcirc}\isactrlsub c\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ f\ B\ m{\isacharparenright}{\kern0pt}\ {\isasymcirc}\isactrlsub c\ h{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ g{\isacharunderscore}{\kern0pt}type\ h{\isacharunderscore}{\kern0pt}type\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharcomma}{\kern0pt}\ smt\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ codomain{\isacharunderscore}{\kern0pt}comp\ comp{\isacharunderscore}{\kern0pt}associative\ domain{\isacharunderscore}{\kern0pt}comp\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping{\isacharunderscore}{\kern0pt}eq\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}type{\isacharparenright}{\kern0pt}\ \isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ right{\isacharunderscore}{\kern0pt}eq{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}{\isacharparenleft}{\kern0pt}right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B\ {\isasymcirc}\isactrlsub c\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ f\ B\ m{\isacharparenright}{\kern0pt}\ {\isasymcirc}\isactrlsub c\ g\isanewline
\ \ \ \ {\isacharequal}{\kern0pt}\ {\isacharparenleft}{\kern0pt}right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B\ {\isasymcirc}\isactrlsub c\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ f\ B\ m{\isacharparenright}{\kern0pt}\ {\isasymcirc}\isactrlsub c\ h{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ g{\isacharunderscore}{\kern0pt}type\ h{\isacharunderscore}{\kern0pt}type\ monomorphism{\isacharunderscore}{\kern0pt}def{\isadigit{3}}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharcomma}{\kern0pt}\ auto{\isacharparenright}{\kern0pt}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ f\ B\ m\ {\isasymcirc}\isactrlsub c\ g\ {\isacharequal}{\kern0pt}\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ f\ B\ m\ {\isasymcirc}\isactrlsub c\ h{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ g{\isacharunderscore}{\kern0pt}type\ h{\isacharunderscore}{\kern0pt}type\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ comp{\isacharunderscore}{\kern0pt}associative\ left{\isacharunderscore}{\kern0pt}eq\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}type\ right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}type\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharcomma}{\kern0pt}\ subst\ cart{\isacharunderscore}{\kern0pt}prod{\isacharunderscore}{\kern0pt}eq{\isacharcomma}{\kern0pt}\ auto{\isacharparenright}{\kern0pt}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}g\ {\isacharequal}{\kern0pt}\ h{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ g{\isacharunderscore}{\kern0pt}type\ h{\isacharunderscore}{\kern0pt}type\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping{\isacharunderscore}{\kern0pt}monomorphism\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping{\isacharunderscore}{\kern0pt}type\ monomorphism{\isacharunderscore}{\kern0pt}def{\isadigit{3}}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{definition}\isamarkupfalse%
\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}subobject{\isacharunderscore}{\kern0pt}mapping\ {\isacharcolon}{\kern0pt}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}cfunc\ {\isasymRightarrow}\ cset\ {\isasymRightarrow}\ cfunc\ {\isasymRightarrow}\ cfunc{\isachardoublequoteclose}\ {\isacharparenleft}{\kern0pt}{\isachardoublequoteopen}{\isacharbrackleft}{\kern0pt}{\isacharunderscore}{\kern0pt}\isactrlsup {\isacharminus}{\kern0pt}\isactrlsup {\isadigit{1}}{\isasymlparr}{\isacharunderscore}{\kern0pt}{\isasymrparr}\isactrlbsub {\isacharunderscore}{\kern0pt}\isactrlesub {\isacharbrackright}{\kern0pt}map{\isachardoublequoteclose}\ {\isacharbrackleft}{\kern0pt}{\isadigit{1}}{\isadigit{0}}{\isadigit{1}}{\isacharcomma}{\kern0pt}{\isadigit{0}}{\isacharcomma}{\kern0pt}{\isadigit{0}}{\isacharbrackright}{\kern0pt}{\isadigit{1}}{\isadigit{0}}{\isadigit{0}}{\isacharparenright}{\kern0pt}\ \isakeyword{where}\isanewline
\ \ {\isachardoublequoteopen}{\isacharbrackleft}{\kern0pt}f\isactrlsup {\isacharminus}{\kern0pt}\isactrlsup {\isadigit{1}}{\isasymlparr}B{\isasymrparr}\isactrlbsub m\isactrlesub {\isacharbrackright}{\kern0pt}map\ {\isacharequal}{\kern0pt}\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ {\isacharparenleft}{\kern0pt}domain\ f{\isacharparenright}{\kern0pt}\ B\ {\isasymcirc}\isactrlsub c\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ f\ B\ m{\isachardoublequoteclose}\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}subobject{\isacharunderscore}{\kern0pt}mapping{\isacharunderscore}{\kern0pt}def{\isadigit{2}}{\isacharcolon}{\kern0pt}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}f\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Y{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isacharbrackleft}{\kern0pt}f\isactrlsup {\isacharminus}{\kern0pt}\isactrlsup {\isadigit{1}}{\isasymlparr}B{\isasymrparr}\isactrlbsub m\isactrlesub {\isacharbrackright}{\kern0pt}map\ {\isacharequal}{\kern0pt}\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B\ {\isasymcirc}\isactrlsub c\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ f\ B\ m{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{unfolding}\isamarkupfalse%
\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}subobject{\isacharunderscore}{\kern0pt}mapping{\isacharunderscore}{\kern0pt}def\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ \isacommand{by}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}subobject{\isacharunderscore}{\kern0pt}mapping{\isacharunderscore}{\kern0pt}type{\isacharbrackleft}{\kern0pt}type{\isacharunderscore}{\kern0pt}rule{\isacharbrackright}{\kern0pt}{\isacharcolon}{\kern0pt}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}f\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Y{\isachardoublequoteclose}\ {\isachardoublequoteopen}m\ {\isacharcolon}{\kern0pt}\ B\ {\isasymrightarrow}\ Y{\isachardoublequoteclose}\ {\isachardoublequoteopen}monomorphism\ m{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isacharbrackleft}{\kern0pt}f\isactrlsup {\isacharminus}{\kern0pt}\isactrlsup {\isadigit{1}}{\isasymlparr}B{\isasymrparr}\isactrlbsub m\isactrlesub {\isacharbrackright}{\kern0pt}map\ {\isacharcolon}{\kern0pt}\ f\isactrlsup {\isacharminus}{\kern0pt}\isactrlsup {\isadigit{1}}{\isasymlparr}B{\isasymrparr}\isactrlbsub m\isactrlesub \ {\isasymrightarrow}\ X{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}unfold\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}subobject{\isacharunderscore}{\kern0pt}mapping{\isacharunderscore}{\kern0pt}def{\isadigit{2}}{\isacharcomma}{\kern0pt}\ typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharparenright}{\kern0pt}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}subobject{\isacharunderscore}{\kern0pt}mapping{\isacharunderscore}{\kern0pt}mono{\isacharcolon}{\kern0pt}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}f\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Y{\isachardoublequoteclose}\ {\isachardoublequoteopen}m\ {\isacharcolon}{\kern0pt}\ B\ {\isasymrightarrow}\ Y{\isachardoublequoteclose}\ {\isachardoublequoteopen}monomorphism\ m{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}monomorphism\ {\isacharparenleft}{\kern0pt}{\isacharbrackleft}{\kern0pt}f\isactrlsup {\isacharminus}{\kern0pt}\isactrlsup {\isadigit{1}}{\isasymlparr}B{\isasymrparr}\isactrlbsub m\isactrlesub {\isacharbrackright}{\kern0pt}map{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}monomorphism\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}subobject{\isacharunderscore}{\kern0pt}mapping{\isacharunderscore}{\kern0pt}def\ \isacommand{by}\isamarkupfalse%
\ fastforce%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}subobject{\isacharcolon}{\kern0pt}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}m\ {\isacharcolon}{\kern0pt}\ B\ {\isasymrightarrow}\ Y{\isachardoublequoteclose}\ {\isachardoublequoteopen}f\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Y{\isachardoublequoteclose}\ {\isachardoublequoteopen}monomorphism\ m{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isacharparenleft}{\kern0pt}f\isactrlsup {\isacharminus}{\kern0pt}\isactrlsup {\isadigit{1}}{\isasymlparr}B{\isasymrparr}\isactrlbsub m\isactrlesub {\isacharcomma}{\kern0pt}\ {\isacharbrackleft}{\kern0pt}f\isactrlsup {\isacharminus}{\kern0pt}\isactrlsup {\isadigit{1}}{\isasymlparr}B{\isasymrparr}\isactrlbsub m\isactrlesub {\isacharbrackright}{\kern0pt}map{\isacharparenright}{\kern0pt}\ {\isasymsubseteq}\isactrlsub c\ X{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{unfolding}\isamarkupfalse%
\ subobject{\isacharunderscore}{\kern0pt}of{\isacharunderscore}{\kern0pt}def{\isadigit{2}}\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ assms\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}subobject{\isacharunderscore}{\kern0pt}mapping{\isacharunderscore}{\kern0pt}mono\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}subobject{\isacharunderscore}{\kern0pt}mapping{\isacharunderscore}{\kern0pt}type\isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ force%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}pullback{\isacharcolon}{\kern0pt}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}m\ {\isacharcolon}{\kern0pt}\ B\ {\isasymrightarrow}\ Y{\isachardoublequoteclose}\ {\isachardoublequoteopen}f\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Y{\isachardoublequoteclose}\ {\isachardoublequoteopen}monomorphism\ m{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}is{\isacharunderscore}{\kern0pt}pullback\ {\isacharparenleft}{\kern0pt}f\isactrlsup {\isacharminus}{\kern0pt}\isactrlsup {\isadigit{1}}{\isasymlparr}B{\isasymrparr}\isactrlbsub m\isactrlesub {\isacharparenright}{\kern0pt}\ B\ X\ Y\ \isanewline
\ \ \ \ {\isacharparenleft}{\kern0pt}right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B\ {\isasymcirc}\isactrlsub c\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ f\ B\ m{\isacharparenright}{\kern0pt}\ m\isanewline
\ \ \ \ {\isacharparenleft}{\kern0pt}left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B\ {\isasymcirc}\isactrlsub c\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ f\ B\ m{\isacharparenright}{\kern0pt}\ f{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{unfolding}\isamarkupfalse%
\ is{\isacharunderscore}{\kern0pt}pullback{\isacharunderscore}{\kern0pt}def\ \isacommand{using}\isamarkupfalse%
\ assms\isanewline
\isacommand{proof}\isamarkupfalse%
\ safe\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ right{\isacharunderscore}{\kern0pt}type{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B\ {\isasymcirc}\isactrlsub c\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ f\ B\ m\ {\isacharcolon}{\kern0pt}\ f\isactrlsup {\isacharminus}{\kern0pt}\isactrlsup {\isadigit{1}}{\isasymlparr}B{\isasymrparr}\isactrlbsub m\isactrlesub \ {\isasymrightarrow}\ B{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ codomain{\isacharunderscore}{\kern0pt}comp\ domain{\isacharunderscore}{\kern0pt}comp\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping{\isacharunderscore}{\kern0pt}type\isanewline
\ \ \ \ \ \ right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}type\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ left{\isacharunderscore}{\kern0pt}type{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B\ {\isasymcirc}\isactrlsub c\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ f\ B\ m\ {\isacharcolon}{\kern0pt}\ f\isactrlsup {\isacharminus}{\kern0pt}\isactrlsup {\isadigit{1}}{\isasymlparr}B{\isasymrparr}\isactrlbsub m\isactrlesub \ {\isasymrightarrow}\ X{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ fst{\isacharunderscore}{\kern0pt}conv\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}subobject\ subobject{\isacharunderscore}{\kern0pt}of{\isacharunderscore}{\kern0pt}def\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharparenright}{\kern0pt}\isanewline
\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}m\ {\isasymcirc}\isactrlsub c\ right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B\ {\isasymcirc}\isactrlsub c\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ f\ B\ m\ {\isacharequal}{\kern0pt}\isanewline
\ \ \ \ \ \ f\ {\isasymcirc}\isactrlsub c\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B\ {\isasymcirc}\isactrlsub c\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ f\ B\ m{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping{\isacharunderscore}{\kern0pt}eq\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\ \ \isacommand{fix}\isamarkupfalse%
\ Z\ k\ h\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ k{\isacharunderscore}{\kern0pt}type{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}k\ {\isacharcolon}{\kern0pt}\ Z\ {\isasymrightarrow}\ B{\isachardoublequoteclose}\ \isakeyword{and}\ h{\isacharunderscore}{\kern0pt}type{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}h\ {\isacharcolon}{\kern0pt}\ Z\ {\isasymrightarrow}\ X{\isachardoublequoteclose}\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ mk{\isacharunderscore}{\kern0pt}eq{\isacharunderscore}{\kern0pt}fh{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}m\ {\isasymcirc}\isactrlsub c\ k\ {\isacharequal}{\kern0pt}\ f\ {\isasymcirc}\isactrlsub c\ h{\isachardoublequoteclose}\isanewline
\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}equalizer\ {\isacharparenleft}{\kern0pt}f\isactrlsup {\isacharminus}{\kern0pt}\isactrlsup {\isadigit{1}}{\isasymlparr}B{\isasymrparr}\isactrlbsub m\isactrlesub {\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ f\ B\ m{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}f\ {\isasymcirc}\isactrlsub c\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}m\ {\isasymcirc}\isactrlsub c\ right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B\ {\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}is{\isacharunderscore}{\kern0pt}equalizer{\isadigit{2}}\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymforall}h\ F{\isachardot}{\kern0pt}\ h\ {\isacharcolon}{\kern0pt}\ F\ {\isasymrightarrow}\ {\isacharparenleft}{\kern0pt}X\ {\isasymtimes}\isactrlsub c\ B{\isacharparenright}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ {\isasymand}\ {\isacharparenleft}{\kern0pt}f\ {\isasymcirc}\isactrlsub c\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B{\isacharparenright}{\kern0pt}\ {\isasymcirc}\isactrlsub c\ h\ {\isacharequal}{\kern0pt}\ {\isacharparenleft}{\kern0pt}m\ {\isasymcirc}\isactrlsub c\ right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B{\isacharparenright}{\kern0pt}\ {\isasymcirc}\isactrlsub c\ h\ {\isasymlongrightarrow}\isanewline
\ \ \ \ \ \ \ \ \ \ {\isacharparenleft}{\kern0pt}{\isasymexists}{\isacharbang}{\kern0pt}u{\isachardot}{\kern0pt}\ u\ {\isacharcolon}{\kern0pt}\ F\ {\isasymrightarrow}\ {\isacharparenleft}{\kern0pt}f\isactrlsup {\isacharminus}{\kern0pt}\isactrlsup {\isadigit{1}}{\isasymlparr}B{\isasymrparr}\isactrlbsub m\isactrlesub {\isacharparenright}{\kern0pt}\ {\isasymand}\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ f\ B\ m\ {\isasymcirc}\isactrlsub c\ u\ {\isacharequal}{\kern0pt}\ h{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{unfolding}\isamarkupfalse%
\ equalizer{\isacharunderscore}{\kern0pt}def\ \isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\kern0pt}{\isadigit{2}}{\isacharparenright}{\kern0pt}\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ domain{\isacharunderscore}{\kern0pt}comp\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}type\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymlangle}h{\isacharcomma}{\kern0pt}k{\isasymrangle}\ {\isacharcolon}{\kern0pt}\ Z\ {\isasymrightarrow}\ X\ {\isasymtimes}\isactrlsub c\ B\ \ {\isasymLongrightarrow}\isanewline
\ \ \ \ \ \ {\isacharparenleft}{\kern0pt}f\ {\isasymcirc}\isactrlsub c\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B{\isacharparenright}{\kern0pt}\ {\isasymcirc}\isactrlsub c\ {\isasymlangle}h{\isacharcomma}{\kern0pt}k{\isasymrangle}\ {\isacharequal}{\kern0pt}\ {\isacharparenleft}{\kern0pt}m\ {\isasymcirc}\isactrlsub c\ right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B{\isacharparenright}{\kern0pt}\ {\isasymcirc}\isactrlsub c\ {\isasymlangle}h{\isacharcomma}{\kern0pt}k{\isasymrangle}\ {\isasymLongrightarrow}\isanewline
\ \ \ \ \ \ {\isacharparenleft}{\kern0pt}{\isasymexists}{\isacharbang}{\kern0pt}u{\isachardot}{\kern0pt}\ u\ {\isacharcolon}{\kern0pt}\ Z\ {\isasymrightarrow}\ {\isacharparenleft}{\kern0pt}f\isactrlsup {\isacharminus}{\kern0pt}\isactrlsup {\isadigit{1}}{\isasymlparr}B{\isasymrparr}\isactrlbsub m\isactrlesub {\isacharparenright}{\kern0pt}\ {\isasymand}\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ f\ B\ m\ {\isasymcirc}\isactrlsub c\ u\ {\isacharequal}{\kern0pt}\ {\isasymlangle}h{\isacharcomma}{\kern0pt}k{\isasymrangle}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}erule{\isacharunderscore}{\kern0pt}tac\ x{\isacharequal}{\kern0pt}{\isachardoublequoteopen}{\isasymlangle}h{\isacharcomma}{\kern0pt}k{\isasymrangle}{\isachardoublequoteclose}\ \isakeyword{in}\ allE{\isacharcomma}{\kern0pt}\ erule{\isacharunderscore}{\kern0pt}tac\ x{\isacharequal}{\kern0pt}Z\ \isakeyword{in}\ allE{\isacharcomma}{\kern0pt}\ auto{\isacharparenright}{\kern0pt}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymexists}{\isacharbang}{\kern0pt}u{\isachardot}{\kern0pt}\ u\ {\isacharcolon}{\kern0pt}\ Z\ {\isasymrightarrow}\ {\isacharparenleft}{\kern0pt}f\isactrlsup {\isacharminus}{\kern0pt}\isactrlsup {\isadigit{1}}{\isasymlparr}B{\isasymrparr}\isactrlbsub m\isactrlesub {\isacharparenright}{\kern0pt}\ {\isasymand}\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ f\ B\ m\ {\isasymcirc}\isactrlsub c\ u\ {\isacharequal}{\kern0pt}\ {\isasymlangle}h{\isacharcomma}{\kern0pt}k{\isasymrangle}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ k{\isacharunderscore}{\kern0pt}type\ h{\isacharunderscore}{\kern0pt}type\ assms\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharcomma}{\kern0pt}\ smt\ comp{\isacharunderscore}{\kern0pt}associative{\isadigit{2}}\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}cfunc{\isacharunderscore}{\kern0pt}prod\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}type\isanewline
\ \ \ \ \ \ \ \ mk{\isacharunderscore}{\kern0pt}eq{\isacharunderscore}{\kern0pt}fh\ right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}cfunc{\isacharunderscore}{\kern0pt}prod\ right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}type{\isacharparenright}{\kern0pt}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymexists}j{\isachardot}{\kern0pt}\ j\ {\isacharcolon}{\kern0pt}\ Z\ {\isasymrightarrow}\ {\isacharparenleft}{\kern0pt}f\isactrlsup {\isacharminus}{\kern0pt}\isactrlsup {\isadigit{1}}{\isasymlparr}B{\isasymrparr}\isactrlbsub m\isactrlesub {\isacharparenright}{\kern0pt}\ {\isasymand}\isanewline
\ \ \ \ \ \ \ \ \ {\isacharparenleft}{\kern0pt}right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B\ {\isasymcirc}\isactrlsub c\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ f\ B\ m{\isacharparenright}{\kern0pt}\ {\isasymcirc}\isactrlsub c\ j\ {\isacharequal}{\kern0pt}\ k\ {\isasymand}\isanewline
\ \ \ \ \ \ \ \ \ {\isacharparenleft}{\kern0pt}left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B\ {\isasymcirc}\isactrlsub c\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ f\ B\ m{\isacharparenright}{\kern0pt}\ {\isasymcirc}\isactrlsub c\ j\ {\isacharequal}{\kern0pt}\ h{\isachardoublequoteclose}\isanewline
\ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}insert\ k{\isacharunderscore}{\kern0pt}type\ h{\isacharunderscore}{\kern0pt}type\ assms{\isacharcomma}{\kern0pt}\ safe{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \isacommand{fix}\isamarkupfalse%
\ u\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ u{\isacharunderscore}{\kern0pt}type{\isacharbrackleft}{\kern0pt}type{\isacharunderscore}{\kern0pt}rule{\isacharbrackright}{\kern0pt}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}u\ {\isacharcolon}{\kern0pt}\ Z\ {\isasymrightarrow}\ {\isacharparenleft}{\kern0pt}f\isactrlsup {\isacharminus}{\kern0pt}\isactrlsup {\isadigit{1}}{\isasymlparr}B{\isasymrparr}\isactrlbsub m\isactrlesub {\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ u{\isacharunderscore}{\kern0pt}eq{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ f\ B\ m\ {\isasymcirc}\isactrlsub c\ u\ {\isacharequal}{\kern0pt}\ {\isasymlangle}h{\isacharcomma}{\kern0pt}k{\isasymrangle}{\isachardoublequoteclose}\isanewline
\isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymexists}j{\isachardot}{\kern0pt}\ j\ {\isacharcolon}{\kern0pt}\ Z\ {\isasymrightarrow}\ f\isactrlsup {\isacharminus}{\kern0pt}\isactrlsup {\isadigit{1}}{\isasymlparr}B{\isasymrparr}\isactrlbsub m\isactrlesub \ {\isasymand}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}{\kern0pt}right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B\ {\isasymcirc}\isactrlsub c\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ f\ B\ m{\isacharparenright}{\kern0pt}\ {\isasymcirc}\isactrlsub c\ j\ {\isacharequal}{\kern0pt}\ k\ {\isasymand}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}{\kern0pt}left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B\ {\isasymcirc}\isactrlsub c\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ f\ B\ m{\isacharparenright}{\kern0pt}\ {\isasymcirc}\isactrlsub c\ j\ {\isacharequal}{\kern0pt}\ h{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}rule\ exI{\isacharbrackleft}{\kern0pt}\isakeyword{where}\ x{\isacharequal}{\kern0pt}u{\isacharbrackright}{\kern0pt}{\isacharcomma}{\kern0pt}\ typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharcomma}{\kern0pt}\ safe{\isacharparenright}{\kern0pt}\isanewline
\isanewline
\ \ \ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharparenleft}{\kern0pt}right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B\ {\isasymcirc}\isactrlsub c\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ f\ B\ m{\isacharparenright}{\kern0pt}\ {\isasymcirc}\isactrlsub c\ u\ {\isacharequal}{\kern0pt}\ k{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ u{\isacharunderscore}{\kern0pt}type\ h{\isacharunderscore}{\kern0pt}type\ k{\isacharunderscore}{\kern0pt}type\ u{\isacharunderscore}{\kern0pt}eq\isanewline
\ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharcomma}{\kern0pt}\ metis\ {\isacharparenleft}{\kern0pt}full{\isacharunderscore}{\kern0pt}types{\isacharparenright}{\kern0pt}\ comp{\isacharunderscore}{\kern0pt}associative{\isadigit{2}}\ right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}cfunc{\isacharunderscore}{\kern0pt}prod{\isacharparenright}{\kern0pt}\isanewline
\ \ \isanewline
\ \ \ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharparenleft}{\kern0pt}left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B\ {\isasymcirc}\isactrlsub c\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ f\ B\ m{\isacharparenright}{\kern0pt}\ {\isasymcirc}\isactrlsub c\ u\ {\isacharequal}{\kern0pt}\ h{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ u{\isacharunderscore}{\kern0pt}type\ h{\isacharunderscore}{\kern0pt}type\ k{\isacharunderscore}{\kern0pt}type\ u{\isacharunderscore}{\kern0pt}eq\isanewline
\ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharcomma}{\kern0pt}\ metis\ {\isacharparenleft}{\kern0pt}full{\isacharunderscore}{\kern0pt}types{\isacharparenright}{\kern0pt}\ comp{\isacharunderscore}{\kern0pt}associative{\isadigit{2}}\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}cfunc{\isacharunderscore}{\kern0pt}prod{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\ \ \isacommand{fix}\isamarkupfalse%
\ Z\ j\ y\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ j{\isacharunderscore}{\kern0pt}type{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}j\ {\isacharcolon}{\kern0pt}\ Z\ {\isasymrightarrow}\ {\isacharparenleft}{\kern0pt}f\isactrlsup {\isacharminus}{\kern0pt}\isactrlsup {\isadigit{1}}{\isasymlparr}B{\isasymrparr}\isactrlbsub m\isactrlesub {\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ y{\isacharunderscore}{\kern0pt}type{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}y\ {\isacharcolon}{\kern0pt}\ Z\ {\isasymrightarrow}\ {\isacharparenleft}{\kern0pt}f\isactrlsup {\isacharminus}{\kern0pt}\isactrlsup {\isadigit{1}}{\isasymlparr}B{\isasymrparr}\isactrlbsub m\isactrlesub {\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharparenleft}{\kern0pt}left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B\ {\isasymcirc}\isactrlsub c\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ f\ B\ m{\isacharparenright}{\kern0pt}\ {\isasymcirc}\isactrlsub c\ y\ {\isacharequal}{\kern0pt}\isanewline
\ \ \ \ \ \ \ {\isacharparenleft}{\kern0pt}left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B\ {\isasymcirc}\isactrlsub c\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ f\ B\ m{\isacharparenright}{\kern0pt}\ {\isasymcirc}\isactrlsub c\ j{\isachardoublequoteclose}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}j\ {\isacharequal}{\kern0pt}\ y{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ j{\isacharunderscore}{\kern0pt}type\ y{\isacharunderscore}{\kern0pt}type\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping{\isacharunderscore}{\kern0pt}type\ comp{\isacharunderscore}{\kern0pt}type\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}smt\ {\isacharparenleft}{\kern0pt}verit{\isacharcomma}{\kern0pt}\ ccfv{\isacharunderscore}{\kern0pt}threshold{\isacharparenright}{\kern0pt}\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}monomorphism\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}type\ monomorphism{\isacharunderscore}{\kern0pt}def{\isadigit{3}}{\isacharparenright}{\kern0pt}\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\begin{isamarkuptext}%
The lemma below corresponds to Proposition 2.1.41 in Halvorson.%
\end{isamarkuptext}\isamarkuptrue%
\isacommand{lemma}\isamarkupfalse%
\ in{\isacharunderscore}{\kern0pt}inverse{\isacharunderscore}{\kern0pt}image{\isacharcolon}{\kern0pt}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}f\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Y{\isachardoublequoteclose}\ {\isachardoublequoteopen}{\isacharparenleft}{\kern0pt}B{\isacharcomma}{\kern0pt}m{\isacharparenright}{\kern0pt}\ {\isasymsubseteq}\isactrlsub c\ Y{\isachardoublequoteclose}\ {\isachardoublequoteopen}x\ {\isasymin}\isactrlsub c\ X{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isacharparenleft}{\kern0pt}x\ {\isasymin}\isactrlbsub X\isactrlesub \ {\isacharparenleft}{\kern0pt}f\isactrlsup {\isacharminus}{\kern0pt}\isactrlsup {\isadigit{1}}{\isasymlparr}B{\isasymrparr}\isactrlbsub m\isactrlesub {\isacharcomma}{\kern0pt}\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B\ {\isasymcirc}\isactrlsub c\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ f\ B\ m{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}\ {\isacharequal}{\kern0pt}\ {\isacharparenleft}{\kern0pt}f\ {\isasymcirc}\isactrlsub c\ x\ {\isasymin}\isactrlbsub Y\isactrlesub \ {\isacharparenleft}{\kern0pt}B{\isacharcomma}{\kern0pt}m{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ m{\isacharunderscore}{\kern0pt}type{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}m\ {\isacharcolon}{\kern0pt}\ B\ {\isasymrightarrow}\ Y{\isachardoublequoteclose}\ {\isachardoublequoteopen}monomorphism\ m{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\kern0pt}{\isadigit{2}}{\isacharparenright}{\kern0pt}\ \isacommand{unfolding}\isamarkupfalse%
\ subobject{\isacharunderscore}{\kern0pt}of{\isacharunderscore}{\kern0pt}def{\isadigit{2}}\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}x\ {\isasymin}\isactrlbsub X\isactrlesub \ {\isacharparenleft}{\kern0pt}f\isactrlsup {\isacharminus}{\kern0pt}\isactrlsup {\isadigit{1}}{\isasymlparr}B{\isasymrparr}\isactrlbsub m\isactrlesub {\isacharcomma}{\kern0pt}\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B\ {\isasymcirc}\isactrlsub c\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ f\ B\ m{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{obtain}\isamarkupfalse%
\ h\ \isakeyword{where}\ h{\isacharunderscore}{\kern0pt}type{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}h\ {\isasymin}\isactrlsub c\ {\isacharparenleft}{\kern0pt}f\isactrlsup {\isacharminus}{\kern0pt}\isactrlsup {\isadigit{1}}{\isasymlparr}B{\isasymrparr}\isactrlbsub m\isactrlesub {\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isakeyword{and}\ h{\isacharunderscore}{\kern0pt}def{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}{\isacharparenleft}{\kern0pt}left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B\ {\isasymcirc}\isactrlsub c\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ f\ B\ m{\isacharparenright}{\kern0pt}\ {\isasymcirc}\isactrlsub c\ h\ {\isacharequal}{\kern0pt}\ x{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{unfolding}\isamarkupfalse%
\ relative{\isacharunderscore}{\kern0pt}member{\isacharunderscore}{\kern0pt}def{\isadigit{2}}\ factors{\isacharunderscore}{\kern0pt}through{\isacharunderscore}{\kern0pt}def\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}auto\ simp\ add{\isacharcolon}{\kern0pt}\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def{\isacharparenright}{\kern0pt}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}f\ {\isasymcirc}\isactrlsub c\ x\ {\isacharequal}{\kern0pt}\ f\ {\isasymcirc}\isactrlsub c\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B\ {\isasymcirc}\isactrlsub c\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ f\ B\ m\ {\isasymcirc}\isactrlsub c\ h{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ m{\isacharunderscore}{\kern0pt}type\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharcomma}{\kern0pt}\ simp\ add{\isacharcolon}{\kern0pt}\ comp{\isacharunderscore}{\kern0pt}associative{\isadigit{2}}\ h{\isacharunderscore}{\kern0pt}def{\isacharparenright}{\kern0pt}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}f\ {\isasymcirc}\isactrlsub c\ x\ {\isacharequal}{\kern0pt}\ {\isacharparenleft}{\kern0pt}f\ {\isasymcirc}\isactrlsub c\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B\ {\isasymcirc}\isactrlsub c\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ f\ B\ m{\isacharparenright}{\kern0pt}\ {\isasymcirc}\isactrlsub c\ h{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ m{\isacharunderscore}{\kern0pt}type\ h{\isacharunderscore}{\kern0pt}type\ h{\isacharunderscore}{\kern0pt}def\ comp{\isacharunderscore}{\kern0pt}associative{\isadigit{2}}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharcomma}{\kern0pt}\ blast{\isacharparenright}{\kern0pt}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}f\ {\isasymcirc}\isactrlsub c\ x\ {\isacharequal}{\kern0pt}\ {\isacharparenleft}{\kern0pt}m\ {\isasymcirc}\isactrlsub c\ right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B\ {\isasymcirc}\isactrlsub c\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ f\ B\ m{\isacharparenright}{\kern0pt}\ {\isasymcirc}\isactrlsub c\ h{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ h{\isacharunderscore}{\kern0pt}type\ m{\isacharunderscore}{\kern0pt}type\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharcomma}{\kern0pt}\ simp\ add{\isacharcolon}{\kern0pt}\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping{\isacharunderscore}{\kern0pt}eq\ m{\isacharunderscore}{\kern0pt}type{\isacharparenright}{\kern0pt}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}f\ {\isasymcirc}\isactrlsub c\ x\ {\isacharequal}{\kern0pt}\ m\ {\isasymcirc}\isactrlsub c\ right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B\ {\isasymcirc}\isactrlsub c\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ f\ B\ m\ {\isasymcirc}\isactrlsub c\ h{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ m{\isacharunderscore}{\kern0pt}type\ h{\isacharunderscore}{\kern0pt}type\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharcomma}{\kern0pt}\ smt\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ comp{\isacharunderscore}{\kern0pt}associative\ domain{\isacharunderscore}{\kern0pt}comp{\isacharparenright}{\kern0pt}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharparenleft}{\kern0pt}f\ {\isasymcirc}\isactrlsub c\ x{\isacharparenright}{\kern0pt}\ factorsthru\ m{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{unfolding}\isamarkupfalse%
\ factors{\isacharunderscore}{\kern0pt}through{\isacharunderscore}{\kern0pt}def\ \isacommand{using}\isamarkupfalse%
\ assms\ h{\isacharunderscore}{\kern0pt}type\ m{\isacharunderscore}{\kern0pt}type\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}rule{\isacharunderscore}{\kern0pt}tac\ x{\isacharequal}{\kern0pt}{\isachardoublequoteopen}right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B\ {\isasymcirc}\isactrlsub c\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ f\ B\ m\ {\isasymcirc}\isactrlsub c\ h{\isachardoublequoteclose}\ \isakeyword{in}\ exI{\isacharcomma}{\kern0pt}\isanewline
\ \ \ \ \ \ \ \ typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharcomma}{\kern0pt}\ auto\ simp\ add{\isacharcolon}{\kern0pt}\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def{\isacharparenright}{\kern0pt}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}f\ {\isasymcirc}\isactrlsub c\ x\ {\isasymin}\isactrlbsub Y\isactrlesub \ {\isacharparenleft}{\kern0pt}B{\isacharcomma}{\kern0pt}\ m{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{unfolding}\isamarkupfalse%
\ relative{\isacharunderscore}{\kern0pt}member{\isacharunderscore}{\kern0pt}def{\isadigit{2}}\ \isacommand{using}\isamarkupfalse%
\ assms\ m{\isacharunderscore}{\kern0pt}type\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharcomma}{\kern0pt}\ auto{\isacharparenright}{\kern0pt}\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ m{\isacharunderscore}{\kern0pt}type{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}m\ {\isacharcolon}{\kern0pt}\ B\ {\isasymrightarrow}\ Y{\isachardoublequoteclose}\ {\isachardoublequoteopen}monomorphism\ m{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\kern0pt}{\isadigit{2}}{\isacharparenright}{\kern0pt}\ \isacommand{unfolding}\isamarkupfalse%
\ subobject{\isacharunderscore}{\kern0pt}of{\isacharunderscore}{\kern0pt}def{\isadigit{2}}\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}f\ {\isasymcirc}\isactrlsub c\ x\ {\isasymin}\isactrlbsub Y\isactrlesub \ {\isacharparenleft}{\kern0pt}B{\isacharcomma}{\kern0pt}\ m{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymexists}h{\isachardot}{\kern0pt}\ h\ {\isacharcolon}{\kern0pt}\ domain\ {\isacharparenleft}{\kern0pt}f\ {\isasymcirc}\isactrlsub c\ x{\isacharparenright}{\kern0pt}\ {\isasymrightarrow}\ domain\ m\ {\isasymand}\ m\ {\isasymcirc}\isactrlsub c\ h\ {\isacharequal}{\kern0pt}\ f\ {\isasymcirc}\isactrlsub c\ x{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{unfolding}\isamarkupfalse%
\ relative{\isacharunderscore}{\kern0pt}member{\isacharunderscore}{\kern0pt}def{\isadigit{2}}\ factors{\isacharunderscore}{\kern0pt}through{\isacharunderscore}{\kern0pt}def\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{obtain}\isamarkupfalse%
\ h\ \isakeyword{where}\ h{\isacharunderscore}{\kern0pt}type{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}h\ {\isasymin}\isactrlsub c\ B{\isachardoublequoteclose}\ \isakeyword{and}\ h{\isacharunderscore}{\kern0pt}def{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}m\ {\isasymcirc}\isactrlsub c\ h\ {\isacharequal}{\kern0pt}\ f\ {\isasymcirc}\isactrlsub c\ x{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{unfolding}\isamarkupfalse%
\ relative{\isacharunderscore}{\kern0pt}member{\isacharunderscore}{\kern0pt}def{\isadigit{2}}\ factors{\isacharunderscore}{\kern0pt}through{\isacharunderscore}{\kern0pt}def\ \isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ domain{\isacharunderscore}{\kern0pt}comp\ m{\isacharunderscore}{\kern0pt}type\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymexists}j{\isachardot}{\kern0pt}\ j\ {\isasymin}\isactrlsub c\ {\isacharparenleft}{\kern0pt}f\isactrlsup {\isacharminus}{\kern0pt}\isactrlsup {\isadigit{1}}{\isasymlparr}B{\isasymrparr}\isactrlbsub m\isactrlesub {\isacharparenright}{\kern0pt}\ {\isasymand}\isanewline
\ \ \ \ \ \ \ \ \ {\isacharparenleft}{\kern0pt}right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B\ {\isasymcirc}\isactrlsub c\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ f\ B\ m{\isacharparenright}{\kern0pt}\ {\isasymcirc}\isactrlsub c\ j\ {\isacharequal}{\kern0pt}\ h\ {\isasymand}\isanewline
\ \ \ \ \ \ \ \ \ {\isacharparenleft}{\kern0pt}left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B\ {\isasymcirc}\isactrlsub c\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ f\ B\ m{\isacharparenright}{\kern0pt}\ {\isasymcirc}\isactrlsub c\ j\ {\isacharequal}{\kern0pt}\ x{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}pullback\ assms\ m{\isacharunderscore}{\kern0pt}type\ \isacommand{unfolding}\isamarkupfalse%
\ is{\isacharunderscore}{\kern0pt}pullback{\isacharunderscore}{\kern0pt}def\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}x\ factorsthru\ {\isacharparenleft}{\kern0pt}left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B\ {\isasymcirc}\isactrlsub c\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ f\ B\ m{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ m{\isacharunderscore}{\kern0pt}type\ assms\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharcomma}{\kern0pt}\ unfold\ factors{\isacharunderscore}{\kern0pt}through{\isacharunderscore}{\kern0pt}def{\isacharcomma}{\kern0pt}\ auto{\isacharparenright}{\kern0pt}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}x\ {\isasymin}\isactrlbsub X\isactrlesub \ {\isacharparenleft}{\kern0pt}f\isactrlsup {\isacharminus}{\kern0pt}\isactrlsup {\isadigit{1}}{\isasymlparr}B{\isasymrparr}\isactrlbsub m\isactrlesub {\isacharcomma}{\kern0pt}\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ B\ {\isasymcirc}\isactrlsub c\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}mapping\ f\ B\ m{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{unfolding}\isamarkupfalse%
\ relative{\isacharunderscore}{\kern0pt}member{\isacharunderscore}{\kern0pt}def{\isadigit{2}}\ \isacommand{using}\isamarkupfalse%
\ m{\isacharunderscore}{\kern0pt}type\ assms\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharcomma}{\kern0pt}\ simp\ add{\isacharcolon}{\kern0pt}\ inverse{\isacharunderscore}{\kern0pt}image{\isacharunderscore}{\kern0pt}monomorphism{\isacharparenright}{\kern0pt}\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\isadelimdocument
%
\endisadelimdocument
%
\isatagdocument
%
\isamarkupsubsection{Fibered Products%
}
\isamarkuptrue%
%
\endisatagdocument
{\isafolddocument}%
%
\isadelimdocument
%
\endisadelimdocument
%
\begin{isamarkuptext}%
The definition below corresponds to Definition 2.1.42 in Halvorson.%
\end{isamarkuptext}\isamarkuptrue%
\isacommand{definition}\isamarkupfalse%
\ fibered{\isacharunderscore}{\kern0pt}product\ {\isacharcolon}{\kern0pt}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}cset\ {\isasymRightarrow}\ cfunc\ {\isasymRightarrow}\ cfunc\ {\isasymRightarrow}\ cset\ {\isasymRightarrow}\ cset{\isachardoublequoteclose}\ {\isacharparenleft}{\kern0pt}{\isachardoublequoteopen}{\isacharunderscore}{\kern0pt}\ \isactrlbsub {\isacharunderscore}{\kern0pt}\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub {\isacharunderscore}{\kern0pt}\isactrlesub \ {\isacharunderscore}{\kern0pt}{\isachardoublequoteclose}\ {\isacharbrackleft}{\kern0pt}{\isadigit{6}}{\isadigit{6}}{\isacharcomma}{\kern0pt}{\isadigit{5}}{\isadigit{0}}{\isacharcomma}{\kern0pt}{\isadigit{5}}{\isadigit{0}}{\isacharcomma}{\kern0pt}{\isadigit{6}}{\isadigit{5}}{\isacharbrackright}{\kern0pt}{\isadigit{6}}{\isadigit{5}}{\isacharparenright}{\kern0pt}\ \isakeyword{where}\isanewline
\ \ {\isachardoublequoteopen}X\ \isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub g\isactrlesub \ Y\ {\isacharequal}{\kern0pt}\ {\isacharparenleft}{\kern0pt}SOME\ E{\isachardot}{\kern0pt}\ {\isasymexists}\ Z\ m{\isachardot}{\kern0pt}\ f\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Z\ {\isasymand}\ g\ {\isacharcolon}{\kern0pt}\ Y\ {\isasymrightarrow}\ Z\ {\isasymand}\isanewline
\ \ \ \ equalizer\ E\ m\ {\isacharparenleft}{\kern0pt}f\ {\isasymcirc}\isactrlsub c\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ Y{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}g\ {\isasymcirc}\isactrlsub c\ right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ Y{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}equalizer{\isacharcolon}{\kern0pt}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}f\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Z{\isachardoublequoteclose}\ {\isachardoublequoteopen}g\ {\isacharcolon}{\kern0pt}\ Y\ {\isasymrightarrow}\ Z{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isasymexists}\ m{\isachardot}{\kern0pt}\ equalizer\ {\isacharparenleft}{\kern0pt}X\ \isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub g\isactrlesub \ Y{\isacharparenright}{\kern0pt}\ m\ {\isacharparenleft}{\kern0pt}f\ {\isasymcirc}\isactrlsub c\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ Y{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}g\ {\isasymcirc}\isactrlsub c\ right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ Y{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}{\kern0pt}\isanewline
\ \ \isacommand{obtain}\isamarkupfalse%
\ E\ m\ \isakeyword{where}\ {\isachardoublequoteopen}equalizer\ E\ m\ {\isacharparenleft}{\kern0pt}f\ {\isasymcirc}\isactrlsub c\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ Y{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}g\ {\isasymcirc}\isactrlsub c\ right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ Y{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ equalizer{\isacharunderscore}{\kern0pt}exists\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharcomma}{\kern0pt}\ blast{\isacharparenright}{\kern0pt}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymexists}x\ Z\ m{\isachardot}{\kern0pt}\ f\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Z\ {\isasymand}\ g\ {\isacharcolon}{\kern0pt}\ Y\ {\isasymrightarrow}\ Z\ {\isasymand}\isanewline
\ \ \ \ \ \ equalizer\ x\ m\ {\isacharparenleft}{\kern0pt}f\ {\isasymcirc}\isactrlsub c\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ Y{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}g\ {\isasymcirc}\isactrlsub c\ right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ Y{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymexists}\ Z\ m{\isachardot}{\kern0pt}\ f\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Z\ {\isasymand}\ g\ {\isacharcolon}{\kern0pt}\ Y\ {\isasymrightarrow}\ Z\ {\isasymand}\ \isanewline
\ \ \ \ \ \ equalizer\ {\isacharparenleft}{\kern0pt}X\ \isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub g\isactrlesub \ Y{\isacharparenright}{\kern0pt}\ m\ {\isacharparenleft}{\kern0pt}f\ {\isasymcirc}\isactrlsub c\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ Y{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}g\ {\isasymcirc}\isactrlsub c\ right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ Y{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{unfolding}\isamarkupfalse%
\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}def\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}rule\ someI{\isacharunderscore}{\kern0pt}ex{\isacharparenright}{\kern0pt}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymexists}m{\isachardot}{\kern0pt}\ equalizer\ {\isacharparenleft}{\kern0pt}X\ \isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub g\isactrlesub \ Y{\isacharparenright}{\kern0pt}\ m\ {\isacharparenleft}{\kern0pt}f\ {\isasymcirc}\isactrlsub c\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ Y{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}g\ {\isasymcirc}\isactrlsub c\ right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ Y{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{definition}\isamarkupfalse%
\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ {\isacharcolon}{\kern0pt}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}cset\ {\isasymRightarrow}\ cfunc\ {\isasymRightarrow}\ cfunc\ {\isasymRightarrow}\ cset\ {\isasymRightarrow}\ cfunc{\isachardoublequoteclose}\ \isakeyword{where}\isanewline
\ \ {\isachardoublequoteopen}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ g\ Y\ {\isacharequal}{\kern0pt}\ {\isacharparenleft}{\kern0pt}SOME\ m{\isachardot}{\kern0pt}\ {\isasymexists}\ Z{\isachardot}{\kern0pt}\ f\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Z\ {\isasymand}\ g\ {\isacharcolon}{\kern0pt}\ Y\ {\isasymrightarrow}\ Z\ {\isasymand}\isanewline
\ \ \ \ equalizer\ {\isacharparenleft}{\kern0pt}X\ \isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub g\isactrlesub \ Y{\isacharparenright}{\kern0pt}\ m\ {\isacharparenleft}{\kern0pt}f\ {\isasymcirc}\isactrlsub c\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ Y{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}g\ {\isasymcirc}\isactrlsub c\ right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ Y{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism{\isacharunderscore}{\kern0pt}equalizer{\isacharcolon}{\kern0pt}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}f\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Z{\isachardoublequoteclose}\ {\isachardoublequoteopen}g\ {\isacharcolon}{\kern0pt}\ Y\ {\isasymrightarrow}\ Z{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}equalizer\ {\isacharparenleft}{\kern0pt}X\ \isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub g\isactrlesub \ Y{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ g\ Y{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}f\ {\isasymcirc}\isactrlsub c\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ Y{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}g\ {\isasymcirc}\isactrlsub c\ right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ Y{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}{\kern0pt}\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymexists}x\ Z{\isachardot}{\kern0pt}\ f\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Z\ {\isasymand}\isanewline
\ \ \ \ \ \ g\ {\isacharcolon}{\kern0pt}\ Y\ {\isasymrightarrow}\ Z\ {\isasymand}\ equalizer\ {\isacharparenleft}{\kern0pt}X\ \isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub g\isactrlesub \ Y{\isacharparenright}{\kern0pt}\ x\ {\isacharparenleft}{\kern0pt}f\ {\isasymcirc}\isactrlsub c\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ Y{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}g\ {\isasymcirc}\isactrlsub c\ right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ Y{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}equalizer\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymexists}Z{\isachardot}{\kern0pt}\ f\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Z\ {\isasymand}\ g\ {\isacharcolon}{\kern0pt}\ Y\ {\isasymrightarrow}\ Z\ {\isasymand}\isanewline
\ \ \ \ equalizer\ {\isacharparenleft}{\kern0pt}X\ \isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub g\isactrlesub \ Y{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ g\ Y{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}f\ {\isasymcirc}\isactrlsub c\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ Y{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}g\ {\isasymcirc}\isactrlsub c\ right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ Y{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{unfolding}\isamarkupfalse%
\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism{\isacharunderscore}{\kern0pt}def\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}rule\ someI{\isacharunderscore}{\kern0pt}ex{\isacharparenright}{\kern0pt}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}equalizer\ {\isacharparenleft}{\kern0pt}X\ \isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub g\isactrlesub \ Y{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ g\ Y{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}f\ {\isasymcirc}\isactrlsub c\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ Y{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}g\ {\isasymcirc}\isactrlsub c\ right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ Y{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism{\isacharunderscore}{\kern0pt}type{\isacharbrackleft}{\kern0pt}type{\isacharunderscore}{\kern0pt}rule{\isacharbrackright}{\kern0pt}{\isacharcolon}{\kern0pt}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}f\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Z{\isachardoublequoteclose}\ {\isachardoublequoteopen}g\ {\isacharcolon}{\kern0pt}\ Y\ {\isasymrightarrow}\ Z{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ g\ Y\ {\isacharcolon}{\kern0pt}\ X\ \isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub g\isactrlesub \ Y\ {\isasymrightarrow}\ X\ {\isasymtimes}\isactrlsub c\ Y{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ domain{\isacharunderscore}{\kern0pt}comp\ equalizer{\isacharunderscore}{\kern0pt}def\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism{\isacharunderscore}{\kern0pt}equalizer\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}type\ \isacommand{by}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism{\isacharunderscore}{\kern0pt}monomorphism{\isacharcolon}{\kern0pt}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}f\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Z{\isachardoublequoteclose}\ {\isachardoublequoteopen}g\ {\isacharcolon}{\kern0pt}\ Y\ {\isasymrightarrow}\ Z{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}monomorphism\ {\isacharparenleft}{\kern0pt}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ g\ Y{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ equalizer{\isacharunderscore}{\kern0pt}is{\isacharunderscore}{\kern0pt}monomorphism\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism{\isacharunderscore}{\kern0pt}equalizer\ \isacommand{by}\isamarkupfalse%
\ blast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{definition}\isamarkupfalse%
\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj\ {\isacharcolon}{\kern0pt}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}cset\ {\isasymRightarrow}\ cfunc\ {\isasymRightarrow}\ cfunc\ {\isasymRightarrow}\ cset\ {\isasymRightarrow}\ cfunc{\isachardoublequoteclose}\ \isakeyword{where}\isanewline
\ \ {\isachardoublequoteopen}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj\ X\ f\ g\ Y\ {\isacharequal}{\kern0pt}\ {\isacharparenleft}{\kern0pt}left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ Y{\isacharparenright}{\kern0pt}\ {\isasymcirc}\isactrlsub c\ {\isacharparenleft}{\kern0pt}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ g\ Y{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}type{\isacharbrackleft}{\kern0pt}type{\isacharunderscore}{\kern0pt}rule{\isacharbrackright}{\kern0pt}{\isacharcolon}{\kern0pt}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}f\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Z{\isachardoublequoteclose}\ {\isachardoublequoteopen}g\ {\isacharcolon}{\kern0pt}\ Y\ {\isasymrightarrow}\ Z{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj\ X\ f\ g\ Y\ {\isacharcolon}{\kern0pt}\ X\ \isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub g\isactrlesub \ Y\ {\isasymrightarrow}\ X{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}metis\ assms\ comp{\isacharunderscore}{\kern0pt}type\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}def\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism{\isacharunderscore}{\kern0pt}type\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}type{\isacharparenright}{\kern0pt}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{definition}\isamarkupfalse%
\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj\ {\isacharcolon}{\kern0pt}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}cset\ {\isasymRightarrow}\ cfunc\ {\isasymRightarrow}\ cfunc\ {\isasymRightarrow}\ cset\ {\isasymRightarrow}\ cfunc{\isachardoublequoteclose}\ \isakeyword{where}\isanewline
\ \ {\isachardoublequoteopen}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj\ X\ f\ g\ Y\ {\isacharequal}{\kern0pt}\ {\isacharparenleft}{\kern0pt}right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ Y{\isacharparenright}{\kern0pt}\ {\isasymcirc}\isactrlsub c\ {\isacharparenleft}{\kern0pt}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ g\ Y{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}type{\isacharbrackleft}{\kern0pt}type{\isacharunderscore}{\kern0pt}rule{\isacharbrackright}{\kern0pt}{\isacharcolon}{\kern0pt}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}f\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Z{\isachardoublequoteclose}\ {\isachardoublequoteopen}g\ {\isacharcolon}{\kern0pt}\ Y\ {\isasymrightarrow}\ Z{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj\ X\ f\ g\ Y\ {\isacharcolon}{\kern0pt}\ X\ \isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub g\isactrlesub \ Y\ {\isasymrightarrow}\ Y{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}metis\ assms\ comp{\isacharunderscore}{\kern0pt}type\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}def\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism{\isacharunderscore}{\kern0pt}type\ right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}type{\isacharparenright}{\kern0pt}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ pair{\isacharunderscore}{\kern0pt}factorsthru{\isacharunderscore}{\kern0pt}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism{\isacharcolon}{\kern0pt}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}f\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Z{\isachardoublequoteclose}\ {\isachardoublequoteopen}g\ {\isacharcolon}{\kern0pt}\ Y\ {\isasymrightarrow}\ Z{\isachardoublequoteclose}\ {\isachardoublequoteopen}x\ {\isacharcolon}{\kern0pt}\ A\ {\isasymrightarrow}\ X{\isachardoublequoteclose}\ {\isachardoublequoteopen}y\ {\isacharcolon}{\kern0pt}\ A\ {\isasymrightarrow}\ Y{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}f\ {\isasymcirc}\isactrlsub c\ x\ {\isacharequal}{\kern0pt}\ g\ {\isasymcirc}\isactrlsub c\ y\ {\isasymLongrightarrow}\ {\isasymlangle}x{\isacharcomma}{\kern0pt}y{\isasymrangle}\ factorsthru\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ g\ Y{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{unfolding}\isamarkupfalse%
\ factors{\isacharunderscore}{\kern0pt}through{\isacharunderscore}{\kern0pt}def\isanewline
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}{\kern0pt}\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ equalizer{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}equalizer\ {\isacharparenleft}{\kern0pt}X\ \isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub g\isactrlesub \ Y{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ g\ Y{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}f\ {\isasymcirc}\isactrlsub c\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ Y{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}g\ {\isasymcirc}\isactrlsub c\ right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ Y{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism{\isacharunderscore}{\kern0pt}equalizer\ assms\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharcomma}{\kern0pt}\ auto{\isacharparenright}{\kern0pt}\isanewline
\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}f\ {\isasymcirc}\isactrlsub c\ x\ {\isacharequal}{\kern0pt}\ g\ {\isasymcirc}\isactrlsub c\ y{\isachardoublequoteclose}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharparenleft}{\kern0pt}f\ {\isasymcirc}\isactrlsub c\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ Y{\isacharparenright}{\kern0pt}\ {\isasymcirc}\isactrlsub c\ {\isasymlangle}x{\isacharcomma}{\kern0pt}y{\isasymrangle}\ {\isacharequal}{\kern0pt}\ {\isacharparenleft}{\kern0pt}g\ {\isasymcirc}\isactrlsub c\ right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ Y{\isacharparenright}{\kern0pt}\ {\isasymcirc}\isactrlsub c\ {\isasymlangle}x{\isacharcomma}{\kern0pt}y{\isasymrangle}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharcomma}{\kern0pt}\ smt\ comp{\isacharunderscore}{\kern0pt}associative{\isadigit{2}}\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}cfunc{\isacharunderscore}{\kern0pt}prod\ right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}cfunc{\isacharunderscore}{\kern0pt}prod{\isacharparenright}{\kern0pt}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymexists}{\isacharbang}{\kern0pt}\ h{\isachardot}{\kern0pt}\ h\ {\isacharcolon}{\kern0pt}\ A\ {\isasymrightarrow}\ X\ \isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub g\isactrlesub \ Y\ {\isasymand}\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ g\ Y\ {\isasymcirc}\isactrlsub c\ h\ {\isacharequal}{\kern0pt}\ {\isasymlangle}x{\isacharcomma}{\kern0pt}y{\isasymrangle}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ similar{\isacharunderscore}{\kern0pt}equalizers\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharcomma}{\kern0pt}\ smt\ {\isacharparenleft}{\kern0pt}verit{\isacharcomma}{\kern0pt}\ del{\isacharunderscore}{\kern0pt}insts{\isacharparenright}{\kern0pt}\ \ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ equalizer\ equalizer{\isacharunderscore}{\kern0pt}def{\isacharparenright}{\kern0pt}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymexists}h{\isachardot}{\kern0pt}\ h\ {\isacharcolon}{\kern0pt}\ domain\ {\isasymlangle}x{\isacharcomma}{\kern0pt}y{\isasymrangle}\ {\isasymrightarrow}\ domain\ {\isacharparenleft}{\kern0pt}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ g\ Y{\isacharparenright}{\kern0pt}\ {\isasymand}\isanewline
\ \ \ \ \ \ \ \ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ g\ Y\ {\isasymcirc}\isactrlsub c\ h\ {\isacharequal}{\kern0pt}\ {\isasymlangle}x{\isacharcomma}{\kern0pt}y{\isasymrangle}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}metis\ assms{\isacharparenleft}{\kern0pt}{\isadigit{1}}{\isacharcomma}{\kern0pt}{\isadigit{2}}{\isacharparenright}{\kern0pt}\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ domain{\isacharunderscore}{\kern0pt}comp\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism{\isacharunderscore}{\kern0pt}type{\isacharparenright}{\kern0pt}\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}is{\isacharunderscore}{\kern0pt}pullback{\isacharcolon}{\kern0pt}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}f\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Z{\isachardoublequoteclose}\ {\isachardoublequoteopen}g\ {\isacharcolon}{\kern0pt}\ Y\ {\isasymrightarrow}\ Z{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}is{\isacharunderscore}{\kern0pt}pullback\ {\isacharparenleft}{\kern0pt}X\ \isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub g\isactrlesub \ Y{\isacharparenright}{\kern0pt}\ Y\ X\ Z\ \ {\isacharparenleft}{\kern0pt}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj\ X\ f\ g\ Y{\isacharparenright}{\kern0pt}\ g\ {\isacharparenleft}{\kern0pt}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj\ X\ f\ g\ Y{\isacharparenright}{\kern0pt}\ f{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{unfolding}\isamarkupfalse%
\ is{\isacharunderscore}{\kern0pt}pullback{\isacharunderscore}{\kern0pt}def\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ assms\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}type\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}type\isanewline
\isacommand{proof}\isamarkupfalse%
\ safe\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}g\ {\isasymcirc}\isactrlsub c\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj\ X\ f\ g\ Y\ {\isacharequal}{\kern0pt}\ f\ {\isasymcirc}\isactrlsub c\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj\ X\ f\ g\ Y{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{unfolding}\isamarkupfalse%
\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}def\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}def\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ comp{\isacharunderscore}{\kern0pt}associative{\isadigit{2}}\ equalizer{\isacharunderscore}{\kern0pt}def\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism{\isacharunderscore}{\kern0pt}equalizer\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharcomma}{\kern0pt}\ auto{\isacharparenright}{\kern0pt}\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\ \ \isacommand{fix}\isamarkupfalse%
\ A\ k\ h\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ k{\isacharunderscore}{\kern0pt}type{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}k\ {\isacharcolon}{\kern0pt}\ A\ {\isasymrightarrow}\ Y{\isachardoublequoteclose}\ \isakeyword{and}\ h{\isacharunderscore}{\kern0pt}type{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}h\ {\isacharcolon}{\kern0pt}\ A\ {\isasymrightarrow}\ X{\isachardoublequoteclose}\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ k{\isacharunderscore}{\kern0pt}h{\isacharunderscore}{\kern0pt}commutes{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}g\ {\isasymcirc}\isactrlsub c\ k\ {\isacharequal}{\kern0pt}\ f\ {\isasymcirc}\isactrlsub c\ h{\isachardoublequoteclose}\isanewline
\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymlangle}h{\isacharcomma}{\kern0pt}k{\isasymrangle}\ factorsthru\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ g\ Y{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ h{\isacharunderscore}{\kern0pt}type\ k{\isacharunderscore}{\kern0pt}h{\isacharunderscore}{\kern0pt}commutes\ k{\isacharunderscore}{\kern0pt}type\ pair{\isacharunderscore}{\kern0pt}factorsthru{\isacharunderscore}{\kern0pt}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymexists}j{\isachardot}{\kern0pt}\ j\ {\isacharcolon}{\kern0pt}\ A\ {\isasymrightarrow}\ X\ \isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub g\isactrlesub \ Y\ {\isasymand}\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ g\ Y\ {\isasymcirc}\isactrlsub c\ j\ {\isacharequal}{\kern0pt}\ {\isasymlangle}h{\isacharcomma}{\kern0pt}k{\isasymrangle}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}meson\ assms\ cfunc{\isacharunderscore}{\kern0pt}prod{\isacharunderscore}{\kern0pt}type\ factors{\isacharunderscore}{\kern0pt}through{\isacharunderscore}{\kern0pt}def{\isadigit{2}}\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism{\isacharunderscore}{\kern0pt}type\ h{\isacharunderscore}{\kern0pt}type\ k{\isacharunderscore}{\kern0pt}type{\isacharparenright}{\kern0pt}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymexists}j{\isachardot}{\kern0pt}\ j\ {\isacharcolon}{\kern0pt}\ A\ {\isasymrightarrow}\ X\ \isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub g\isactrlesub \ Y\ {\isasymand}\isanewline
\ \ \ \ \ \ \ \ \ \ \ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj\ X\ f\ g\ Y\ {\isasymcirc}\isactrlsub c\ j\ {\isacharequal}{\kern0pt}\ k\ {\isasymand}\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj\ X\ f\ g\ Y\ {\isasymcirc}\isactrlsub c\ j\ {\isacharequal}{\kern0pt}\ h{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{unfolding}\isamarkupfalse%
\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}def\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}def\ \isanewline
\ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}clarify{\isacharcomma}{\kern0pt}\ rule{\isacharunderscore}{\kern0pt}tac\ x{\isacharequal}{\kern0pt}j\ \isakeyword{in}\ exI{\isacharcomma}{\kern0pt}\ safe{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \isacommand{fix}\isamarkupfalse%
\ j\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ j{\isacharunderscore}{\kern0pt}type{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}j\ {\isacharcolon}{\kern0pt}\ A\ {\isasymrightarrow}\ X\ \isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub g\isactrlesub \ Y{\isachardoublequoteclose}\isanewline
\isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ g\ Y\ {\isasymcirc}\isactrlsub c\ j\ {\isacharequal}{\kern0pt}\ {\isasymlangle}h{\isacharcomma}{\kern0pt}k{\isasymrangle}\ {\isasymLongrightarrow}\isanewline
\ \ \ \ \ \ \ \ {\isacharparenleft}{\kern0pt}right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ Y\ {\isasymcirc}\isactrlsub c\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ g\ Y{\isacharparenright}{\kern0pt}\ {\isasymcirc}\isactrlsub c\ j\ {\isacharequal}{\kern0pt}\ k{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ h{\isacharunderscore}{\kern0pt}type\ k{\isacharunderscore}{\kern0pt}type\ j{\isacharunderscore}{\kern0pt}type\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharcomma}{\kern0pt}\ metis\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ comp{\isacharunderscore}{\kern0pt}associative\ right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}cfunc{\isacharunderscore}{\kern0pt}prod{\isacharparenright}{\kern0pt}\isanewline
\isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ g\ Y\ {\isasymcirc}\isactrlsub c\ j\ {\isacharequal}{\kern0pt}\ {\isasymlangle}h{\isacharcomma}{\kern0pt}k{\isasymrangle}\ {\isasymLongrightarrow}\isanewline
\ \ \ \ \ \ \ \ {\isacharparenleft}{\kern0pt}left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ Y\ {\isasymcirc}\isactrlsub c\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ g\ Y{\isacharparenright}{\kern0pt}\ {\isasymcirc}\isactrlsub c\ j\ {\isacharequal}{\kern0pt}\ h{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ h{\isacharunderscore}{\kern0pt}type\ k{\isacharunderscore}{\kern0pt}type\ j{\isacharunderscore}{\kern0pt}type\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharcomma}{\kern0pt}\ metis\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ comp{\isacharunderscore}{\kern0pt}associative\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}cfunc{\isacharunderscore}{\kern0pt}prod{\isacharparenright}{\kern0pt}\isanewline
\ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\ \ \isacommand{fix}\isamarkupfalse%
\ A\ j\ y\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ j{\isacharunderscore}{\kern0pt}type{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}j\ {\isacharcolon}{\kern0pt}\ A\ {\isasymrightarrow}\ X\ \isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub g\isactrlesub \ Y{\isachardoublequoteclose}\ \isakeyword{and}\ y{\isacharunderscore}{\kern0pt}type{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}y\ {\isacharcolon}{\kern0pt}\ A\ {\isasymrightarrow}\ X\ \isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub g\isactrlesub \ Y{\isachardoublequoteclose}\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj\ X\ f\ g\ Y\ {\isasymcirc}\isactrlsub c\ y\ {\isacharequal}{\kern0pt}\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj\ X\ f\ g\ Y\ {\isasymcirc}\isactrlsub c\ j{\isachardoublequoteclose}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ right{\isacharunderscore}{\kern0pt}eq{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ Y\ {\isasymcirc}\isactrlsub c\ {\isacharparenleft}{\kern0pt}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ g\ Y\ {\isasymcirc}\isactrlsub c\ y{\isacharparenright}{\kern0pt}\ {\isacharequal}{\kern0pt}\isanewline
\ \ \ \ \ \ right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ Y\ {\isasymcirc}\isactrlsub c\ {\isacharparenleft}{\kern0pt}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ g\ Y\ {\isasymcirc}\isactrlsub c\ j{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{unfolding}\isamarkupfalse%
\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}def\ \isacommand{using}\isamarkupfalse%
\ assms\ j{\isacharunderscore}{\kern0pt}type\ y{\isacharunderscore}{\kern0pt}type\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharcomma}{\kern0pt}\ simp\ add{\isacharcolon}{\kern0pt}\ comp{\isacharunderscore}{\kern0pt}associative{\isadigit{2}}{\isacharparenright}{\kern0pt}\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj\ X\ f\ g\ Y\ {\isasymcirc}\isactrlsub c\ y\ {\isacharequal}{\kern0pt}\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj\ X\ f\ g\ Y\ {\isasymcirc}\isactrlsub c\ j{\isachardoublequoteclose}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ left{\isacharunderscore}{\kern0pt}eq{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ Y\ {\isasymcirc}\isactrlsub c\ {\isacharparenleft}{\kern0pt}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ g\ Y\ {\isasymcirc}\isactrlsub c\ y{\isacharparenright}{\kern0pt}\ {\isacharequal}{\kern0pt}\isanewline
\ \ \ \ \ \ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ Y\ {\isasymcirc}\isactrlsub c\ {\isacharparenleft}{\kern0pt}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ g\ Y\ {\isasymcirc}\isactrlsub c\ j{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{unfolding}\isamarkupfalse%
\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}def\ \ \isacommand{using}\isamarkupfalse%
\ assms\ j{\isacharunderscore}{\kern0pt}type\ y{\isacharunderscore}{\kern0pt}type\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharcomma}{\kern0pt}\ simp\ add{\isacharcolon}{\kern0pt}\ comp{\isacharunderscore}{\kern0pt}associative{\isadigit{2}}{\isacharparenright}{\kern0pt}\isanewline
\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ mono{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}monomorphism\ {\isacharparenleft}{\kern0pt}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ g\ Y{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism{\isacharunderscore}{\kern0pt}monomorphism\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ g\ Y\ {\isasymcirc}\isactrlsub c\ y\ {\isacharequal}{\kern0pt}\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ g\ Y\ {\isasymcirc}\isactrlsub c\ j{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ right{\isacharunderscore}{\kern0pt}eq\ left{\isacharunderscore}{\kern0pt}eq\ cart{\isacharunderscore}{\kern0pt}prod{\isacharunderscore}{\kern0pt}eq\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism{\isacharunderscore}{\kern0pt}type\ y{\isacharunderscore}{\kern0pt}type\ j{\isacharunderscore}{\kern0pt}type\ assms\ comp{\isacharunderscore}{\kern0pt}type\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}subst\ cart{\isacharunderscore}{\kern0pt}prod{\isacharunderscore}{\kern0pt}eq{\isacharbrackleft}{\kern0pt}\isakeyword{where}\ Z{\isacharequal}{\kern0pt}A{\isacharcomma}{\kern0pt}\ \isakeyword{where}\ X{\isacharequal}{\kern0pt}X{\isacharcomma}{\kern0pt}\ \isakeyword{where}\ Y{\isacharequal}{\kern0pt}Y{\isacharbrackright}{\kern0pt}{\isacharcomma}{\kern0pt}\ auto{\isacharparenright}{\kern0pt}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}j\ {\isacharequal}{\kern0pt}\ y{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ mono\ assms\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism{\isacharunderscore}{\kern0pt}type\ j{\isacharunderscore}{\kern0pt}type\ y{\isacharunderscore}{\kern0pt}type\isanewline
\ \ \ \ \isacommand{unfolding}\isamarkupfalse%
\ monomorphism{\isacharunderscore}{\kern0pt}def\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\ \isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}eq{\isacharcolon}{\kern0pt}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}f\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Z{\isachardoublequoteclose}\ {\isachardoublequoteopen}g\ {\isacharcolon}{\kern0pt}\ Y\ {\isasymrightarrow}\ Z{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}f\ {\isasymcirc}\isactrlsub c\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj\ X\ f\ g\ Y\ {\isacharequal}{\kern0pt}\ g\ {\isasymcirc}\isactrlsub c\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj\ X\ f\ g\ Y{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ \ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}is{\isacharunderscore}{\kern0pt}pullback\ assms\isanewline
\ \ \ \ \isacommand{unfolding}\isamarkupfalse%
\ is{\isacharunderscore}{\kern0pt}pullback{\isacharunderscore}{\kern0pt}def\ \isacommand{by}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}pair{\isacharunderscore}{\kern0pt}member{\isacharcolon}{\kern0pt}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}f\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Z{\isachardoublequoteclose}\ {\isachardoublequoteopen}g\ {\isacharcolon}{\kern0pt}\ Y\ {\isasymrightarrow}\ Z{\isachardoublequoteclose}\ {\isachardoublequoteopen}x\ {\isasymin}\isactrlsub c\ X{\isachardoublequoteclose}\ {\isachardoublequoteopen}y\ {\isasymin}\isactrlsub c\ Y{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isacharparenleft}{\kern0pt}{\isasymlangle}x{\isacharcomma}{\kern0pt}\ y{\isasymrangle}\ {\isasymin}\isactrlbsub X\ {\isasymtimes}\isactrlsub c\ Y\isactrlesub \ {\isacharparenleft}{\kern0pt}X\isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub g\isactrlesub Y{\isacharcomma}{\kern0pt}\ \ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ g\ Y{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}\ {\isacharequal}{\kern0pt}\ {\isacharparenleft}{\kern0pt}f\ {\isasymcirc}\isactrlsub c\ x\ {\isacharequal}{\kern0pt}\ g\ {\isasymcirc}\isactrlsub c\ y{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymlangle}x{\isacharcomma}{\kern0pt}y{\isasymrangle}\ {\isasymin}\isactrlbsub X\ {\isasymtimes}\isactrlsub c\ Y\isactrlesub \ {\isacharparenleft}{\kern0pt}X\ \isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub g\isactrlesub \ Y{\isacharcomma}{\kern0pt}\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ g\ Y{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{obtain}\isamarkupfalse%
\ h\ \isakeyword{where}\isanewline
\ \ \ \ h{\isacharunderscore}{\kern0pt}type{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}h\ {\isasymin}\isactrlsub c\ X\isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub g\isactrlesub Y{\isachardoublequoteclose}\ \isakeyword{and}\ h{\isacharunderscore}{\kern0pt}eq{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ g\ Y\ {\isasymcirc}\isactrlsub c\ h\ {\isacharequal}{\kern0pt}\ {\isasymlangle}x{\isacharcomma}{\kern0pt}y{\isasymrangle}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{unfolding}\isamarkupfalse%
\ relative{\isacharunderscore}{\kern0pt}member{\isacharunderscore}{\kern0pt}def{\isadigit{2}}\ factors{\isacharunderscore}{\kern0pt}through{\isacharunderscore}{\kern0pt}def\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\kern0pt}{\isadigit{3}}{\isacharcomma}{\kern0pt}{\isadigit{4}}{\isacharparenright}{\kern0pt}\ cfunc{\isacharunderscore}{\kern0pt}prod{\isacharunderscore}{\kern0pt}type\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ left{\isacharunderscore}{\kern0pt}eq{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj\ X\ f\ g\ Y\ {\isasymcirc}\isactrlsub c\ h\ {\isacharequal}{\kern0pt}\ x{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{unfolding}\isamarkupfalse%
\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}def\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ h{\isacharunderscore}{\kern0pt}type\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharcomma}{\kern0pt}\ smt\ comp{\isacharunderscore}{\kern0pt}associative{\isadigit{2}}\ h{\isacharunderscore}{\kern0pt}eq\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}cfunc{\isacharunderscore}{\kern0pt}prod{\isacharparenright}{\kern0pt}\isanewline
\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ right{\isacharunderscore}{\kern0pt}eq{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj\ X\ f\ g\ Y\ {\isasymcirc}\isactrlsub c\ h\ {\isacharequal}{\kern0pt}\ y{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{unfolding}\isamarkupfalse%
\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}def\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ h{\isacharunderscore}{\kern0pt}type\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharcomma}{\kern0pt}\ smt\ comp{\isacharunderscore}{\kern0pt}associative{\isadigit{2}}\ h{\isacharunderscore}{\kern0pt}eq\ right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}cfunc{\isacharunderscore}{\kern0pt}prod{\isacharparenright}{\kern0pt}\isanewline
\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}f\ {\isasymcirc}\isactrlsub c\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj\ X\ f\ g\ Y\ {\isasymcirc}\isactrlsub c\ h\ {\isacharequal}{\kern0pt}\ g\ {\isasymcirc}\isactrlsub c\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj\ X\ f\ g\ Y\ {\isasymcirc}\isactrlsub c\ h{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ h{\isacharunderscore}{\kern0pt}type\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharcomma}{\kern0pt}\ simp\ add{\isacharcolon}{\kern0pt}\ comp{\isacharunderscore}{\kern0pt}associative{\isadigit{2}}\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}eq{\isacharparenright}{\kern0pt}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}f\ {\isasymcirc}\isactrlsub c\ x\ {\isacharequal}{\kern0pt}\ g\ {\isasymcirc}\isactrlsub c\ y{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ left{\isacharunderscore}{\kern0pt}eq\ right{\isacharunderscore}{\kern0pt}eq\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ f{\isacharunderscore}{\kern0pt}g{\isacharunderscore}{\kern0pt}eq{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}f\ {\isasymcirc}\isactrlsub c\ x\ {\isacharequal}{\kern0pt}\ g\ {\isasymcirc}\isactrlsub c\ y{\isachardoublequoteclose}\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymlangle}x{\isacharcomma}{\kern0pt}y{\isasymrangle}\ {\isasymin}\isactrlbsub X\ {\isasymtimes}\isactrlsub c\ Y\isactrlesub \ {\isacharparenleft}{\kern0pt}X\ \isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub g\isactrlesub \ Y{\isacharcomma}{\kern0pt}\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ g\ Y{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{unfolding}\isamarkupfalse%
\ relative{\isacharunderscore}{\kern0pt}member{\isacharunderscore}{\kern0pt}def\ factors{\isacharunderscore}{\kern0pt}through{\isacharunderscore}{\kern0pt}def\isanewline
\ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}safe{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymlangle}x{\isacharcomma}{\kern0pt}y{\isasymrangle}\ {\isasymin}\isactrlsub c\ X\ {\isasymtimes}\isactrlsub c\ Y{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ typecheck{\isacharunderscore}{\kern0pt}cfuncs\isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}monomorphism\ {\isacharparenleft}{\kern0pt}snd\ {\isacharparenleft}{\kern0pt}X\ \isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub g\isactrlesub \ Y{\isacharcomma}{\kern0pt}\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ g\ Y{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\kern0pt}{\isadigit{1}}{\isacharcomma}{\kern0pt}{\isadigit{2}}{\isacharparenright}{\kern0pt}\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism{\isacharunderscore}{\kern0pt}monomorphism\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}snd\ {\isacharparenleft}{\kern0pt}X\ \isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub g\isactrlesub \ Y{\isacharcomma}{\kern0pt}\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ g\ Y{\isacharparenright}{\kern0pt}\ {\isacharcolon}{\kern0pt}\ fst\ {\isacharparenleft}{\kern0pt}X\ \isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub g\isactrlesub \ Y{\isacharcomma}{\kern0pt}\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ g\ Y{\isacharparenright}{\kern0pt}\ {\isasymrightarrow}\ X\ {\isasymtimes}\isactrlsub c\ Y{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\kern0pt}{\isadigit{1}}{\isacharcomma}{\kern0pt}{\isadigit{2}}{\isacharparenright}{\kern0pt}\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism{\isacharunderscore}{\kern0pt}type\ \isacommand{by}\isamarkupfalse%
\ force\isanewline
\ \ \ \ \isacommand{have}\isamarkupfalse%
\ j{\isacharunderscore}{\kern0pt}exists{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}{\isasymAnd}\ Z\ k\ h{\isachardot}{\kern0pt}\ k\ {\isacharcolon}{\kern0pt}\ Z\ {\isasymrightarrow}\ Y\ {\isasymLongrightarrow}\ h\ {\isacharcolon}{\kern0pt}\ Z\ {\isasymrightarrow}\ X\ {\isasymLongrightarrow}\ g\ {\isasymcirc}\isactrlsub c\ k\ {\isacharequal}{\kern0pt}\ f\ {\isasymcirc}\isactrlsub c\ h\ {\isasymLongrightarrow}\isanewline
\ \ \ \ \ \ {\isacharparenleft}{\kern0pt}{\isasymexists}{\isacharbang}{\kern0pt}j{\isachardot}{\kern0pt}\ j\ {\isacharcolon}{\kern0pt}\ Z\ {\isasymrightarrow}\ X\ \isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub g\isactrlesub \ Y\ {\isasymand}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj\ X\ f\ g\ Y\ {\isasymcirc}\isactrlsub c\ j\ {\isacharequal}{\kern0pt}\ k\ {\isasymand}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj\ X\ f\ g\ Y\ {\isasymcirc}\isactrlsub c\ j\ {\isacharequal}{\kern0pt}\ h{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}is{\isacharunderscore}{\kern0pt}pullback\ assms\ \isacommand{unfolding}\isamarkupfalse%
\ is{\isacharunderscore}{\kern0pt}pullback{\isacharunderscore}{\kern0pt}def\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\isanewline
\ \ \ \ \isacommand{obtain}\isamarkupfalse%
\ j\ \isakeyword{where}\ j{\isacharunderscore}{\kern0pt}type{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}j\ {\isasymin}\isactrlsub c\ X\ \isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub g\isactrlesub \ Y{\isachardoublequoteclose}\ \isakeyword{and}\ \isanewline
\ \ \ \ \ \ j{\isacharunderscore}{\kern0pt}projs{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj\ X\ f\ g\ Y\ {\isasymcirc}\isactrlsub c\ j\ {\isacharequal}{\kern0pt}\ y{\isachardoublequoteclose}\ {\isachardoublequoteopen}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj\ X\ f\ g\ Y\ {\isasymcirc}\isactrlsub c\ j\ {\isacharequal}{\kern0pt}\ x{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ j{\isacharunderscore}{\kern0pt}exists{\isacharbrackleft}{\kern0pt}\isakeyword{where}\ Z{\isacharequal}{\kern0pt}{\isasymone}{\isacharcomma}{\kern0pt}\ \isakeyword{where}\ k{\isacharequal}{\kern0pt}y{\isacharcomma}{\kern0pt}\ \isakeyword{where}\ h{\isacharequal}{\kern0pt}x{\isacharbrackright}{\kern0pt}\ assms\ f{\isacharunderscore}{\kern0pt}g{\isacharunderscore}{\kern0pt}eq\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymexists}h{\isachardot}{\kern0pt}\ h\ {\isacharcolon}{\kern0pt}\ domain\ {\isasymlangle}x{\isacharcomma}{\kern0pt}y{\isasymrangle}\ {\isasymrightarrow}\ domain\ {\isacharparenleft}{\kern0pt}snd\ {\isacharparenleft}{\kern0pt}X\ \isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub g\isactrlesub \ Y{\isacharcomma}{\kern0pt}\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ g\ Y{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}\ {\isasymand}\isanewline
\ \ \ \ \ \ \ \ \ \ \ snd\ {\isacharparenleft}{\kern0pt}X\ \isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub g\isactrlesub \ Y{\isacharcomma}{\kern0pt}\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ g\ Y{\isacharparenright}{\kern0pt}\ {\isasymcirc}\isactrlsub c\ h\ {\isacharequal}{\kern0pt}\ {\isasymlangle}x{\isacharcomma}{\kern0pt}y{\isasymrangle}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}rule{\isacharunderscore}{\kern0pt}tac\ x{\isacharequal}{\kern0pt}j\ \isakeyword{in}\ exI{\isacharcomma}{\kern0pt}\ safe{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}j\ {\isacharcolon}{\kern0pt}\ domain\ {\isasymlangle}x{\isacharcomma}{\kern0pt}y{\isasymrangle}\ {\isasymrightarrow}\ domain\ {\isacharparenleft}{\kern0pt}snd\ {\isacharparenleft}{\kern0pt}X\ \isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub g\isactrlesub \ Y{\isacharcomma}{\kern0pt}\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ g\ Y{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ j{\isacharunderscore}{\kern0pt}type\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharcomma}{\kern0pt}\ auto{\isacharparenright}{\kern0pt}\isanewline
\isanewline
\ \ \ \ \ \ \isacommand{have}\isamarkupfalse%
\ left{\isacharunderscore}{\kern0pt}eq{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ Y\ {\isasymcirc}\isactrlsub c\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ g\ Y\ {\isasymcirc}\isactrlsub c\ j\ {\isacharequal}{\kern0pt}\ x{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ j{\isacharunderscore}{\kern0pt}projs\ assms\ j{\isacharunderscore}{\kern0pt}type\ comp{\isacharunderscore}{\kern0pt}associative{\isadigit{2}}\isanewline
\ \ \ \ \ \ \ \ \isacommand{unfolding}\isamarkupfalse%
\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}def\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharcomma}{\kern0pt}\ auto{\isacharparenright}{\kern0pt}\isanewline
\isanewline
\ \ \ \ \ \ \isacommand{have}\isamarkupfalse%
\ right{\isacharunderscore}{\kern0pt}eq{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ Y\ {\isasymcirc}\isactrlsub c\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ g\ Y\ {\isasymcirc}\isactrlsub c\ j\ {\isacharequal}{\kern0pt}\ y{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ j{\isacharunderscore}{\kern0pt}projs\ assms\ j{\isacharunderscore}{\kern0pt}type\ comp{\isacharunderscore}{\kern0pt}associative{\isadigit{2}}\isanewline
\ \ \ \ \ \ \ \ \isacommand{unfolding}\isamarkupfalse%
\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}def\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharcomma}{\kern0pt}\ auto{\isacharparenright}{\kern0pt}\isanewline
\isanewline
\ \ \ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}snd\ {\isacharparenleft}{\kern0pt}X\ \isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub g\isactrlesub \ Y{\isacharcomma}{\kern0pt}\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ g\ Y{\isacharparenright}{\kern0pt}\ {\isasymcirc}\isactrlsub c\ j\ {\isacharequal}{\kern0pt}\ {\isasymlangle}x{\isacharcomma}{\kern0pt}y{\isasymrangle}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ left{\isacharunderscore}{\kern0pt}eq\ right{\isacharunderscore}{\kern0pt}eq\ assms\ j{\isacharunderscore}{\kern0pt}type\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharcomma}{\kern0pt}\ simp\ add{\isacharcolon}{\kern0pt}\ cfunc{\isacharunderscore}{\kern0pt}prod{\isacharunderscore}{\kern0pt}unique{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}pair{\isacharunderscore}{\kern0pt}member{\isadigit{2}}{\isacharcolon}{\kern0pt}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}f\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Y{\isachardoublequoteclose}\ {\isachardoublequoteopen}g\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ E{\isachardoublequoteclose}\ {\isachardoublequoteopen}x\ {\isasymin}\isactrlsub c\ X{\isachardoublequoteclose}\ {\isachardoublequoteopen}y\ {\isasymin}\isactrlsub c\ X{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}g\ {\isasymcirc}\isactrlsub c\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj\ X\ f\ f\ X\ {\isacharequal}{\kern0pt}\ g\ {\isasymcirc}\isactrlsub c\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj\ X\ f\ f\ X{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isasymforall}x\ y{\isachardot}{\kern0pt}\ x\ {\isasymin}\isactrlsub c\ X\ {\isasymlongrightarrow}\ y\ {\isasymin}\isactrlsub c\ X\ {\isasymlongrightarrow}\ {\isasymlangle}x{\isacharcomma}{\kern0pt}y{\isasymrangle}\ {\isasymin}\isactrlbsub X\ {\isasymtimes}\isactrlsub c\ X\isactrlesub \ {\isacharparenleft}{\kern0pt}X\ \isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub f\isactrlesub \ X{\isacharcomma}{\kern0pt}\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ f\ X{\isacharparenright}{\kern0pt}\ {\isasymlongrightarrow}\ g\ {\isasymcirc}\isactrlsub c\ x\ {\isacharequal}{\kern0pt}\ g\ {\isasymcirc}\isactrlsub c\ y{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
{\isacharparenleft}{\kern0pt}clarify{\isacharparenright}{\kern0pt}\isanewline
\ \ \isacommand{fix}\isamarkupfalse%
\ x\ y\ \ \isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ x{\isacharunderscore}{\kern0pt}type{\isacharbrackleft}{\kern0pt}type{\isacharunderscore}{\kern0pt}rule{\isacharbrackright}{\kern0pt}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}x\ {\isasymin}\isactrlsub c\ X{\isachardoublequoteclose}\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ y{\isacharunderscore}{\kern0pt}type{\isacharbrackleft}{\kern0pt}type{\isacharunderscore}{\kern0pt}rule{\isacharbrackright}{\kern0pt}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}y\ {\isasymin}\isactrlsub c\ X{\isachardoublequoteclose}\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ a{\isadigit{3}}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}{\isasymlangle}x{\isacharcomma}{\kern0pt}y{\isasymrangle}\ {\isasymin}\isactrlbsub X\ {\isasymtimes}\isactrlsub c\ X\isactrlesub \ {\isacharparenleft}{\kern0pt}X\ \isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub f\isactrlesub \ X{\isacharcomma}{\kern0pt}\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ f\ X{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{obtain}\isamarkupfalse%
\ h\ \isakeyword{where}\isanewline
\ \ \ \ h{\isacharunderscore}{\kern0pt}type{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}h\ {\isasymin}\isactrlsub c\ X\isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub f\isactrlesub X{\isachardoublequoteclose}\ \isakeyword{and}\ h{\isacharunderscore}{\kern0pt}eq{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ f\ X\ {\isasymcirc}\isactrlsub c\ h\ {\isacharequal}{\kern0pt}\ {\isasymlangle}x{\isacharcomma}{\kern0pt}y{\isasymrangle}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}meson\ factors{\isacharunderscore}{\kern0pt}through{\isacharunderscore}{\kern0pt}def{\isadigit{2}}\ relative{\isacharunderscore}{\kern0pt}member{\isacharunderscore}{\kern0pt}def{\isadigit{2}}{\isacharparenright}{\kern0pt}\isanewline
\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ left{\isacharunderscore}{\kern0pt}eq{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj\ X\ f\ f\ X\ {\isasymcirc}\isactrlsub c\ h\ {\isacharequal}{\kern0pt}\ x{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{unfolding}\isamarkupfalse%
\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}def\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharcomma}{\kern0pt}\ smt\ {\isacharparenleft}{\kern0pt}z{\isadigit{3}}{\isacharparenright}{\kern0pt}\ assms{\isacharparenleft}{\kern0pt}{\isadigit{1}}{\isacharparenright}{\kern0pt}\ comp{\isacharunderscore}{\kern0pt}associative{\isadigit{2}}\ h{\isacharunderscore}{\kern0pt}eq\ h{\isacharunderscore}{\kern0pt}type\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}cfunc{\isacharunderscore}{\kern0pt}prod\ y{\isacharunderscore}{\kern0pt}type{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ right{\isacharunderscore}{\kern0pt}eq{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj\ X\ f\ f\ X\ {\isasymcirc}\isactrlsub c\ h\ {\isacharequal}{\kern0pt}\ y{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{unfolding}\isamarkupfalse%
\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}def\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharcomma}{\kern0pt}\ metis\ {\isacharparenleft}{\kern0pt}full{\isacharunderscore}{\kern0pt}types{\isacharparenright}{\kern0pt}\ a{\isadigit{3}}\ comp{\isacharunderscore}{\kern0pt}associative{\isadigit{2}}\ h{\isacharunderscore}{\kern0pt}eq\ h{\isacharunderscore}{\kern0pt}type\ relative{\isacharunderscore}{\kern0pt}member{\isacharunderscore}{\kern0pt}def{\isadigit{2}}\ right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}cfunc{\isacharunderscore}{\kern0pt}prod\ x{\isacharunderscore}{\kern0pt}type{\isacharparenright}{\kern0pt}\isanewline
\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}g\ {\isasymcirc}\isactrlsub c\ x\ {\isacharequal}{\kern0pt}\ g\ {\isasymcirc}\isactrlsub c\ y{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\kern0pt}{\isadigit{1}}{\isacharcomma}{\kern0pt}{\isadigit{2}}{\isacharcomma}{\kern0pt}{\isadigit{5}}{\isacharparenright}{\kern0pt}\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ comp{\isacharunderscore}{\kern0pt}associative\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}type\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}type\ h{\isacharunderscore}{\kern0pt}type\ left{\isacharunderscore}{\kern0pt}eq\ right{\isacharunderscore}{\kern0pt}eq\ \isacommand{by}\isamarkupfalse%
\ fastforce\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ kernel{\isacharunderscore}{\kern0pt}pair{\isacharunderscore}{\kern0pt}subset{\isacharcolon}{\kern0pt}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}f{\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Y{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isacharparenleft}{\kern0pt}X\ \isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub f\isactrlesub \ X{\isacharcomma}{\kern0pt}\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ f\ X{\isacharparenright}{\kern0pt}\ {\isasymsubseteq}\isactrlsub c\ X\ {\isasymtimes}\isactrlsub c\ X{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism{\isacharunderscore}{\kern0pt}monomorphism\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism{\isacharunderscore}{\kern0pt}type\ subobject{\isacharunderscore}{\kern0pt}of{\isacharunderscore}{\kern0pt}def{\isadigit{2}}\ \isacommand{by}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\begin{isamarkuptext}%
The three lemmas below correspond to Exercise 2.1.44 in Halvorson.%
\end{isamarkuptext}\isamarkuptrue%
\isacommand{lemma}\isamarkupfalse%
\ kern{\isacharunderscore}{\kern0pt}pair{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}iso{\isacharunderscore}{\kern0pt}TFAE{\isadigit{1}}{\isacharcolon}{\kern0pt}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}f{\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Y{\isachardoublequoteclose}\ {\isachardoublequoteopen}monomorphism\ f{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isacharparenleft}{\kern0pt}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj\ X\ f\ f\ X{\isacharparenright}{\kern0pt}\ {\isacharequal}{\kern0pt}\ {\isacharparenleft}{\kern0pt}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj\ X\ f\ f\ X{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}cases\ {\isachardoublequoteopen}{\isasymexists}x{\isachardot}{\kern0pt}\ x{\isasymin}\isactrlsub c\ X\isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub f\isactrlesub X{\isachardoublequoteclose}{\isacharcomma}{\kern0pt}\ clarify{\isacharparenright}{\kern0pt}\isanewline
\ \ \isacommand{fix}\isamarkupfalse%
\ x\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ x{\isacharunderscore}{\kern0pt}type{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}x{\isasymin}\isactrlsub c\ X\isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub f\isactrlesub X{\isachardoublequoteclose}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharparenleft}{\kern0pt}f\ {\isasymcirc}\isactrlsub c\ {\isacharparenleft}{\kern0pt}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj\ X\ f\ f\ X{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isasymcirc}\isactrlsub c\ x\ {\isacharequal}{\kern0pt}\ {\isacharparenleft}{\kern0pt}f{\isasymcirc}\isactrlsub c\ {\isacharparenleft}{\kern0pt}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj\ X\ f\ f\ X{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isasymcirc}\isactrlsub c\ x{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ comp{\isacharunderscore}{\kern0pt}associative\ equalizer{\isacharunderscore}{\kern0pt}def\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism{\isacharunderscore}{\kern0pt}equalizer\isanewline
\ \ \ \ \isacommand{unfolding}\isamarkupfalse%
\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}def\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}def\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharcomma}{\kern0pt}\ smt\ {\isacharparenleft}{\kern0pt}verit{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}f\ {\isasymcirc}\isactrlsub c\ {\isacharparenleft}{\kern0pt}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj\ X\ f\ f\ X{\isacharparenright}{\kern0pt}\ {\isacharequal}{\kern0pt}\ f{\isasymcirc}\isactrlsub c\ {\isacharparenleft}{\kern0pt}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj\ X\ f\ f\ X{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}is{\isacharunderscore}{\kern0pt}pullback\ is{\isacharunderscore}{\kern0pt}pullback{\isacharunderscore}{\kern0pt}def\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharparenleft}{\kern0pt}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj\ X\ f\ f\ X{\isacharparenright}{\kern0pt}\ {\isacharequal}{\kern0pt}\ {\isacharparenleft}{\kern0pt}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj\ X\ f\ f\ X{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}type\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}type\ monomorphism{\isacharunderscore}{\kern0pt}def\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymnexists}x{\isachardot}{\kern0pt}\ x\ {\isasymin}\isactrlsub c\ X\ \isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub f\isactrlesub \ X{\isachardoublequoteclose}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj\ X\ f\ f\ X\ {\isacharequal}{\kern0pt}\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj\ X\ f\ f\ X{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}type\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}type\ one{\isacharunderscore}{\kern0pt}separator\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ kern{\isacharunderscore}{\kern0pt}pair{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}iso{\isacharunderscore}{\kern0pt}TFAE{\isadigit{2}}{\isacharcolon}{\kern0pt}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}f{\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Y{\isachardoublequoteclose}\ {\isachardoublequoteopen}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj\ X\ f\ f\ X\ {\isacharequal}{\kern0pt}\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj\ X\ f\ f\ X{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}monomorphism\ f\ {\isasymand}\ isomorphism\ {\isacharparenleft}{\kern0pt}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj\ X\ f\ f\ X{\isacharparenright}{\kern0pt}\ {\isasymand}\ isomorphism\ {\isacharparenleft}{\kern0pt}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj\ X\ f\ f\ X{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\isanewline
\isacommand{proof}\isamarkupfalse%
\ safe\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}injective\ f{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{unfolding}\isamarkupfalse%
\ injective{\isacharunderscore}{\kern0pt}def\isanewline
\ \ \isacommand{proof}\isamarkupfalse%
\ clarify\isanewline
\ \ \ \ \isacommand{fix}\isamarkupfalse%
\ x\ y\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ x{\isacharunderscore}{\kern0pt}type{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}x\ {\isasymin}\isactrlsub c\ domain\ f{\isachardoublequoteclose}\ \isakeyword{and}\ y{\isacharunderscore}{\kern0pt}type{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}y\ {\isasymin}\isactrlsub c\ domain\ f{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ x{\isacharunderscore}{\kern0pt}type{\isadigit{2}}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}x\ {\isasymin}\isactrlsub c\ X{\isachardoublequoteclose}\ \isakeyword{and}\ y{\isacharunderscore}{\kern0pt}type{\isadigit{2}}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}y\ {\isasymin}\isactrlsub c\ X{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\kern0pt}{\isadigit{1}}{\isacharparenright}{\kern0pt}\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\isanewline
\ \ \ \ \isacommand{have}\isamarkupfalse%
\ x{\isacharunderscore}{\kern0pt}y{\isacharunderscore}{\kern0pt}type{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}{\isasymlangle}x{\isacharcomma}{\kern0pt}y{\isasymrangle}\ {\isacharcolon}{\kern0pt}\ {\isasymone}\ {\isasymrightarrow}\ X\ {\isasymtimes}\isactrlsub c\ X{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ x{\isacharunderscore}{\kern0pt}type{\isadigit{2}}\ y{\isacharunderscore}{\kern0pt}type{\isadigit{2}}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \isacommand{have}\isamarkupfalse%
\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}type{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ f\ X\ {\isacharcolon}{\kern0pt}\ X\ \isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub f\isactrlesub \ X\ {\isasymrightarrow}\ X\ {\isasymtimes}\isactrlsub c\ X{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ typecheck{\isacharunderscore}{\kern0pt}cfuncs\isanewline
\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}f\ {\isasymcirc}\isactrlsub c\ x\ {\isacharequal}{\kern0pt}\ f\ {\isasymcirc}\isactrlsub c\ y{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ factorsthru{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}{\isasymlangle}x{\isacharcomma}{\kern0pt}y{\isasymrangle}\ factorsthru\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ f\ X{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\kern0pt}{\isadigit{1}}{\isacharparenright}{\kern0pt}\ pair{\isacharunderscore}{\kern0pt}factorsthru{\isacharunderscore}{\kern0pt}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ x{\isacharunderscore}{\kern0pt}type{\isadigit{2}}\ y{\isacharunderscore}{\kern0pt}type{\isadigit{2}}\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{obtain}\isamarkupfalse%
\ xy\ \isakeyword{where}\ xy{\isacharunderscore}{\kern0pt}assms{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}xy\ {\isacharcolon}{\kern0pt}\ {\isasymone}\ {\isasymrightarrow}\ X\ \isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub f\isactrlesub \ X{\isachardoublequoteclose}\ {\isachardoublequoteopen}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ f\ X\ {\isasymcirc}\isactrlsub c\ xy\ {\isacharequal}{\kern0pt}\ {\isasymlangle}x{\isacharcomma}{\kern0pt}y{\isasymrangle}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ factors{\isacharunderscore}{\kern0pt}through{\isacharunderscore}{\kern0pt}def{\isadigit{2}}\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}type\ x{\isacharunderscore}{\kern0pt}y{\isacharunderscore}{\kern0pt}type\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\isanewline
\ \ \ \ \isacommand{have}\isamarkupfalse%
\ left{\isacharunderscore}{\kern0pt}proj{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj\ X\ f\ f\ X\ {\isasymcirc}\isactrlsub c\ xy\ {\isacharequal}{\kern0pt}\ x{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{unfolding}\isamarkupfalse%
\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}def\ \isacommand{using}\isamarkupfalse%
\ assms\ xy{\isacharunderscore}{\kern0pt}assms\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharcomma}{\kern0pt}\ metis\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ comp{\isacharunderscore}{\kern0pt}associative\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}cfunc{\isacharunderscore}{\kern0pt}prod\ x{\isacharunderscore}{\kern0pt}type{\isadigit{2}}\ xy{\isacharunderscore}{\kern0pt}assms{\isacharparenleft}{\kern0pt}{\isadigit{2}}{\isacharparenright}{\kern0pt}\ y{\isacharunderscore}{\kern0pt}type{\isadigit{2}}{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \isacommand{have}\isamarkupfalse%
\ right{\isacharunderscore}{\kern0pt}proj{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj\ X\ f\ f\ X\ {\isasymcirc}\isactrlsub c\ xy\ {\isacharequal}{\kern0pt}\ y{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{unfolding}\isamarkupfalse%
\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}def\ \isacommand{using}\isamarkupfalse%
\ assms\ xy{\isacharunderscore}{\kern0pt}assms\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharcomma}{\kern0pt}\ metis\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ comp{\isacharunderscore}{\kern0pt}associative\ right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}cfunc{\isacharunderscore}{\kern0pt}prod\ x{\isacharunderscore}{\kern0pt}type{\isadigit{2}}\ xy{\isacharunderscore}{\kern0pt}assms{\isacharparenleft}{\kern0pt}{\isadigit{2}}{\isacharparenright}{\kern0pt}\ y{\isacharunderscore}{\kern0pt}type{\isadigit{2}}{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \ \ \isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}x\ {\isacharequal}{\kern0pt}\ y{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\kern0pt}{\isadigit{2}}{\isacharparenright}{\kern0pt}\ left{\isacharunderscore}{\kern0pt}proj\ right{\isacharunderscore}{\kern0pt}proj\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}monomorphism\ f{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ injective{\isacharunderscore}{\kern0pt}imp{\isacharunderscore}{\kern0pt}monomorphism\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}diagonal\ X\ factorsthru\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ f\ X{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\kern0pt}{\isadigit{1}}{\isacharparenright}{\kern0pt}\ diagonal{\isacharunderscore}{\kern0pt}def\ id{\isacharunderscore}{\kern0pt}type\ pair{\isacharunderscore}{\kern0pt}factorsthru{\isacharunderscore}{\kern0pt}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ \isacommand{by}\isamarkupfalse%
\ fastforce\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{obtain}\isamarkupfalse%
\ xx\ \isakeyword{where}\ xx{\isacharunderscore}{\kern0pt}assms{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}xx\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ X\ \isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub f\isactrlesub \ X{\isachardoublequoteclose}\ {\isachardoublequoteopen}diagonal\ X\ {\isacharequal}{\kern0pt}\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ f\ X\ {\isasymcirc}\isactrlsub c\ xx{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\kern0pt}{\isadigit{1}}{\isacharparenright}{\kern0pt}\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ diagonal{\isacharunderscore}{\kern0pt}type\ factors{\isacharunderscore}{\kern0pt}through{\isacharunderscore}{\kern0pt}def\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism{\isacharunderscore}{\kern0pt}type\ \isacommand{by}\isamarkupfalse%
\ fastforce\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ eq{\isadigit{1}}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj\ X\ f\ f\ X\ {\isasymcirc}\isactrlsub c\ xx\ {\isacharequal}{\kern0pt}\ id\ X{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}smt\ assms{\isacharparenleft}{\kern0pt}{\isadigit{1}}{\isacharparenright}{\kern0pt}\ comp{\isacharunderscore}{\kern0pt}associative{\isadigit{2}}\ diagonal{\isacharunderscore}{\kern0pt}def\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism{\isacharunderscore}{\kern0pt}type\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}def\ id{\isacharunderscore}{\kern0pt}type\ right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}cfunc{\isacharunderscore}{\kern0pt}prod\ right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}type\ xx{\isacharunderscore}{\kern0pt}assms{\isacharparenright}{\kern0pt}\isanewline
\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ eq{\isadigit{2}}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}xx\ {\isasymcirc}\isactrlsub c\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj\ X\ f\ f\ X\ {\isacharequal}{\kern0pt}\ id\ {\isacharparenleft}{\kern0pt}X\ \isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub f\isactrlesub \ X{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}rule\ one{\isacharunderscore}{\kern0pt}separator{\isacharbrackleft}{\kern0pt}\isakeyword{where}\ X{\isacharequal}{\kern0pt}{\isachardoublequoteopen}X\ \isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub f\isactrlesub \ X{\isachardoublequoteclose}{\isacharcomma}{\kern0pt}\ \isakeyword{where}\ Y{\isacharequal}{\kern0pt}{\isachardoublequoteopen}X\ \isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub f\isactrlesub \ X{\isachardoublequoteclose}{\isacharbrackright}{\kern0pt}{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}xx\ {\isasymcirc}\isactrlsub c\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj\ X\ f\ f\ X\ {\isacharcolon}{\kern0pt}\ X\ \isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub f\isactrlesub \ X\ {\isasymrightarrow}\ X\ \isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub f\isactrlesub \ X{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\kern0pt}{\isadigit{1}}{\isacharparenright}{\kern0pt}\ comp{\isacharunderscore}{\kern0pt}type\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}type\ xx{\isacharunderscore}{\kern0pt}assms\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}id\isactrlsub c\ {\isacharparenleft}{\kern0pt}X\ \isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub f\isactrlesub \ X{\isacharparenright}{\kern0pt}\ {\isacharcolon}{\kern0pt}\ X\ \isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub f\isactrlesub \ X\ {\isasymrightarrow}\ X\ \isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub f\isactrlesub \ X{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}simp\ add{\isacharcolon}{\kern0pt}\ id{\isacharunderscore}{\kern0pt}type{\isacharparenright}{\kern0pt}\isanewline
\ \ \isacommand{next}\isamarkupfalse%
\isanewline
\ \ \ \ \isacommand{fix}\isamarkupfalse%
\ x\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ x{\isacharunderscore}{\kern0pt}type{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}x\ {\isasymin}\isactrlsub c\ X\ \isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub f\isactrlesub \ X{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{obtain}\isamarkupfalse%
\ a\ \isakeyword{where}\ a{\isacharunderscore}{\kern0pt}assms{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}{\isasymlangle}a{\isacharcomma}{\kern0pt}a{\isasymrangle}\ {\isacharequal}{\kern0pt}\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ f\ X\ {\isasymcirc}\isactrlsub c\ x{\isachardoublequoteclose}\ {\isachardoublequoteopen}a\ {\isasymin}\isactrlsub c\ X{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}smt\ assms\ cfunc{\isacharunderscore}{\kern0pt}prod{\isacharunderscore}{\kern0pt}comp\ cfunc{\isacharunderscore}{\kern0pt}prod{\isacharunderscore}{\kern0pt}unique\ comp{\isacharunderscore}{\kern0pt}type\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}def\isanewline
\ \ \ \ \ \ \ \ \ \ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism{\isacharunderscore}{\kern0pt}type\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}def\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}type{\isacharparenright}{\kern0pt}\isanewline
\isanewline
\ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharparenleft}{\kern0pt}xx\ {\isasymcirc}\isactrlsub c\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj\ X\ f\ f\ X{\isacharparenright}{\kern0pt}\ {\isasymcirc}\isactrlsub c\ x\ {\isacharequal}{\kern0pt}\ xx\ {\isasymcirc}\isactrlsub c\ right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj\ X\ X\ {\isasymcirc}\isactrlsub c\ {\isasymlangle}a{\isacharcomma}{\kern0pt}a{\isasymrangle}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ xx{\isacharunderscore}{\kern0pt}assms\ x{\isacharunderscore}{\kern0pt}type\ a{\isacharunderscore}{\kern0pt}assms\ assms\ comp{\isacharunderscore}{\kern0pt}associative{\isadigit{2}}\isanewline
\ \ \ \ \ \ \isacommand{unfolding}\isamarkupfalse%
\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}def\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharcomma}{\kern0pt}\ auto{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \isacommand{also}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isachardot}{\kern0pt}{\isachardot}{\kern0pt}{\isachardot}{\kern0pt}\ {\isacharequal}{\kern0pt}\ xx\ {\isasymcirc}\isactrlsub c\ a{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ a{\isacharunderscore}{\kern0pt}assms{\isacharparenleft}{\kern0pt}{\isadigit{2}}{\isacharparenright}{\kern0pt}\ right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}cfunc{\isacharunderscore}{\kern0pt}prod\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \ \ \isacommand{also}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isachardot}{\kern0pt}{\isachardot}{\kern0pt}{\isachardot}{\kern0pt}\ {\isacharequal}{\kern0pt}\ x{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharminus}{\kern0pt}\isanewline
\ \ \ \ \ \ \isacommand{have}\isamarkupfalse%
\ f{\isadigit{2}}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}{\isasymforall}c{\isachardot}{\kern0pt}\ c\ {\isacharcolon}{\kern0pt}\ {\isasymone}\ {\isasymrightarrow}\ X\ {\isasymlongrightarrow}\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ f\ X\ {\isasymcirc}\isactrlsub c\ xx\ {\isasymcirc}\isactrlsub c\ c\ {\isacharequal}{\kern0pt}\ diagonal\ X\ {\isasymcirc}\isactrlsub c\ c{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{proof}\isamarkupfalse%
\ safe\isanewline
\ \ \ \ \ \ \ \ \isacommand{fix}\isamarkupfalse%
\ c\isanewline
\ \ \ \ \ \ \ \ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}c\ {\isasymin}\isactrlsub c\ X{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ f\ X\ {\isasymcirc}\isactrlsub c\ xx\ {\isasymcirc}\isactrlsub c\ c\ {\isacharequal}{\kern0pt}\ diagonal\ X\ {\isasymcirc}\isactrlsub c\ c{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ xx{\isacharunderscore}{\kern0pt}assms\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharcomma}{\kern0pt}\ simp\ add{\isacharcolon}{\kern0pt}\ comp{\isacharunderscore}{\kern0pt}associative{\isadigit{2}}\ xx{\isacharunderscore}{\kern0pt}assms{\isacharparenleft}{\kern0pt}{\isadigit{2}}{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\ \ \ \ \ \ \isacommand{have}\isamarkupfalse%
\ f{\isadigit{4}}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}xx\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ codomain\ xx{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ xx{\isacharunderscore}{\kern0pt}assms\ \isacommand{by}\isamarkupfalse%
\ presburger\isanewline
\ \ \ \ \ \ \isacommand{have}\isamarkupfalse%
\ f{\isadigit{5}}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}diagonal\ X\ {\isasymcirc}\isactrlsub c\ a\ {\isacharequal}{\kern0pt}\ {\isasymlangle}a{\isacharcomma}{\kern0pt}a{\isasymrangle}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ a{\isacharunderscore}{\kern0pt}assms\ diag{\isacharunderscore}{\kern0pt}on{\isacharunderscore}{\kern0pt}elements\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \ \ \ \ \isacommand{have}\isamarkupfalse%
\ f{\isadigit{6}}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}codomain\ {\isacharparenleft}{\kern0pt}xx\ {\isasymcirc}\isactrlsub c\ a{\isacharparenright}{\kern0pt}\ {\isacharequal}{\kern0pt}\ codomain\ xx{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ f{\isadigit{4}}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}meson\ a{\isacharunderscore}{\kern0pt}assms\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ comp{\isacharunderscore}{\kern0pt}type{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ f{\isadigit{9}}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}x\ {\isacharcolon}{\kern0pt}\ domain\ x\ {\isasymrightarrow}\ codomain\ xx{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ x{\isacharunderscore}{\kern0pt}type\ xx{\isacharunderscore}{\kern0pt}assms\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \ \ \ \ \isacommand{have}\isamarkupfalse%
\ f{\isadigit{1}}{\isadigit{0}}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}{\isasymforall}c\ ca{\isachardot}{\kern0pt}\ domain\ {\isacharparenleft}{\kern0pt}ca\ {\isasymcirc}\isactrlsub c\ a{\isacharparenright}{\kern0pt}\ {\isacharequal}{\kern0pt}\ {\isasymone}\ {\isasymor}\ {\isasymnot}\ ca\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ c{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}meson\ a{\isacharunderscore}{\kern0pt}assms\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ comp{\isacharunderscore}{\kern0pt}type{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}domain\ {\isasymlangle}a{\isacharcomma}{\kern0pt}a{\isasymrangle}\ {\isacharequal}{\kern0pt}\ {\isasymone}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ diagonal{\isacharunderscore}{\kern0pt}type\ f{\isadigit{5}}\ \isacommand{by}\isamarkupfalse%
\ force\isanewline
\ \ \ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ f{\isadigit{1}}{\isadigit{1}}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}domain\ x\ {\isacharequal}{\kern0pt}\ {\isasymone}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ x{\isacharunderscore}{\kern0pt}type\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}xx\ {\isasymcirc}\isactrlsub c\ a\ {\isasymin}\isactrlsub c\ codomain\ xx{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ a{\isacharunderscore}{\kern0pt}assms\ comp{\isacharunderscore}{\kern0pt}type\ f{\isadigit{4}}\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}{\kern0pt}thesis\isanewline
\ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ f{\isadigit{1}}{\isadigit{1}}\ f{\isadigit{9}}\ f{\isadigit{5}}\ f{\isadigit{2}}\ a{\isacharunderscore}{\kern0pt}assms\ assms{\isacharparenleft}{\kern0pt}{\isadigit{1}}{\isacharparenright}{\kern0pt}\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism{\isacharunderscore}{\kern0pt}monomorphism\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism{\isacharunderscore}{\kern0pt}type\ monomorphism{\isacharunderscore}{\kern0pt}def\ x{\isacharunderscore}{\kern0pt}type\isanewline
\ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\ \ \ \ \isacommand{also}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isachardot}{\kern0pt}{\isachardot}{\kern0pt}{\isachardot}{\kern0pt}\ {\isacharequal}{\kern0pt}\ id\isactrlsub c\ {\isacharparenleft}{\kern0pt}X\ \isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub f\isactrlesub \ X{\isacharparenright}{\kern0pt}\ {\isasymcirc}\isactrlsub c\ x{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}metis\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ id{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}unit\ x{\isacharunderscore}{\kern0pt}type{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharparenleft}{\kern0pt}xx\ {\isasymcirc}\isactrlsub c\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj\ X\ f\ f\ X{\isacharparenright}{\kern0pt}\ {\isasymcirc}\isactrlsub c\ x\ {\isacharequal}{\kern0pt}\ id\isactrlsub c\ {\isacharparenleft}{\kern0pt}X\ \isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub f\isactrlesub \ X{\isacharparenright}{\kern0pt}\ {\isasymcirc}\isactrlsub c\ x{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ calculation\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}isomorphism\ {\isacharparenleft}{\kern0pt}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj\ X\ f\ f\ X{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{unfolding}\isamarkupfalse%
\ isomorphism{\isacharunderscore}{\kern0pt}def\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}metis\ assms\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ eq{\isadigit{1}}\ eq{\isadigit{2}}\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}type\ xx{\isacharunderscore}{\kern0pt}assms{\isacharparenleft}{\kern0pt}{\isadigit{1}}{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}\isanewline
\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}isomorphism\ {\isacharparenleft}{\kern0pt}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj\ X\ f\ f\ X{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{unfolding}\isamarkupfalse%
\ isomorphism{\isacharunderscore}{\kern0pt}def\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\kern0pt}{\isadigit{2}}{\isacharparenright}{\kern0pt}\ isomorphism{\isacharunderscore}{\kern0pt}def\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ kern{\isacharunderscore}{\kern0pt}pair{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}iso{\isacharunderscore}{\kern0pt}TFAE{\isadigit{3}}{\isacharcolon}{\kern0pt}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}f{\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ Y{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}isomorphism\ {\isacharparenleft}{\kern0pt}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj\ X\ f\ f\ X{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ {\isachardoublequoteopen}isomorphism\ {\isacharparenleft}{\kern0pt}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj\ X\ f\ f\ X{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj\ X\ f\ f\ X\ {\isacharequal}{\kern0pt}\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj\ X\ f\ f\ X{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}{\kern0pt}\isanewline
\ \ \isacommand{obtain}\isamarkupfalse%
\ q{\isadigit{0}}\ \isakeyword{where}\ \isanewline
\ \ \ \ q{\isadigit{0}}{\isacharunderscore}{\kern0pt}assms{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}q{\isadigit{0}}\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ X\ \isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub f\isactrlesub \ X{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ {\isachardoublequoteopen}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj\ X\ f\ f\ X\ {\isasymcirc}\isactrlsub c\ q{\isadigit{0}}\ {\isacharequal}{\kern0pt}\ id\ X{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ {\isachardoublequoteopen}q{\isadigit{0}}\ {\isasymcirc}\isactrlsub c\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj\ X\ f\ f\ X\ {\isacharequal}{\kern0pt}\ id\ {\isacharparenleft}{\kern0pt}X\ \isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub f\isactrlesub \ X{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\kern0pt}{\isadigit{1}}{\isacharcomma}{\kern0pt}{\isadigit{2}}{\isacharparenright}{\kern0pt}\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ isomorphism{\isacharunderscore}{\kern0pt}def\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharcomma}{\kern0pt}\ force{\isacharparenright}{\kern0pt}\isanewline
\isanewline
\ \ \isacommand{obtain}\isamarkupfalse%
\ q{\isadigit{1}}\ \isakeyword{where}\ \isanewline
\ \ \ \ q{\isadigit{1}}{\isacharunderscore}{\kern0pt}assms{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}q{\isadigit{1}}\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ X\ \isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub f\isactrlesub \ X{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ {\isachardoublequoteopen}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj\ X\ f\ f\ X\ {\isasymcirc}\isactrlsub c\ q{\isadigit{1}}\ {\isacharequal}{\kern0pt}\ id\ X{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ {\isachardoublequoteopen}q{\isadigit{1}}\ {\isasymcirc}\isactrlsub c\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj\ X\ f\ f\ X\ {\isacharequal}{\kern0pt}\ id\ {\isacharparenleft}{\kern0pt}X\ \isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub f\isactrlesub \ X{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\kern0pt}{\isadigit{1}}{\isacharcomma}{\kern0pt}{\isadigit{3}}{\isacharparenright}{\kern0pt}\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ isomorphism{\isacharunderscore}{\kern0pt}def\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharcomma}{\kern0pt}\ force{\isacharparenright}{\kern0pt}\isanewline
\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymAnd}x{\isachardot}{\kern0pt}\ x\ {\isasymin}\isactrlsub c\ domain\ f\ {\isasymLongrightarrow}\ q{\isadigit{0}}\ {\isasymcirc}\isactrlsub c\ x\ {\isacharequal}{\kern0pt}\ q{\isadigit{1}}\ {\isasymcirc}\isactrlsub c\ x{\isachardoublequoteclose}\isanewline
\ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharminus}{\kern0pt}\isanewline
\ \ \ \ \isacommand{fix}\isamarkupfalse%
\ x\ \isanewline
\ \ \ \ \isacommand{have}\isamarkupfalse%
\ fxfx{\isacharcolon}{\kern0pt}\ \ {\isachardoublequoteopen}f{\isasymcirc}\isactrlsub c\ x\ {\isacharequal}{\kern0pt}\ f{\isasymcirc}\isactrlsub c\ x{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ x{\isacharunderscore}{\kern0pt}type{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}x\ {\isasymin}\isactrlsub c\ domain\ f{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{have}\isamarkupfalse%
\ factorsthru{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}{\isasymlangle}x{\isacharcomma}{\kern0pt}x{\isasymrangle}\ factorsthru\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ f\ X{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\kern0pt}{\isadigit{1}}{\isacharparenright}{\kern0pt}\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ fxfx\ pair{\isacharunderscore}{\kern0pt}factorsthru{\isacharunderscore}{\kern0pt}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ x{\isacharunderscore}{\kern0pt}type\ \ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{obtain}\isamarkupfalse%
\ xx\ \isakeyword{where}\ xx{\isacharunderscore}{\kern0pt}assms{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}xx\ {\isacharcolon}{\kern0pt}\ {\isasymone}\ {\isasymrightarrow}\ X\ \isactrlbsub f\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub f\isactrlesub \ X{\isachardoublequoteclose}\ {\isachardoublequoteopen}{\isasymlangle}x{\isacharcomma}{\kern0pt}x{\isasymrangle}\ {\isacharequal}{\kern0pt}\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism\ X\ f\ f\ X\ {\isasymcirc}\isactrlsub c\ xx{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}smt\ assms{\isacharparenleft}{\kern0pt}{\isadigit{1}}{\isacharparenright}{\kern0pt}\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ diag{\isacharunderscore}{\kern0pt}on{\isacharunderscore}{\kern0pt}elements\ diagonal{\isacharunderscore}{\kern0pt}type\ domain{\isacharunderscore}{\kern0pt}comp\ factors{\isacharunderscore}{\kern0pt}through{\isacharunderscore}{\kern0pt}def\ factorsthru\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism{\isacharunderscore}{\kern0pt}type\ x{\isacharunderscore}{\kern0pt}type{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \ \ \isanewline
\ \ \ \ \isacommand{have}\isamarkupfalse%
\ projection{\isacharunderscore}{\kern0pt}prop{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}q{\isadigit{0}}\ {\isasymcirc}\isactrlsub c\ {\isacharparenleft}{\kern0pt}{\isacharparenleft}{\kern0pt}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj\ X\ f\ f\ X{\isacharparenright}{\kern0pt}{\isasymcirc}\isactrlsub c\ xx{\isacharparenright}{\kern0pt}\ {\isacharequal}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ q{\isadigit{1}}\ {\isasymcirc}\isactrlsub c\ {\isacharparenleft}{\kern0pt}{\isacharparenleft}{\kern0pt}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj\ X\ f\ f\ X{\isacharparenright}{\kern0pt}{\isasymcirc}\isactrlsub c\ xx{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ q{\isadigit{0}}{\isacharunderscore}{\kern0pt}assms\ q{\isadigit{1}}{\isacharunderscore}{\kern0pt}assms\ xx{\isacharunderscore}{\kern0pt}assms\ assms\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharcomma}{\kern0pt}\ simp\ add{\isacharcolon}{\kern0pt}\ comp{\isacharunderscore}{\kern0pt}associative{\isadigit{2}}{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ fun{\isacharunderscore}{\kern0pt}fact{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}x\ {\isacharequal}{\kern0pt}\ {\isacharparenleft}{\kern0pt}{\isacharparenleft}{\kern0pt}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj\ X\ f\ f\ X{\isacharparenright}{\kern0pt}\ {\isasymcirc}\isactrlsub c\ q{\isadigit{1}}{\isacharparenright}{\kern0pt}{\isasymcirc}\isactrlsub c\ {\isacharparenleft}{\kern0pt}{\isacharparenleft}{\kern0pt}{\isacharparenleft}{\kern0pt}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj\ X\ f\ f\ X{\isacharparenright}{\kern0pt}{\isasymcirc}\isactrlsub c\ xx{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}smt\ assms{\isacharparenleft}{\kern0pt}{\isadigit{1}}{\isacharparenright}{\kern0pt}\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ comp{\isacharunderscore}{\kern0pt}associative{\isadigit{2}}\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}def\isanewline
\ \ \ \ \ \ \ \ \ \ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}type\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism{\isacharunderscore}{\kern0pt}type\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}def\isanewline
\ \ \ \ \ \ \ \ \ \ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}type\ id{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}unit{\isadigit{2}}\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}cfunc{\isacharunderscore}{\kern0pt}prod\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}type\isanewline
\ \ \ \ \ \ \ \ \ \ q{\isadigit{1}}{\isacharunderscore}{\kern0pt}assms\ right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}cfunc{\isacharunderscore}{\kern0pt}prod\ right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}type\ x{\isacharunderscore}{\kern0pt}type\ xx{\isacharunderscore}{\kern0pt}assms{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}q{\isadigit{1}}\ \ {\isasymcirc}\isactrlsub c\ {\isacharparenleft}{\kern0pt}{\isacharparenleft}{\kern0pt}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj\ X\ f\ f\ X{\isacharparenright}{\kern0pt}{\isasymcirc}\isactrlsub c\ xx{\isacharparenright}{\kern0pt}\ {\isacharequal}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ q{\isadigit{0}}\ \ {\isasymcirc}\isactrlsub c\ {\isacharparenleft}{\kern0pt}{\isacharparenleft}{\kern0pt}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj\ X\ f\ f\ X{\isacharparenright}{\kern0pt}{\isasymcirc}\isactrlsub c\ xx{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ q{\isadigit{0}}{\isacharunderscore}{\kern0pt}assms\ q{\isadigit{1}}{\isacharunderscore}{\kern0pt}assms\ xx{\isacharunderscore}{\kern0pt}assms\ assms\ \isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharcomma}{\kern0pt}\ smt\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ comp{\isacharunderscore}{\kern0pt}associative{\isadigit{2}}\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}def\isanewline
\ \ \ \ \ \ \ \ \ \ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}morphism{\isacharunderscore}{\kern0pt}type\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}def\ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}cfunc{\isacharunderscore}{\kern0pt}prod\isanewline
\ \ \ \ \ \ \ \ \ \ left{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}type\ projection{\isacharunderscore}{\kern0pt}prop\ right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}cfunc{\isacharunderscore}{\kern0pt}prod\ right{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}type\ x{\isacharunderscore}{\kern0pt}type\ xx{\isacharunderscore}{\kern0pt}assms{\isacharparenleft}{\kern0pt}{\isadigit{2}}{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}q{\isadigit{0}}\ {\isasymcirc}\isactrlsub c\ x\ {\isacharequal}{\kern0pt}\ q{\isadigit{1}}\ {\isasymcirc}\isactrlsub c\ x{\isachardoublequoteclose}\ \ \ \ \ \ \isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}smt\ assms{\isacharparenleft}{\kern0pt}{\isadigit{1}}{\isacharparenright}{\kern0pt}\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ codomain{\isacharunderscore}{\kern0pt}comp\ comp{\isacharunderscore}{\kern0pt}associative\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}type\isanewline
\ \ \ \ \ \ \ \ \ \ fun{\isacharunderscore}{\kern0pt}fact\ id{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}unit{\isadigit{2}}\ q{\isadigit{0}}{\isacharunderscore}{\kern0pt}assms\ q{\isadigit{1}}{\isacharunderscore}{\kern0pt}assms\ xx{\isacharunderscore}{\kern0pt}assms{\isacharparenright}{\kern0pt}\isanewline
\ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}q{\isadigit{0}}\ {\isacharequal}{\kern0pt}\ q{\isadigit{1}}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}metis\ assms{\isacharparenleft}{\kern0pt}{\isadigit{1}}{\isacharparenright}{\kern0pt}\ cfunc{\isacharunderscore}{\kern0pt}type{\isacharunderscore}{\kern0pt}def\ one{\isacharunderscore}{\kern0pt}separator{\isacharunderscore}{\kern0pt}contrapos\ q{\isadigit{0}}{\isacharunderscore}{\kern0pt}assms{\isacharparenleft}{\kern0pt}{\isadigit{1}}{\isacharparenright}{\kern0pt}\ q{\isadigit{1}}{\isacharunderscore}{\kern0pt}assms{\isacharparenleft}{\kern0pt}{\isadigit{1}}{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj\ X\ f\ f\ X\ {\isacharequal}{\kern0pt}\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj\ X\ f\ f\ X{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}smt\ assms{\isacharparenleft}{\kern0pt}{\isadigit{1}}{\isacharparenright}{\kern0pt}\ comp{\isacharunderscore}{\kern0pt}associative{\isadigit{2}}\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}type\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj{\isacharunderscore}{\kern0pt}type\isanewline
\ \ \ \ \ \ \ \ id{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}unit{\isadigit{2}}\ id{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}unit{\isadigit{2}}\ q{\isadigit{0}}{\isacharunderscore}{\kern0pt}assms\ q{\isadigit{1}}{\isacharunderscore}{\kern0pt}assms{\isacharparenright}{\kern0pt}\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ terminal{\isacharunderscore}{\kern0pt}fib{\isacharunderscore}{\kern0pt}prod{\isacharunderscore}{\kern0pt}iso{\isacharcolon}{\kern0pt}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}terminal{\isacharunderscore}{\kern0pt}object{\isacharparenleft}{\kern0pt}T{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{assumes}\ f{\isacharunderscore}{\kern0pt}type{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}f\ {\isacharcolon}{\kern0pt}\ Y\ {\isasymrightarrow}\ T{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{assumes}\ g{\isacharunderscore}{\kern0pt}type{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}g\ {\isacharcolon}{\kern0pt}\ X\ {\isasymrightarrow}\ T{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isacharparenleft}{\kern0pt}X\ \isactrlbsub g\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub f\isactrlesub \ Y{\isacharparenright}{\kern0pt}\ {\isasymcong}\ X\ {\isasymtimes}\isactrlsub c\ Y{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}{\kern0pt}\ \isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharparenleft}{\kern0pt}is{\isacharunderscore}{\kern0pt}pullback\ {\isacharparenleft}{\kern0pt}X\ \isactrlbsub g\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub f\isactrlesub \ Y{\isacharparenright}{\kern0pt}\ Y\ X\ T\ {\isacharparenleft}{\kern0pt}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj\ X\ g\ f\ Y{\isacharparenright}{\kern0pt}\ f\ {\isacharparenleft}{\kern0pt}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj\ X\ g\ f\ Y{\isacharparenright}{\kern0pt}\ g{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ pullback{\isacharunderscore}{\kern0pt}iff{\isacharunderscore}{\kern0pt}product\ fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}is{\isacharunderscore}{\kern0pt}pullback\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}typecheck{\isacharunderscore}{\kern0pt}cfuncs{\isacharcomma}{\kern0pt}\ blast{\isacharparenright}{\kern0pt}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharparenleft}{\kern0pt}is{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}prod\ {\isacharparenleft}{\kern0pt}X\ \isactrlbsub g\isactrlesub {\isasymtimes}\isactrlsub c\isactrlbsub f\isactrlesub \ Y{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}left{\isacharunderscore}{\kern0pt}proj\ X\ g\ f\ Y{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}fibered{\isacharunderscore}{\kern0pt}product{\isacharunderscore}{\kern0pt}right{\isacharunderscore}{\kern0pt}proj\ X\ g\ f\ Y{\isacharparenright}{\kern0pt}\ \ X\ Y{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}meson\ one{\isacharunderscore}{\kern0pt}terminal{\isacharunderscore}{\kern0pt}object\ pullback{\isacharunderscore}{\kern0pt}iff{\isacharunderscore}{\kern0pt}product\ terminal{\isacharunderscore}{\kern0pt}func{\isacharunderscore}{\kern0pt}type{\isacharparenright}{\kern0pt}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}{\kern0pt}thesis\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}metis\ canonical{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}prod{\isacharunderscore}{\kern0pt}is{\isacharunderscore}{\kern0pt}cart{\isacharunderscore}{\kern0pt}prod\ cart{\isacharunderscore}{\kern0pt}prods{\isacharunderscore}{\kern0pt}isomorphic\ fst{\isacharunderscore}{\kern0pt}conv\ is{\isacharunderscore}{\kern0pt}isomorphic{\isacharunderscore}{\kern0pt}def\ snd{\isacharunderscore}{\kern0pt}conv{\isacharparenright}{\kern0pt}\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
%
\isadelimtheory
\isanewline
%
\endisadelimtheory
%
\isatagtheory
\isacommand{end}\isamarkupfalse%
%
\endisatagtheory
{\isafoldtheory}%
%
\isadelimtheory
%
\endisadelimtheory
%
\end{isabellebody}%
\endinput
%:%file=~/ETCS/HOL-ETCS/Equalizer.thy%:%
%:%11=1%:%
%:%27=3%:%
%:%28=3%:%
%:%29=4%:%
%:%30=5%:%
%:%44=7%:%
%:%54=9%:%
%:%55=9%:%
%:%56=10%:%
%:%58=12%:%
%:%59=13%:%
%:%60=14%:%
%:%61=14%:%
%:%62=15%:%
%:%63=16%:%
%:%64=17%:%
%:%67=18%:%
%:%71=18%:%
%:%72=18%:%
%:%73=18%:%
%:%74=18%:%
%:%79=18%:%
%:%82=19%:%
%:%83=20%:%
%:%84=20%:%
%:%85=21%:%
%:%86=22%:%
%:%87=23%:%
%:%90=24%:%
%:%94=24%:%
%:%95=24%:%
%:%96=24%:%
%:%101=24%:%
%:%104=25%:%
%:%105=26%:%
%:%106=26%:%
%:%107=27%:%
%:%108=28%:%
%:%109=29%:%
%:%110=30%:%
%:%113=31%:%
%:%117=31%:%
%:%118=31%:%
%:%119=31%:%
%:%128=33%:%
%:%130=34%:%
%:%131=34%:%
%:%132=35%:%
%:%133=36%:%
%:%134=37%:%
%:%135=37%:%
%:%136=38%:%
%:%137=39%:%
%:%144=40%:%
%:%145=40%:%
%:%146=41%:%
%:%147=41%:%
%:%148=42%:%
%:%149=42%:%
%:%150=42%:%
%:%151=43%:%
%:%152=43%:%
%:%153=43%:%
%:%154=44%:%
%:%155=44%:%
%:%156=45%:%
%:%157=45%:%
%:%158=46%:%
%:%159=46%:%
%:%160=47%:%
%:%161=47%:%
%:%162=48%:%
%:%163=48%:%
%:%164=49%:%
%:%165=49%:%
%:%166=50%:%
%:%167=50%:%
%:%168=51%:%
%:%169=51%:%
%:%170=52%:%
%:%171=53%:%
%:%172=53%:%
%:%173=54%:%
%:%174=54%:%
%:%175=54%:%
%:%176=55%:%
%:%177=56%:%
%:%178=56%:%
%:%179=57%:%
%:%180=57%:%
%:%181=58%:%
%:%182=59%:%
%:%183=59%:%
%:%184=60%:%
%:%185=61%:%
%:%186=61%:%
%:%187=61%:%
%:%188=62%:%
%:%189=62%:%
%:%190=63%:%
%:%200=65%:%
%:%202=66%:%
%:%203=66%:%
%:%204=67%:%
%:%205=68%:%
%:%212=69%:%
%:%213=69%:%
%:%214=70%:%
%:%215=70%:%
%:%216=71%:%
%:%217=71%:%
%:%218=71%:%
%:%219=72%:%
%:%220=72%:%
%:%221=73%:%
%:%222=73%:%
%:%223=73%:%
%:%224=74%:%
%:%225=75%:%
%:%226=75%:%
%:%227=76%:%
%:%228=76%:%
%:%229=76%:%
%:%230=76%:%
%:%231=77%:%
%:%232=78%:%
%:%233=78%:%
%:%234=79%:%
%:%235=79%:%
%:%236=80%:%
%:%237=80%:%
%:%238=81%:%
%:%239=81%:%
%:%240=82%:%
%:%241=83%:%
%:%242=83%:%
%:%243=84%:%
%:%244=84%:%
%:%245=84%:%
%:%246=85%:%
%:%247=86%:%
%:%248=86%:%
%:%249=87%:%
%:%250=87%:%
%:%251=87%:%
%:%252=88%:%
%:%253=88%:%
%:%254=88%:%
%:%255=89%:%
%:%256=89%:%
%:%257=89%:%
%:%258=90%:%
%:%259=91%:%
%:%260=91%:%
%:%261=92%:%
%:%262=92%:%
%:%263=93%:%
%:%264=93%:%
%:%265=93%:%
%:%266=94%:%
%:%267=94%:%
%:%268=94%:%
%:%269=95%:%
%:%270=96%:%
%:%271=96%:%
%:%272=97%:%
%:%273=97%:%
%:%274=97%:%
%:%275=98%:%
%:%281=98%:%
%:%284=99%:%
%:%285=100%:%
%:%286=100%:%
%:%287=101%:%
%:%288=102%:%
%:%289=103%:%
%:%290=104%:%
%:%291=105%:%
%:%292=106%:%
%:%293=107%:%
%:%300=108%:%
%:%301=108%:%
%:%302=109%:%
%:%303=109%:%
%:%304=110%:%
%:%305=110%:%
%:%306=110%:%
%:%307=111%:%
%:%308=112%:%
%:%309=112%:%
%:%310=113%:%
%:%311=113%:%
%:%312=113%:%
%:%313=114%:%
%:%314=114%:%
%:%315=115%:%
%:%316=115%:%
%:%317=116%:%
%:%318=116%:%
%:%319=117%:%
%:%320=117%:%
%:%321=118%:%
%:%322=118%:%
%:%323=119%:%
%:%324=119%:%
%:%325=120%:%
%:%326=120%:%
%:%327=120%:%
%:%328=121%:%
%:%329=121%:%
%:%330=121%:%
%:%331=122%:%
%:%332=122%:%
%:%333=123%:%
%:%334=123%:%
%:%335=123%:%
%:%336=124%:%
%:%337=124%:%
%:%338=124%:%
%:%339=125%:%
%:%340=125%:%
%:%341=126%:%
%:%342=126%:%
%:%343=127%:%
%:%344=127%:%
%:%345=128%:%
%:%346=128%:%
%:%347=129%:%
%:%348=129%:%
%:%349=130%:%
%:%350=130%:%
%:%351=131%:%
%:%352=131%:%
%:%353=132%:%
%:%354=132%:%
%:%355=132%:%
%:%356=133%:%
%:%357=133%:%
%:%358=134%:%
%:%359=134%:%
%:%360=135%:%
%:%361=135%:%
%:%362=135%:%
%:%363=136%:%
%:%364=136%:%
%:%365=137%:%
%:%375=139%:%
%:%377=140%:%
%:%378=140%:%
%:%379=141%:%
%:%382=142%:%
%:%386=142%:%
%:%387=142%:%
%:%388=143%:%
%:%389=143%:%
%:%390=144%:%
%:%391=144%:%
%:%392=145%:%
%:%393=145%:%
%:%394=146%:%
%:%395=146%:%
%:%396=147%:%
%:%397=147%:%
%:%398=148%:%
%:%399=148%:%
%:%400=149%:%
%:%401=149%:%
%:%402=150%:%
%:%403=150%:%
%:%404=151%:%
%:%405=151%:%
%:%406=152%:%
%:%407=152%:%
%:%408=153%:%
%:%409=153%:%
%:%410=154%:%
%:%411=154%:%
%:%412=154%:%
%:%413=155%:%
%:%414=155%:%
%:%415=155%:%
%:%416=156%:%
%:%417=157%:%
%:%418=157%:%
%:%419=157%:%
%:%420=158%:%
%:%421=159%:%
%:%422=159%:%
%:%423=159%:%
%:%424=160%:%
%:%425=160%:%
%:%426=161%:%
%:%436=163%:%
%:%438=164%:%
%:%439=164%:%
%:%440=165%:%
%:%443=168%:%
%:%445=169%:%
%:%446=169%:%
%:%447=170%:%
%:%448=171%:%
%:%455=172%:%
%:%456=172%:%
%:%457=173%:%
%:%458=173%:%
%:%459=174%:%
%:%460=175%:%
%:%461=176%:%
%:%462=176%:%
%:%463=176%:%
%:%464=177%:%
%:%465=177%:%
%:%466=177%:%
%:%467=178%:%
%:%468=178%:%
%:%469=178%:%
%:%470=179%:%
%:%471=179%:%
%:%472=179%:%
%:%473=180%:%
%:%474=180%:%
%:%475=180%:%
%:%476=181%:%
%:%477=181%:%
%:%478=181%:%
%:%479=182%:%
%:%480=182%:%
%:%481=183%:%
%:%482=183%:%
%:%483=183%:%
%:%484=184%:%
%:%485=184%:%
%:%486=185%:%
%:%487=185%:%
%:%488=185%:%
%:%489=186%:%
%:%490=186%:%
%:%491=187%:%
%:%492=187%:%
%:%493=187%:%
%:%494=188%:%
%:%495=188%:%
%:%496=189%:%
%:%497=189%:%
%:%498=189%:%
%:%499=190%:%
%:%500=190%:%
%:%501=190%:%
%:%502=191%:%
%:%503=191%:%
%:%504=191%:%
%:%505=192%:%
%:%506=192%:%
%:%507=193%:%
%:%522=195%:%
%:%534=197%:%
%:%536=198%:%
%:%537=198%:%
%:%538=199%:%
%:%539=200%:%
%:%540=201%:%
%:%541=201%:%
%:%542=202%:%
%:%543=203%:%
%:%546=204%:%
%:%550=204%:%
%:%551=204%:%
%:%552=204%:%
%:%553=204%:%
%:%562=206%:%
%:%564=207%:%
%:%565=207%:%
%:%566=208%:%
%:%567=209%:%
%:%574=210%:%
%:%575=210%:%
%:%576=211%:%
%:%577=211%:%
%:%578=212%:%
%:%579=212%:%
%:%580=212%:%
%:%581=213%:%
%:%582=213%:%
%:%583=213%:%
%:%584=214%:%
%:%585=214%:%
%:%586=215%:%
%:%587=215%:%
%:%588=216%:%
%:%589=216%:%
%:%590=216%:%
%:%591=217%:%
%:%592=217%:%
%:%593=218%:%
%:%594=218%:%
%:%595=219%:%
%:%605=221%:%
%:%607=222%:%
%:%608=222%:%
%:%609=223%:%
%:%610=224%:%
%:%611=225%:%
%:%612=225%:%
%:%613=226%:%
%:%616=227%:%
%:%620=227%:%
%:%621=227%:%
%:%626=227%:%
%:%629=228%:%
%:%630=229%:%
%:%631=229%:%
%:%632=230%:%
%:%634=232%:%
%:%635=233%:%
%:%636=234%:%
%:%637=234%:%
%:%638=235%:%
%:%639=236%:%
%:%642=237%:%
%:%646=237%:%
%:%647=237%:%
%:%648=237%:%
%:%653=237%:%
%:%656=238%:%
%:%657=239%:%
%:%658=239%:%
%:%661=240%:%
%:%665=240%:%
%:%666=240%:%
%:%667=241%:%
%:%668=241%:%
%:%669=241%:%
%:%678=243%:%
%:%680=244%:%
%:%681=244%:%
%:%682=245%:%
%:%683=246%:%
%:%684=247%:%
%:%685=247%:%
%:%686=248%:%
%:%689=249%:%
%:%693=249%:%
%:%694=249%:%
%:%695=249%:%
%:%704=251%:%
%:%706=252%:%
%:%707=252%:%
%:%708=253%:%
%:%709=254%:%
%:%712=255%:%
%:%716=255%:%
%:%717=255%:%
%:%718=255%:%
%:%719=256%:%
%:%720=256%:%
%:%721=257%:%
%:%722=257%:%
%:%723=258%:%
%:%724=258%:%
%:%725=259%:%
%:%726=259%:%
%:%727=260%:%
%:%728=260%:%
%:%729=261%:%
%:%730=261%:%
%:%731=262%:%
%:%732=262%:%
%:%733=263%:%
%:%734=263%:%
%:%735=264%:%
%:%736=265%:%
%:%737=265%:%
%:%738=266%:%
%:%739=266%:%
%:%740=266%:%
%:%741=267%:%
%:%742=267%:%
%:%743=267%:%
%:%744=268%:%
%:%745=268%:%
%:%746=269%:%
%:%747=269%:%
%:%748=270%:%
%:%749=270%:%
%:%750=271%:%
%:%765=273%:%
%:%777=275%:%
%:%779=276%:%
%:%780=276%:%
%:%781=277%:%
%:%782=278%:%
%:%783=279%:%
%:%784=280%:%
%:%785=280%:%
%:%786=281%:%
%:%787=282%:%
%:%794=283%:%
%:%795=283%:%
%:%796=284%:%
%:%797=284%:%
%:%798=285%:%
%:%799=285%:%
%:%800=286%:%
%:%801=286%:%
%:%802=286%:%
%:%803=287%:%
%:%804=287%:%
%:%805=287%:%
%:%806=287%:%
%:%807=288%:%
%:%813=288%:%
%:%816=289%:%
%:%817=290%:%
%:%818=290%:%
%:%819=291%:%
%:%820=292%:%
%:%821=293%:%
%:%822=294%:%
%:%823=294%:%
%:%824=295%:%
%:%825=296%:%
%:%832=297%:%
%:%833=297%:%
%:%834=298%:%
%:%835=298%:%
%:%836=299%:%
%:%837=299%:%
%:%838=299%:%
%:%839=300%:%
%:%840=300%:%
%:%841=300%:%
%:%842=301%:%
%:%843=302%:%
%:%844=302%:%
%:%845=302%:%
%:%846=302%:%
%:%847=303%:%
%:%848=303%:%
%:%849=303%:%
%:%850=304%:%
%:%851=304%:%
%:%852=304%:%
%:%853=305%:%
%:%859=305%:%
%:%862=306%:%
%:%863=307%:%
%:%864=307%:%
%:%865=308%:%
%:%866=309%:%
%:%869=310%:%
%:%873=310%:%
%:%874=310%:%
%:%875=310%:%
%:%880=310%:%
%:%883=311%:%
%:%884=312%:%
%:%885=312%:%
%:%886=313%:%
%:%887=314%:%
%:%888=315%:%
%:%891=316%:%
%:%895=316%:%
%:%896=316%:%
%:%897=317%:%
%:%898=317%:%
%:%903=317%:%
%:%906=318%:%
%:%907=319%:%
%:%908=319%:%
%:%909=320%:%
%:%910=321%:%
%:%913=322%:%
%:%917=322%:%
%:%918=322%:%
%:%919=322%:%
%:%928=324%:%
%:%930=325%:%
%:%931=325%:%
%:%932=326%:%
%:%933=327%:%
%:%936=328%:%
%:%940=328%:%
%:%941=328%:%
%:%942=329%:%
%:%943=329%:%
%:%944=330%:%
%:%945=330%:%
%:%946=331%:%
%:%947=331%:%
%:%948=332%:%
%:%949=332%:%
%:%950=333%:%
%:%951=333%:%
%:%952=334%:%
%:%953=335%:%
%:%954=335%:%
%:%955=335%:%
%:%956=336%:%
%:%957=337%:%
%:%958=337%:%
%:%959=338%:%
%:%960=338%:%
%:%961=338%:%
%:%962=339%:%
%:%963=340%:%
%:%964=340%:%
%:%965=341%:%
%:%966=341%:%
%:%967=342%:%
%:%968=342%:%
%:%969=342%:%
%:%970=343%:%
%:%971=344%:%
%:%972=344%:%
%:%973=344%:%
%:%974=345%:%
%:%975=345%:%
%:%976=345%:%
%:%977=346%:%
%:%978=346%:%
%:%979=347%:%
%:%980=347%:%
%:%981=348%:%
%:%982=348%:%
%:%983=348%:%
%:%984=349%:%
%:%985=349%:%
%:%986=350%:%
%:%987=350%:%
%:%988=351%:%
%:%994=351%:%
%:%997=352%:%
%:%998=353%:%
%:%999=353%:%
%:%1000=354%:%
%:%1001=355%:%
%:%1002=356%:%
%:%1003=356%:%
%:%1004=357%:%
%:%1005=358%:%
%:%1008=359%:%
%:%1012=359%:%
%:%1013=359%:%
%:%1014=359%:%
%:%1015=359%:%
%:%1020=359%:%
%:%1023=360%:%
%:%1024=361%:%
%:%1025=361%:%
%:%1026=362%:%
%:%1027=363%:%
%:%1030=364%:%
%:%1034=364%:%
%:%1035=364%:%
%:%1036=364%:%
%:%1041=364%:%
%:%1044=365%:%
%:%1045=366%:%
%:%1046=366%:%
%:%1047=367%:%
%:%1048=368%:%
%:%1051=369%:%
%:%1055=369%:%
%:%1056=369%:%
%:%1057=369%:%
%:%1062=369%:%
%:%1065=370%:%
%:%1066=371%:%
%:%1067=371%:%
%:%1068=372%:%
%:%1069=373%:%
%:%1072=374%:%
%:%1076=374%:%
%:%1077=374%:%
%:%1078=375%:%
%:%1079=375%:%
%:%1080=376%:%
%:%1081=376%:%
%:%1086=376%:%
%:%1089=377%:%
%:%1090=378%:%
%:%1091=378%:%
%:%1092=379%:%
%:%1093=380%:%
%:%1095=382%:%
%:%1098=383%:%
%:%1102=383%:%
%:%1103=383%:%
%:%1104=383%:%
%:%1105=384%:%
%:%1106=384%:%
%:%1107=385%:%
%:%1108=385%:%
%:%1109=386%:%
%:%1110=386%:%
%:%1111=387%:%
%:%1112=387%:%
%:%1113=388%:%
%:%1114=388%:%
%:%1115=389%:%
%:%1116=389%:%
%:%1117=389%:%
%:%1118=390%:%
%:%1119=391%:%
%:%1120=391%:%
%:%1121=392%:%
%:%1122=393%:%
%:%1123=393%:%
%:%1124=393%:%
%:%1125=394%:%
%:%1126=394%:%
%:%1127=395%:%
%:%1128=395%:%
%:%1129=396%:%
%:%1130=396%:%
%:%1131=397%:%
%:%1132=397%:%
%:%1133=398%:%
%:%1134=399%:%
%:%1135=399%:%
%:%1136=400%:%
%:%1137=400%:%
%:%1138=400%:%
%:%1139=401%:%
%:%1140=401%:%
%:%1141=401%:%
%:%1143=403%:%
%:%1144=404%:%
%:%1145=404%:%
%:%1146=404%:%
%:%1147=404%:%
%:%1148=405%:%
%:%1149=405%:%
%:%1150=405%:%
%:%1152=407%:%
%:%1153=408%:%
%:%1154=408%:%
%:%1155=409%:%
%:%1156=409%:%
%:%1157=409%:%
%:%1158=410%:%
%:%1159=410%:%
%:%1160=411%:%
%:%1161=411%:%
%:%1162=412%:%
%:%1163=413%:%
%:%1164=413%:%
%:%1165=413%:%
%:%1167=415%:%
%:%1168=416%:%
%:%1169=416%:%
%:%1170=417%:%
%:%1171=417%:%
%:%1172=418%:%
%:%1173=418%:%
%:%1174=419%:%
%:%1175=419%:%
%:%1176=420%:%
%:%1177=421%:%
%:%1178=421%:%
%:%1180=423%:%
%:%1181=424%:%
%:%1182=424%:%
%:%1183=425%:%
%:%1184=426%:%
%:%1185=426%:%
%:%1186=427%:%
%:%1187=427%:%
%:%1188=428%:%
%:%1189=428%:%
%:%1190=429%:%
%:%1191=430%:%
%:%1192=430%:%
%:%1193=431%:%
%:%1194=431%:%
%:%1195=432%:%
%:%1196=432%:%
%:%1197=433%:%
%:%1198=433%:%
%:%1199=434%:%
%:%1200=434%:%
%:%1201=435%:%
%:%1202=435%:%
%:%1203=436%:%
%:%1204=436%:%
%:%1205=437%:%
%:%1206=437%:%
%:%1207=438%:%
%:%1208=438%:%
%:%1209=439%:%
%:%1210=439%:%
%:%1211=440%:%
%:%1212=441%:%
%:%1213=441%:%
%:%1214=441%:%
%:%1215=442%:%
%:%1216=442%:%
%:%1217=443%:%
%:%1218=443%:%
%:%1219=444%:%
%:%1229=446%:%
%:%1231=447%:%
%:%1232=447%:%
%:%1233=448%:%
%:%1234=449%:%
%:%1241=450%:%
%:%1242=450%:%
%:%1243=451%:%
%:%1244=451%:%
%:%1245=452%:%
%:%1246=452%:%
%:%1247=452%:%
%:%1248=452%:%
%:%1249=453%:%
%:%1250=454%:%
%:%1251=454%:%
%:%1252=455%:%
%:%1253=455%:%
%:%1254=455%:%
%:%1255=456%:%
%:%1256=457%:%
%:%1257=457%:%
%:%1258=457%:%
%:%1259=458%:%
%:%1260=458%:%
%:%1261=458%:%
%:%1262=459%:%
%:%1263=459%:%
%:%1264=459%:%
%:%1265=460%:%
%:%1266=460%:%
%:%1267=460%:%
%:%1268=461%:%
%:%1269=461%:%
%:%1270=461%:%
%:%1271=462%:%
%:%1272=462%:%
%:%1273=462%:%
%:%1274=463%:%
%:%1275=463%:%
%:%1276=463%:%
%:%1277=464%:%
%:%1278=464%:%
%:%1279=464%:%
%:%1280=465%:%
%:%1281=465%:%
%:%1282=465%:%
%:%1283=466%:%
%:%1284=466%:%
%:%1285=466%:%
%:%1286=467%:%
%:%1287=467%:%
%:%1288=467%:%
%:%1289=468%:%
%:%1290=468%:%
%:%1291=469%:%
%:%1292=470%:%
%:%1293=470%:%
%:%1294=470%:%
%:%1295=471%:%
%:%1296=471%:%
%:%1297=471%:%
%:%1298=471%:%
%:%1299=472%:%
%:%1300=472%:%
%:%1301=473%:%
%:%1302=473%:%
%:%1303=474%:%
%:%1304=474%:%
%:%1305=474%:%
%:%1306=474%:%
%:%1307=475%:%
%:%1308=476%:%
%:%1309=476%:%
%:%1310=477%:%
%:%1311=477%:%
%:%1312=477%:%
%:%1313=478%:%
%:%1314=478%:%
%:%1315=478%:%
%:%1316=479%:%
%:%1317=479%:%
%:%1318=479%:%
%:%1319=480%:%
%:%1320=480%:%
%:%1321=481%:%
%:%1322=481%:%
%:%1323=481%:%
%:%1324=482%:%
%:%1325=482%:%
%:%1326=482%:%
%:%1328=484%:%
%:%1329=485%:%
%:%1330=485%:%
%:%1331=485%:%
%:%1332=485%:%
%:%1333=486%:%
%:%1334=486%:%
%:%1335=486%:%
%:%1336=487%:%
%:%1337=487%:%
%:%1338=487%:%
%:%1339=488%:%
%:%1340=488%:%
%:%1341=488%:%
%:%1342=489%:%
%:%1343=489%:%
%:%1344=489%:%
%:%1345=490%:%
%:%1346=490%:%
%:%1347=491%:%
%:%1362=493%:%
%:%1374=495%:%
%:%1376=496%:%
%:%1377=496%:%
%:%1378=497%:%
%:%1379=498%:%
%:%1380=499%:%
%:%1381=500%:%
%:%1382=500%:%
%:%1383=501%:%
%:%1384=502%:%
%:%1391=503%:%
%:%1392=503%:%
%:%1393=504%:%
%:%1394=504%:%
%:%1395=505%:%
%:%1396=505%:%
%:%1397=505%:%
%:%1398=506%:%
%:%1399=506%:%
%:%1400=506%:%
%:%1401=507%:%
%:%1402=508%:%
%:%1403=508%:%
%:%1404=508%:%
%:%1405=509%:%
%:%1406=509%:%
%:%1407=509%:%
%:%1408=510%:%
%:%1409=511%:%
%:%1410=511%:%
%:%1411=511%:%
%:%1412=512%:%
%:%1413=512%:%
%:%1414=512%:%
%:%1415=513%:%
%:%1416=513%:%
%:%1417=514%:%
%:%1423=514%:%
%:%1426=515%:%
%:%1427=516%:%
%:%1428=516%:%
%:%1429=517%:%
%:%1430=518%:%
%:%1431=519%:%
%:%1432=520%:%
%:%1433=520%:%
%:%1434=521%:%
%:%1435=522%:%
%:%1442=523%:%
%:%1443=523%:%
%:%1444=524%:%
%:%1445=524%:%
%:%1446=525%:%
%:%1447=526%:%
%:%1448=526%:%
%:%1449=526%:%
%:%1450=527%:%
%:%1451=527%:%
%:%1452=527%:%
%:%1453=528%:%
%:%1454=529%:%
%:%1455=529%:%
%:%1456=529%:%
%:%1457=530%:%
%:%1458=530%:%
%:%1459=530%:%
%:%1460=531%:%
%:%1461=531%:%
%:%1462=532%:%
%:%1468=532%:%
%:%1471=533%:%
%:%1472=534%:%
%:%1473=534%:%
%:%1474=535%:%
%:%1475=536%:%
%:%1478=537%:%
%:%1482=537%:%
%:%1483=537%:%
%:%1484=537%:%
%:%1489=537%:%
%:%1492=538%:%
%:%1493=539%:%
%:%1494=539%:%
%:%1495=540%:%
%:%1496=541%:%
%:%1499=542%:%
%:%1503=542%:%
%:%1504=542%:%
%:%1505=542%:%
%:%1510=542%:%
%:%1513=543%:%
%:%1514=544%:%
%:%1515=544%:%
%:%1516=545%:%
%:%1517=546%:%
%:%1518=547%:%
%:%1519=547%:%
%:%1520=548%:%
%:%1521=549%:%
%:%1524=550%:%
%:%1528=550%:%
%:%1529=550%:%
%:%1534=550%:%
%:%1537=551%:%
%:%1538=552%:%
%:%1539=552%:%
%:%1540=553%:%
%:%1541=554%:%
%:%1542=555%:%
%:%1543=555%:%
%:%1544=556%:%
%:%1545=557%:%
%:%1548=558%:%
%:%1552=558%:%
%:%1553=558%:%
%:%1558=558%:%
%:%1561=559%:%
%:%1562=560%:%
%:%1563=560%:%
%:%1564=561%:%
%:%1565=562%:%
%:%1568=563%:%
%:%1572=563%:%
%:%1573=563%:%
%:%1574=564%:%
%:%1575=564%:%
%:%1576=565%:%
%:%1577=565%:%
%:%1578=566%:%
%:%1579=566%:%
%:%1580=566%:%
%:%1581=567%:%
%:%1582=568%:%
%:%1583=568%:%
%:%1584=569%:%
%:%1585=569%:%
%:%1586=569%:%
%:%1587=570%:%
%:%1588=570%:%
%:%1589=570%:%
%:%1590=571%:%
%:%1591=571%:%
%:%1592=571%:%
%:%1593=572%:%
%:%1594=572%:%
%:%1595=572%:%
%:%1596=573%:%
%:%1597=573%:%
%:%1598=573%:%
%:%1599=574%:%
%:%1600=575%:%
%:%1601=575%:%
%:%1602=576%:%
%:%1608=576%:%
%:%1611=577%:%
%:%1612=578%:%
%:%1613=578%:%
%:%1614=579%:%
%:%1615=580%:%
%:%1618=581%:%
%:%1622=581%:%
%:%1623=581%:%
%:%1624=582%:%
%:%1625=582%:%
%:%1626=583%:%
%:%1627=583%:%
%:%1628=584%:%
%:%1629=584%:%
%:%1630=585%:%
%:%1631=585%:%
%:%1632=586%:%
%:%1633=586%:%
%:%1634=587%:%
%:%1635=587%:%
%:%1636=588%:%
%:%1637=588%:%
%:%1638=589%:%
%:%1639=589%:%
%:%1640=590%:%
%:%1641=590%:%
%:%1642=591%:%
%:%1643=591%:%
%:%1644=592%:%
%:%1645=593%:%
%:%1646=593%:%
%:%1647=594%:%
%:%1648=594%:%
%:%1649=594%:%
%:%1650=595%:%
%:%1651=595%:%
%:%1652=595%:%
%:%1653=596%:%
%:%1654=596%:%
%:%1655=597%:%
%:%1656=597%:%
%:%1657=597%:%
%:%1658=598%:%
%:%1659=599%:%
%:%1660=599%:%
%:%1661=600%:%
%:%1662=600%:%
%:%1663=601%:%
%:%1664=601%:%
%:%1665=602%:%
%:%1666=602%:%
%:%1667=603%:%
%:%1668=604%:%
%:%1669=604%:%
%:%1670=605%:%
%:%1671=606%:%
%:%1672=606%:%
%:%1673=607%:%
%:%1674=607%:%
%:%1675=608%:%
%:%1676=609%:%
%:%1677=609%:%
%:%1678=610%:%
%:%1679=611%:%
%:%1680=611%:%
%:%1681=612%:%
%:%1682=612%:%
%:%1683=613%:%
%:%1684=613%:%
%:%1685=614%:%
%:%1686=614%:%
%:%1687=615%:%
%:%1688=615%:%
%:%1689=616%:%
%:%1690=616%:%
%:%1691=617%:%
%:%1692=617%:%
%:%1693=618%:%
%:%1694=618%:%
%:%1695=618%:%
%:%1696=619%:%
%:%1697=620%:%
%:%1698=620%:%
%:%1699=620%:%
%:%1700=621%:%
%:%1701=621%:%
%:%1702=622%:%
%:%1703=622%:%
%:%1704=623%:%
%:%1705=623%:%
%:%1706=623%:%
%:%1707=624%:%
%:%1708=625%:%
%:%1709=625%:%
%:%1710=625%:%
%:%1711=626%:%
%:%1712=626%:%
%:%1713=627%:%
%:%1714=628%:%
%:%1715=628%:%
%:%1716=629%:%
%:%1717=629%:%
%:%1718=629%:%
%:%1719=630%:%
%:%1720=631%:%
%:%1721=631%:%
%:%1722=632%:%
%:%1723=632%:%
%:%1724=633%:%
%:%1725=633%:%
%:%1726=634%:%
%:%1727=634%:%
%:%1728=634%:%
%:%1729=635%:%
%:%1730=635%:%
%:%1731=636%:%
%:%1732=636%:%
%:%1733=637%:%
%:%1734=637%:%
%:%1735=638%:%
%:%1741=638%:%
%:%1744=639%:%
%:%1745=640%:%
%:%1746=640%:%
%:%1747=641%:%
%:%1748=642%:%
%:%1751=643%:%
%:%1755=643%:%
%:%1756=643%:%
%:%1757=644%:%
%:%1758=644%:%
%:%1759=644%:%
%:%1764=644%:%
%:%1767=645%:%
%:%1768=646%:%
%:%1769=646%:%
%:%1770=647%:%
%:%1771=648%:%
%:%1778=649%:%
%:%1779=649%:%
%:%1780=650%:%
%:%1781=650%:%
%:%1782=651%:%
%:%1783=651%:%
%:%1784=651%:%
%:%1785=652%:%
%:%1786=653%:%
%:%1787=653%:%
%:%1788=654%:%
%:%1789=654%:%
%:%1790=654%:%
%:%1791=655%:%
%:%1792=656%:%
%:%1793=656%:%
%:%1794=657%:%
%:%1795=657%:%
%:%1796=658%:%
%:%1797=658%:%
%:%1798=659%:%
%:%1799=659%:%
%:%1800=660%:%
%:%1801=661%:%
%:%1802=661%:%
%:%1803=662%:%
%:%1804=662%:%
%:%1805=663%:%
%:%1806=663%:%
%:%1807=664%:%
%:%1808=664%:%
%:%1809=665%:%
%:%1810=666%:%
%:%1811=666%:%
%:%1812=667%:%
%:%1813=667%:%
%:%1814=667%:%
%:%1815=668%:%
%:%1816=668%:%
%:%1817=668%:%
%:%1818=669%:%
%:%1819=669%:%
%:%1820=669%:%
%:%1821=670%:%
%:%1822=670%:%
%:%1823=671%:%
%:%1824=671%:%
%:%1825=672%:%
%:%1826=672%:%
%:%1827=673%:%
%:%1828=673%:%
%:%1829=674%:%
%:%1830=674%:%
%:%1831=675%:%
%:%1832=675%:%
%:%1833=676%:%
%:%1834=676%:%
%:%1835=676%:%
%:%1836=677%:%
%:%1837=677%:%
%:%1838=678%:%
%:%1839=678%:%
%:%1840=678%:%
%:%1841=679%:%
%:%1842=679%:%
%:%1843=680%:%
%:%1844=680%:%
%:%1845=680%:%
%:%1846=681%:%
%:%1847=681%:%
%:%1850=684%:%
%:%1851=685%:%
%:%1852=685%:%
%:%1853=685%:%
%:%1854=685%:%
%:%1855=686%:%
%:%1856=687%:%
%:%1857=687%:%
%:%1858=688%:%
%:%1859=689%:%
%:%1860=689%:%
%:%1861=689%:%
%:%1862=690%:%
%:%1863=690%:%
%:%1864=691%:%
%:%1865=692%:%
%:%1866=692%:%
%:%1867=693%:%
%:%1868=693%:%
%:%1869=694%:%
%:%1870=694%:%
%:%1871=694%:%
%:%1872=695%:%
%:%1873=696%:%
%:%1874=696%:%
%:%1875=697%:%
%:%1876=697%:%
%:%1877=698%:%
%:%1878=698%:%
%:%1879=698%:%
%:%1880=699%:%
%:%1881=700%:%
%:%1882=700%:%
%:%1883=701%:%
%:%1884=701%:%
%:%1885=702%:%
%:%1886=702%:%
%:%1887=702%:%
%:%1888=703%:%
%:%1889=704%:%
%:%1890=704%:%
%:%1891=705%:%
%:%1892=705%:%
%:%1893=705%:%
%:%1894=706%:%
%:%1895=706%:%
%:%1896=707%:%
%:%1897=707%:%
%:%1898=708%:%
%:%1904=708%:%
%:%1907=709%:%
%:%1908=710%:%
%:%1909=710%:%
%:%1910=711%:%
%:%1911=712%:%
%:%1912=713%:%
%:%1919=714%:%
%:%1920=714%:%
%:%1921=715%:%
%:%1922=715%:%
%:%1923=716%:%
%:%1924=716%:%
%:%1925=717%:%
%:%1926=717%:%
%:%1927=718%:%
%:%1928=718%:%
%:%1929=719%:%
%:%1930=719%:%
%:%1931=719%:%
%:%1932=720%:%
%:%1933=721%:%
%:%1934=721%:%
%:%1935=722%:%
%:%1936=723%:%
%:%1937=723%:%
%:%1938=724%:%
%:%1939=724%:%
%:%1940=725%:%
%:%1941=725%:%
%:%1942=726%:%
%:%1943=727%:%
%:%1944=727%:%
%:%1945=728%:%
%:%1946=728%:%
%:%1947=729%:%
%:%1948=729%:%
%:%1949=730%:%
%:%1950=731%:%
%:%1951=731%:%
%:%1952=731%:%
%:%1953=732%:%
%:%1954=732%:%
%:%1955=732%:%
%:%1956=733%:%
%:%1962=733%:%
%:%1965=734%:%
%:%1966=735%:%
%:%1967=735%:%
%:%1968=736%:%
%:%1969=737%:%
%:%1972=738%:%
%:%1976=738%:%
%:%1977=738%:%
%:%1978=738%:%
%:%1987=740%:%
%:%1989=741%:%
%:%1990=741%:%
%:%1991=742%:%
%:%1992=743%:%
%:%1999=744%:%
%:%2000=744%:%
%:%2001=745%:%
%:%2002=745%:%
%:%2003=746%:%
%:%2004=746%:%
%:%2005=747%:%
%:%2006=747%:%
%:%2007=747%:%
%:%2008=748%:%
%:%2009=748%:%
%:%2010=749%:%
%:%2011=749%:%
%:%2012=750%:%
%:%2013=750%:%
%:%2014=751%:%
%:%2015=751%:%
%:%2016=751%:%
%:%2017=752%:%
%:%2018=752%:%
%:%2019=752%:%
%:%2020=753%:%
%:%2021=753%:%
%:%2022=753%:%
%:%2023=754%:%
%:%2024=754%:%
%:%2025=754%:%
%:%2026=755%:%
%:%2027=755%:%
%:%2028=756%:%
%:%2029=756%:%
%:%2030=757%:%
%:%2031=757%:%
%:%2032=757%:%
%:%2033=758%:%
%:%2034=758%:%
%:%2035=758%:%
%:%2036=759%:%
%:%2042=759%:%
%:%2045=760%:%
%:%2046=761%:%
%:%2047=761%:%
%:%2048=762%:%
%:%2049=763%:%
%:%2052=764%:%
%:%2056=764%:%
%:%2057=764%:%
%:%2058=765%:%
%:%2059=765%:%
%:%2060=766%:%
%:%2061=766%:%
%:%2062=767%:%
%:%2063=767%:%
%:%2064=768%:%
%:%2065=768%:%
%:%2066=769%:%
%:%2067=769%:%
%:%2068=770%:%
%:%2069=770%:%
%:%2070=771%:%
%:%2071=771%:%
%:%2072=771%:%
%:%2073=772%:%
%:%2074=772%:%
%:%2075=772%:%
%:%2076=773%:%
%:%2077=774%:%
%:%2078=774%:%
%:%2079=775%:%
%:%2080=775%:%
%:%2081=775%:%
%:%2082=776%:%
%:%2083=776%:%
%:%2084=777%:%
%:%2085=777%:%
%:%2086=777%:%
%:%2087=778%:%
%:%2088=779%:%
%:%2089=779%:%
%:%2090=780%:%
%:%2091=780%:%
%:%2092=780%:%
%:%2093=781%:%
%:%2094=781%:%
%:%2095=781%:%
%:%2096=782%:%
%:%2097=782%:%
%:%2098=782%:%
%:%2099=783%:%
%:%2100=783%:%
%:%2101=783%:%
%:%2102=784%:%
%:%2103=785%:%
%:%2104=785%:%
%:%2105=786%:%
%:%2106=786%:%
%:%2107=786%:%
%:%2108=787%:%
%:%2109=787%:%
%:%2110=788%:%
%:%2111=788%:%
%:%2112=789%:%
%:%2113=789%:%
%:%2114=789%:%
%:%2115=790%:%
%:%2116=790%:%
%:%2117=791%:%
%:%2118=792%:%
%:%2119=792%:%
%:%2120=793%:%
%:%2121=793%:%
%:%2122=793%:%
%:%2123=794%:%
%:%2124=794%:%
%:%2125=795%:%
%:%2126=795%:%
%:%2127=795%:%
%:%2128=796%:%
%:%2129=796%:%
%:%2130=796%:%
%:%2131=797%:%
%:%2132=797%:%
%:%2133=798%:%
%:%2134=798%:%
%:%2135=799%:%
%:%2136=799%:%
%:%2137=799%:%
%:%2138=800%:%
%:%2139=800%:%
%:%2140=800%:%
%:%2141=801%:%
%:%2142=801%:%
%:%2143=801%:%
%:%2144=802%:%
%:%2145=802%:%
%:%2146=803%:%
%:%2147=803%:%
%:%2148=804%:%
%:%2149=805%:%
%:%2150=805%:%
%:%2151=806%:%
%:%2152=806%:%
%:%2153=807%:%
%:%2154=807%:%
%:%2155=808%:%
%:%2156=808%:%
%:%2157=808%:%
%:%2158=809%:%
%:%2159=809%:%
%:%2160=810%:%
%:%2161=810%:%
%:%2162=811%:%
%:%2163=811%:%
%:%2164=812%:%
%:%2165=812%:%
%:%2166=813%:%
%:%2167=813%:%
%:%2168=814%:%
%:%2169=814%:%
%:%2170=814%:%
%:%2171=815%:%
%:%2172=815%:%
%:%2173=816%:%
%:%2174=817%:%
%:%2175=818%:%
%:%2176=818%:%
%:%2177=819%:%
%:%2178=819%:%
%:%2179=820%:%
%:%2180=820%:%
%:%2181=821%:%
%:%2182=821%:%
%:%2183=822%:%
%:%2184=822%:%
%:%2185=822%:%
%:%2186=823%:%
%:%2187=823%:%
%:%2188=823%:%
%:%2189=824%:%
%:%2190=824%:%
%:%2191=824%:%
%:%2192=825%:%
%:%2193=825%:%
%:%2194=826%:%
%:%2195=826%:%
%:%2196=827%:%
%:%2197=827%:%
%:%2198=828%:%
%:%2199=828%:%
%:%2200=829%:%
%:%2201=829%:%
%:%2202=830%:%
%:%2203=830%:%
%:%2204=830%:%
%:%2205=831%:%
%:%2206=831%:%
%:%2207=831%:%
%:%2208=832%:%
%:%2209=832%:%
%:%2210=833%:%
%:%2211=833%:%
%:%2212=834%:%
%:%2213=834%:%
%:%2214=834%:%
%:%2215=835%:%
%:%2216=835%:%
%:%2217=836%:%
%:%2218=836%:%
%:%2219=836%:%
%:%2220=837%:%
%:%2221=837%:%
%:%2222=838%:%
%:%2223=838%:%
%:%2224=838%:%
%:%2225=839%:%
%:%2226=839%:%
%:%2227=839%:%
%:%2228=840%:%
%:%2229=840%:%
%:%2230=840%:%
%:%2231=841%:%
%:%2232=841%:%
%:%2233=842%:%
%:%2234=842%:%
%:%2235=843%:%
%:%2236=843%:%
%:%2237=843%:%
%:%2238=844%:%
%:%2239=844%:%
%:%2240=844%:%
%:%2241=845%:%
%:%2242=845%:%
%:%2243=845%:%
%:%2244=846%:%
%:%2245=846%:%
%:%2246=846%:%
%:%2247=847%:%
%:%2248=847%:%
%:%2249=848%:%
%:%2250=848%:%
%:%2251=848%:%
%:%2252=849%:%
%:%2253=849%:%
%:%2254=849%:%
%:%2255=850%:%
%:%2256=850%:%
%:%2257=851%:%
%:%2258=852%:%
%:%2259=852%:%
%:%2260=853%:%
%:%2261=853%:%
%:%2262=854%:%
%:%2263=854%:%
%:%2264=854%:%
%:%2265=855%:%
%:%2266=855%:%
%:%2267=856%:%
%:%2268=856%:%
%:%2269=856%:%
%:%2270=857%:%
%:%2271=857%:%
%:%2272=857%:%
%:%2273=858%:%
%:%2274=858%:%
%:%2275=859%:%
%:%2276=860%:%
%:%2277=860%:%
%:%2278=861%:%
%:%2279=861%:%
%:%2280=862%:%
%:%2281=862%:%
%:%2282=863%:%
%:%2283=864%:%
%:%2284=864%:%
%:%2285=864%:%
%:%2286=865%:%
%:%2287=865%:%
%:%2288=866%:%
%:%2289=866%:%
%:%2290=866%:%
%:%2291=867%:%
%:%2297=867%:%
%:%2300=868%:%
%:%2301=869%:%
%:%2302=869%:%
%:%2303=870%:%
%:%2304=871%:%
%:%2305=872%:%
%:%2312=873%:%
%:%2313=873%:%
%:%2314=874%:%
%:%2315=874%:%
%:%2316=875%:%
%:%2317=876%:%
%:%2318=877%:%
%:%2319=878%:%
%:%2320=878%:%
%:%2321=878%:%
%:%2322=879%:%
%:%2323=880%:%
%:%2324=880%:%
%:%2325=881%:%
%:%2326=882%:%
%:%2327=883%:%
%:%2328=884%:%
%:%2329=884%:%
%:%2330=884%:%
%:%2331=885%:%
%:%2332=886%:%
%:%2333=886%:%
%:%2334=887%:%
%:%2335=887%:%
%:%2336=888%:%
%:%2337=888%:%
%:%2338=889%:%
%:%2339=889%:%
%:%2340=890%:%
%:%2341=890%:%
%:%2342=891%:%
%:%2343=891%:%
%:%2344=892%:%
%:%2345=892%:%
%:%2346=893%:%
%:%2347=893%:%
%:%2348=893%:%
%:%2349=894%:%
%:%2350=894%:%
%:%2351=894%:%
%:%2352=895%:%
%:%2353=895%:%
%:%2354=896%:%
%:%2355=897%:%
%:%2356=897%:%
%:%2357=898%:%
%:%2358=899%:%
%:%2359=899%:%
%:%2360=899%:%
%:%2361=900%:%
%:%2362=900%:%
%:%2363=900%:%
%:%2364=901%:%
%:%2365=901%:%
%:%2366=902%:%
%:%2367=903%:%
%:%2368=904%:%
%:%2369=905%:%
%:%2370=905%:%
%:%2371=905%:%
%:%2372=906%:%
%:%2373=907%:%
%:%2374=907%:%
%:%2375=908%:%
%:%2376=908%:%
%:%2377=909%:%
%:%2378=910%:%
%:%2379=911%:%
%:%2380=911%:%
%:%2381=911%:%
%:%2382=912%:%
%:%2383=912%:%
%:%2384=913%:%
%:%2385=914%:%
%:%2386=914%:%
%:%2387=915%:%
%:%2388=915%:%
%:%2389=915%:%
%:%2390=916%:%
%:%2391=916%:%
%:%2392=917%:%
%:%2393=917%:%
%:%2394=917%:%
%:%2395=918%:%
%:%2396=918%:%
%:%2397=919%:%
%:%2398=920%:%
%:%2404=920%:%
%:%2407=921%:%
%:%2408=922%:%
%:%2409=922%:%
%:%2410=923%:%
%:%2411=924%:%
%:%2412=925%:%
%:%2413=926%:%
%:%2420=927%:%
%:%2421=927%:%
%:%2422=928%:%
%:%2423=928%:%
%:%2424=929%:%
%:%2425=929%:%
%:%2426=929%:%
%:%2427=930%:%
%:%2428=930%:%
%:%2429=930%:%
%:%2430=931%:%
%:%2431=931%:%
%:%2432=931%:%
%:%2433=932%:%
%:%2434=932%:%
%:%2435=932%:%
%:%2436=933%:%
%:%2437=933%:%
%:%2438=933%:%
%:%2439=934%:%
%:%2445=934%:%
%:%2450=935%:%
%:%2455=936%:%
